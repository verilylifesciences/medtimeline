(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./src/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/app-routing.module.ts":
/*!***************************************!*\
  !*** ./src/app/app-routing.module.ts ***!
  \***************************************/
/*! exports provided: AppRoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppRoutingModule", function() { return AppRoutingModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _cardcontainer_cardcontainer_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cardcontainer/cardcontainer.component */ "./src/app/cardcontainer/cardcontainer.component.ts");
/* harmony import */ var _fhir_server_fhir_launch_fhir_launch_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fhir-server/fhir-launch/fhir-launch.component */ "./src/app/fhir-server/fhir-launch/fhir-launch.component.ts");
/* harmony import */ var _setup_setup_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./setup/setup.component */ "./src/app/setup/setup.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





/* On their end, it's locked down so that the only acceptable redirect
URL is localhost:8000/. So, we have to do a different path for
authentication. */
var routes = [
    { path: 'main', component: _cardcontainer_cardcontainer_component__WEBPACK_IMPORTED_MODULE_2__["CardcontainerComponent"] },
    { path: 'setup', component: _setup_setup_component__WEBPACK_IMPORTED_MODULE_4__["SetupComponent"] },
    { path: '', component: _fhir_server_fhir_launch_fhir_launch_component__WEBPACK_IMPORTED_MODULE_3__["FhirLaunchComponent"] }, { path: '**', redirectTo: '' }
];
var AppRoutingModule = /** @class */ (function () {
    function AppRoutingModule() {
    }
    AppRoutingModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({ exports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"]], imports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"].forRoot(routes)] })
    ], AppRoutingModule);
    return AppRoutingModule;
}());



/***/ }),

/***/ "./src/app/app.component.css":
/*!***********************************!*\
  !*** ./src/app/app.component.css ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIn0= */"

/***/ }),

/***/ "./src/app/app.component.html":
/*!************************************!*\
  !*** ./src/app/app.component.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<title>MedTimeLine</title>\n<router-outlet></router-outlet>\n"

/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var AppComponent = /** @class */ (function () {
    function AppComponent() {
        this.title = 'app';
    }
    AppComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-root',
            template: __webpack_require__(/*! ./app.component.html */ "./src/app/app.component.html"),
            styles: [__webpack_require__(/*! ./app.component.css */ "./src/app/app.component.css")]
        })
    ], AppComponent);
    return AppComponent;
}());



/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var fhirclient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fhirclient */ "./node_modules/fhirclient/fhir-client.js");
/* harmony import */ var fhirclient__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fhirclient__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_flex_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/flex-layout */ "./node_modules/@angular/flex-layout/esm5/flex-layout.es5.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var _angular_material_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/card */ "./node_modules/@angular/material/esm5/card.es5.js");
/* harmony import */ var _angular_material_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/icon */ "./node_modules/@angular/material/esm5/icon.es5.js");
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/input */ "./node_modules/@angular/material/esm5/input.es5.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/fesm5/animations.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ng2_charts__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ng2-charts */ "./node_modules/ng2-charts/fesm5/ng2-charts.js");
/* harmony import */ var ng2_dragula__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ng2-dragula */ "./node_modules/ng2-dragula/dist/fesm5/ng2-dragula.js");
/* harmony import */ var ngx_daterangepicker_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngx-daterangepicker-material */ "./node_modules/ngx-daterangepicker-material/esm5/ngx-daterangepicker-material.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var _app_routing_module__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./app-routing.module */ "./src/app/app-routing.module.ts");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
/* harmony import */ var _cardcontainer_cardcontainer_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./cardcontainer/cardcontainer.component */ "./src/app/cardcontainer/cardcontainer.component.ts");
/* harmony import */ var _cardtypes_card_card_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./cardtypes/card/card.component */ "./src/app/cardtypes/card/card.component.ts");
/* harmony import */ var _cardtypes_customizable_timeline_customizable_timeline_dialog_customizable_timeline_dialog_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component */ "./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.ts");
/* harmony import */ var _cardtypes_customizable_timeline_customizable_timeline_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./cardtypes/customizable-timeline/customizable-timeline.component */ "./src/app/cardtypes/customizable-timeline/customizable-timeline.component.ts");
/* harmony import */ var _cardtypes_multigraphcard_multigraphcard_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./cardtypes/multigraphcard/multigraphcard.component */ "./src/app/cardtypes/multigraphcard/multigraphcard.component.ts");
/* harmony import */ var _cardtypes_textboxcard_textboxcard_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./cardtypes/textboxcard/textboxcard.component */ "./src/app/cardtypes/textboxcard/textboxcard.component.ts");
/* harmony import */ var _conceptmappings_concept_file_configuration__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./conceptmappings/concept-file-configuration */ "./src/app/conceptmappings/concept-file-configuration.ts");
/* harmony import */ var _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./conceptmappings/resource-code-creator */ "./src/app/conceptmappings/resource-code-creator.ts");
/* harmony import */ var _conceptmappings_resource_code_manager__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./conceptmappings/resource-code-manager */ "./src/app/conceptmappings/resource-code-manager.ts");
/* harmony import */ var _data_selector_menu_data_selector_element_data_selector_element_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./data-selector-menu/data-selector-element/data-selector-element.component */ "./src/app/data-selector-menu/data-selector-element/data-selector-element.component.ts");
/* harmony import */ var _data_selector_menu_data_selector_menu_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./data-selector-menu/data-selector-menu.component */ "./src/app/data-selector-menu/data-selector-menu.component.ts");
/* harmony import */ var _debugger_debugger_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./debugger/debugger.component */ "./src/app/debugger/debugger.component.ts");
/* harmony import */ var _dialogs_confirm_save_confirm_save_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./dialogs/confirm-save/confirm-save.component */ "./src/app/dialogs/confirm-save/confirm-save.component.ts");
/* harmony import */ var _dialogs_delete_dialog_delete_dialog_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./dialogs/delete-dialog/delete-dialog.component */ "./src/app/dialogs/delete-dialog/delete-dialog.component.ts");
/* harmony import */ var _dialogs_help_dialog_help_dialog_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./dialogs/help-dialog/help-dialog.component */ "./src/app/dialogs/help-dialog/help-dialog.component.ts");
/* harmony import */ var _dialogs_ifu_dialog_ifu_dialog_component__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./dialogs/ifu-dialog/ifu-dialog.component */ "./src/app/dialogs/ifu-dialog/ifu-dialog.component.ts");
/* harmony import */ var _fhir_server_fhir_http_service__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./fhir-server/fhir-http.service */ "./src/app/fhir-server/fhir-http.service.ts");
/* harmony import */ var _fhir_server_fhir_launch_fhir_launch_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./fhir-server/fhir-launch/fhir-launch.component */ "./src/app/fhir-server/fhir-launch/fhir-launch.component.ts");
/* harmony import */ var _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./fhir-server/fhir.service */ "./src/app/fhir-server/fhir.service.ts");
/* harmony import */ var _fhir_server_mock_fhir_service__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./fhir-server/mock-fhir.service */ "./src/app/fhir-server/mock-fhir.service.ts");
/* harmony import */ var _fhir_server_smart_on_fhir_client__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./fhir-server/smart-on-fhir-client */ "./src/app/fhir-server/smart-on-fhir-client.ts");
/* harmony import */ var _graphs_graphtypes_customizable_graph_customizable_graph_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./graphs/graphtypes/customizable-graph/customizable-graph.component */ "./src/app/graphs/graphtypes/customizable-graph/customizable-graph.component.ts");
/* harmony import */ var _graphs_graphtypes_diagnostic_graph_diagnostic_graph_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./graphs/graphtypes/diagnostic-graph/diagnostic-graph.component */ "./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.component.ts");
/* harmony import */ var _graphs_graphtypes_diagnostic_graph_diagnostic_graph_dialog_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component */ "./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component.ts");
/* harmony import */ var _graphs_graphtypes_linegraph_linegraph_component__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./graphs/graphtypes/linegraph/linegraph.component */ "./src/app/graphs/graphtypes/linegraph/linegraph.component.ts");
/* harmony import */ var _graphs_graphtypes_microbio_graph_microbio_graph_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./graphs/graphtypes/microbio-graph/microbio-graph.component */ "./src/app/graphs/graphtypes/microbio-graph/microbio-graph.component.ts");
/* harmony import */ var _graphs_graphtypes_scatterplot_scatterplot_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./graphs/graphtypes/scatterplot/scatterplot.component */ "./src/app/graphs/graphtypes/scatterplot/scatterplot.component.ts");
/* harmony import */ var _graphs_graphtypes_stepgraph_stepgraph_component__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./graphs/graphtypes/stepgraph/stepgraph.component */ "./src/app/graphs/graphtypes/stepgraph/stepgraph.component.ts");
/* harmony import */ var _setup_setup_component__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./setup/setup.component */ "./src/app/setup/setup.component.ts");
/* harmony import */ var _time_navigation_timeline_controller_timeline_controller_component__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./time-navigation/timeline-controller/timeline-controller.component */ "./src/app/time-navigation/timeline-controller/timeline-controller.component.ts");
/* harmony import */ var _time_navigation_timeline_toolbar_timeline_toolbar_component__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./time-navigation/timeline-toolbar/timeline-toolbar.component */ "./src/app/time-navigation/timeline-toolbar/timeline-toolbar.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





// tslint:disable-next-line:max-line-length
















// tslint:disable-next-line:max-line-length





























var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["NgModule"])({
            declarations: [
                _app_component__WEBPACK_IMPORTED_MODULE_18__["AppComponent"],
                _fhir_server_fhir_launch_fhir_launch_component__WEBPACK_IMPORTED_MODULE_36__["FhirLaunchComponent"],
                _cardcontainer_cardcontainer_component__WEBPACK_IMPORTED_MODULE_19__["CardcontainerComponent"],
                _cardtypes_textboxcard_textboxcard_component__WEBPACK_IMPORTED_MODULE_24__["TextboxcardComponent"],
                _graphs_graphtypes_linegraph_linegraph_component__WEBPACK_IMPORTED_MODULE_43__["LineGraphComponent"],
                _graphs_graphtypes_scatterplot_scatterplot_component__WEBPACK_IMPORTED_MODULE_45__["ScatterplotComponent"],
                _graphs_graphtypes_stepgraph_stepgraph_component__WEBPACK_IMPORTED_MODULE_46__["StepGraphComponent"],
                _cardtypes_multigraphcard_multigraphcard_component__WEBPACK_IMPORTED_MODULE_23__["MultiGraphCardComponent"],
                _time_navigation_timeline_controller_timeline_controller_component__WEBPACK_IMPORTED_MODULE_48__["TimelineControllerComponent"],
                _cardtypes_customizable_timeline_customizable_timeline_component__WEBPACK_IMPORTED_MODULE_22__["CustomizableTimelineComponent"],
                _graphs_graphtypes_customizable_graph_customizable_graph_component__WEBPACK_IMPORTED_MODULE_40__["CustomizableGraphComponent"],
                _cardtypes_customizable_timeline_customizable_timeline_dialog_customizable_timeline_dialog_component__WEBPACK_IMPORTED_MODULE_21__["CustomizableTimelineDialogComponent"],
                _graphs_graphtypes_microbio_graph_microbio_graph_component__WEBPACK_IMPORTED_MODULE_44__["MicrobioGraphComponent"],
                _graphs_graphtypes_diagnostic_graph_diagnostic_graph_component__WEBPACK_IMPORTED_MODULE_41__["DiagnosticGraphComponent"],
                _time_navigation_timeline_toolbar_timeline_toolbar_component__WEBPACK_IMPORTED_MODULE_49__["TimelineToolbarComponent"],
                _data_selector_menu_data_selector_element_data_selector_element_component__WEBPACK_IMPORTED_MODULE_28__["DataSelectorElementComponent"],
                _data_selector_menu_data_selector_menu_component__WEBPACK_IMPORTED_MODULE_29__["DataSelectorMenuComponent"],
                _dialogs_help_dialog_help_dialog_component__WEBPACK_IMPORTED_MODULE_33__["HelpDialogComponent"],
                _cardtypes_card_card_component__WEBPACK_IMPORTED_MODULE_20__["CardComponent"],
                _dialogs_delete_dialog_delete_dialog_component__WEBPACK_IMPORTED_MODULE_32__["DeleteDialogComponent"],
                _debugger_debugger_component__WEBPACK_IMPORTED_MODULE_30__["DebuggerComponent"],
                _setup_setup_component__WEBPACK_IMPORTED_MODULE_47__["SetupComponent"],
                _dialogs_confirm_save_confirm_save_component__WEBPACK_IMPORTED_MODULE_31__["ConfirmSaveComponent"],
                _dialogs_ifu_dialog_ifu_dialog_component__WEBPACK_IMPORTED_MODULE_34__["IfuDialogComponent"],
                _graphs_graphtypes_diagnostic_graph_diagnostic_graph_dialog_component__WEBPACK_IMPORTED_MODULE_42__["DiagnosticGraphDialogComponent"],
            ],
            imports: [
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_9__["BrowserModule"],
                _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_11__["NgbModule"],
                _angular_material_card__WEBPACK_IMPORTED_MODULE_6__["MatCardModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatGridListModule"],
                _angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClientModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatListModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatDividerModule"],
                _angular_material_icon__WEBPACK_IMPORTED_MODULE_7__["MatIconModule"],
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_10__["NoopAnimationsModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_4__["FormsModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_4__["ReactiveFormsModule"],
                _angular_material_input__WEBPACK_IMPORTED_MODULE_8__["MatInputModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatProgressSpinnerModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatButtonModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatAutocompleteModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatMenuModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatTooltipModule"],
                _angular_flex_layout__WEBPACK_IMPORTED_MODULE_3__["FlexLayoutModule"].withConfig({ useColumnBasisZero: false }),
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatDialogModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatStepperModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatToolbarModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatSnackBarModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatDatepickerModule"],
                ngx_daterangepicker_material__WEBPACK_IMPORTED_MODULE_14__["NgxDaterangepickerMd"].forRoot({}),
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatButtonToggleModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatNativeDateModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatCheckboxModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatRadioModule"],
                ng2_charts__WEBPACK_IMPORTED_MODULE_12__["ChartsModule"],
                ng2_dragula__WEBPACK_IMPORTED_MODULE_13__["DragulaModule"].forRoot(),
                _app_routing_module__WEBPACK_IMPORTED_MODULE_17__["AppRoutingModule"],
                _angular_material__WEBPACK_IMPORTED_MODULE_5__["MatExpansionModule"],
            ],
            providers: [
                _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_26__["ResourceCodeCreator"], _conceptmappings_resource_code_manager__WEBPACK_IMPORTED_MODULE_27__["ResourceCodeManager"],
                // This sets up a provider for the smart on fhir client defined by
                // assets/fhir-client.min.js (defined as symbol `FHIR`) so that it can be
                // injected into the service that uses it to allow for easier testing.
                { provide: _fhir_server_smart_on_fhir_client__WEBPACK_IMPORTED_MODULE_39__["SMART_ON_FHIR_CLIENT"], useValue: FHIR }, {
                    provide: _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_37__["FhirService"],
                    useClass: _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].useMockServer ? _fhir_server_mock_fhir_service__WEBPACK_IMPORTED_MODULE_38__["MockFhirService"] : _fhir_server_fhir_http_service__WEBPACK_IMPORTED_MODULE_35__["FhirHttpService"]
                },
                { provide: src_constants__WEBPACK_IMPORTED_MODULE_15__["UI_CONSTANTS_TOKEN"], useValue: src_constants__WEBPACK_IMPORTED_MODULE_15__["UI_CONSTANTS"] }, {
                    provide: _conceptmappings_concept_file_configuration__WEBPACK_IMPORTED_MODULE_25__["ConceptFileConfiguration"],
                    useValue: new _conceptmappings_concept_file_configuration__WEBPACK_IMPORTED_MODULE_25__["ConceptFileConfiguration"](_environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].conceptsFolder, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].vitalGroupFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].vitalConceptsFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].labConceptsFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].labGroupFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].radiologyConceptsFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].radiologyGroupFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].antibioticConceptsFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].antibioticGroupFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].antiviralConceptsFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].antiviralGroupFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].antifungalConceptsFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].antifungalGroupFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].microbioGroupFile, _environments_environment__WEBPACK_IMPORTED_MODULE_16__["environment"].microbioConceptsFile)
                }
            ],
            bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_18__["AppComponent"]],
            entryComponents: [
                _cardtypes_customizable_timeline_customizable_timeline_dialog_customizable_timeline_dialog_component__WEBPACK_IMPORTED_MODULE_21__["CustomizableTimelineDialogComponent"], _dialogs_help_dialog_help_dialog_component__WEBPACK_IMPORTED_MODULE_33__["HelpDialogComponent"],
                _dialogs_delete_dialog_delete_dialog_component__WEBPACK_IMPORTED_MODULE_32__["DeleteDialogComponent"], _dialogs_confirm_save_confirm_save_component__WEBPACK_IMPORTED_MODULE_31__["ConfirmSaveComponent"], _dialogs_ifu_dialog_ifu_dialog_component__WEBPACK_IMPORTED_MODULE_34__["IfuDialogComponent"],
                _graphs_graphtypes_diagnostic_graph_diagnostic_graph_dialog_component__WEBPACK_IMPORTED_MODULE_42__["DiagnosticGraphDialogComponent"]
            ]
        })
    ], AppModule);
    return AppModule;
}());



/***/ }),

/***/ "./src/app/cardcontainer/cardcontainer.component.css":
/*!***********************************************************!*\
  !*** ./src/app/cardcontainer/cardcontainer.component.css ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".cardContainer {\n  background-color: #202020; /* GREY_900 */\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n  width: 100%;\n  min-height: 100%;\n  height: 100%;\n  flex-direction: column;\n  -ms-flex-direction: column; /* For IE10 */\n  /* Disable selecting/highlighting on the page. */\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n     -moz-user-select: none; /* Firefox */\n      -ms-user-select: none; /* Internet Explorer/Edge */\n          user-select: none; /* Chrome and Opera */\n}\n\n.draggable {\n  display: flex;\n  display: -ms-flexbox;\n  height: 100%;\n  flex-direction: column;\n  -ms-flex-direction: column; /* For IE10 */\n}\n\n.flexSpacer {\n  flex: 1 1 0%;\n  -ms-flex: 1 1 0%; /* For IE10 */\n}\n\n::ng-deep .mat-toolbar, .mat-toolbar h1, .mat-toolbar h2, .mat-toolbar h3, .mat-toolbar h4, .mat-toolbar h5, .mat-toolbar h6, .mat-toolbar-row, .mat-toolbar-single-row {\n  display: -ms-flexbox; /* For IE10 */\n}\n\n.mat-toolbar {\n   /* Deep Purple 800 to Pink 900 */\n  background-image: linear-gradient(to right, #4527A0 , #870D4E);\n  color: white;\n}\n\n::ng-deep .gu-unselectable app-data-selector-menu {\n  /* Hide the data selector menus while a card is being dragged. */\n  opacity: 0 !important;\n}\n\n.makeGutters {\n  padding-right: 50px;\n  padding-left: 50px;\n}\n\n::ng-deep .mat-toolbar-single-row {\n  white-space: unset !important;\n}\n\n::ng-deep .timelineToolbarMain {\n  float: right;\n  margin-right: 15px;\n  display: -ms-flexbox;  /* For IE10 */\n}\n\n::ng-deep app-card {\n  flex-direction: row;\n  -ms-flex-direction: row;\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n}\n\n::ng-deep app-data-selector-menu {\n  flex-direction: row;\n  -ms-flex-direction: row;\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FyZGNvbnRhaW5lci9jYXJkY29udGFpbmVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBeUIsRUFBRSxhQUFhO0VBQ3hDLGFBQWE7RUFDYixvQkFBb0IsRUFBRSxhQUFhO0VBQ25DLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QiwwQkFBMEIsRUFBRSxhQUFhO0VBQ3pDLGdEQUFnRDtFQUNoRCwyQkFBMkIsRUFBRSxlQUFlO0VBQzVDLHlCQUF5QixFQUFFLFdBQVc7S0FDbkMsc0JBQXNCLEVBQUUsWUFBWTtNQUNuQyxxQkFBcUIsRUFBRSwyQkFBMkI7VUFDOUMsaUJBQWlCLEVBQUUscUJBQXFCO0FBQ2xEOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG9CQUFvQjtFQUNwQixZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDBCQUEwQixFQUFFLGFBQWE7QUFDM0M7O0FBRUE7RUFDRSxZQUFZO0VBQ1osZ0JBQWdCLEVBQUUsYUFBYTtBQUNqQzs7QUFFQTtFQUNFLG9CQUFvQixFQUFFLGFBQWE7QUFDckM7O0FBRUE7R0FDRyxnQ0FBZ0M7RUFDakMsOERBQThEO0VBQzlELFlBQVk7QUFDZDs7QUFFQTtFQUNFLGdFQUFnRTtFQUNoRSxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixvQkFBb0IsR0FBRyxhQUFhO0FBQ3RDOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixhQUFhO0VBQ2Isb0JBQW9CLEVBQUUsYUFBYTtBQUNyQzs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsYUFBYTtFQUNiLG9CQUFvQixFQUFFLGFBQWE7QUFDckMiLCJmaWxlIjoic3JjL2FwcC9jYXJkY29udGFpbmVyL2NhcmRjb250YWluZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJkQ29udGFpbmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzIwMjAyMDsgLyogR1JFWV85MDAgKi9cbiAgZGlzcGxheTogZmxleDtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7IC8qIEZvciBJRTEwICovXG4gIHdpZHRoOiAxMDAlO1xuICBtaW4taGVpZ2h0OiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOyAvKiBGb3IgSUUxMCAqL1xuICAvKiBEaXNhYmxlIHNlbGVjdGluZy9oaWdobGlnaHRpbmcgb24gdGhlIHBhZ2UuICovXG4gIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTsgLyogaU9TIFNhZmFyaSAqL1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyAvKiBTYWZhcmkgKi9cbiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgLyogRmlyZWZveCAqL1xuICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOyAvKiBJbnRlcm5ldCBFeHBsb3Jlci9FZGdlICovXG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7IC8qIENocm9tZSBhbmQgT3BlcmEgKi9cbn1cblxuLmRyYWdnYWJsZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBoZWlnaHQ6IDEwMCU7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uOyAvKiBGb3IgSUUxMCAqL1xufVxuXG4uZmxleFNwYWNlciB7XG4gIGZsZXg6IDEgMSAwJTtcbiAgLW1zLWZsZXg6IDEgMSAwJTsgLyogRm9yIElFMTAgKi9cbn1cblxuOjpuZy1kZWVwIC5tYXQtdG9vbGJhciwgLm1hdC10b29sYmFyIGgxLCAubWF0LXRvb2xiYXIgaDIsIC5tYXQtdG9vbGJhciBoMywgLm1hdC10b29sYmFyIGg0LCAubWF0LXRvb2xiYXIgaDUsIC5tYXQtdG9vbGJhciBoNiwgLm1hdC10b29sYmFyLXJvdywgLm1hdC10b29sYmFyLXNpbmdsZS1yb3cge1xuICBkaXNwbGF5OiAtbXMtZmxleGJveDsgLyogRm9yIElFMTAgKi9cbn1cblxuLm1hdC10b29sYmFyIHtcbiAgIC8qIERlZXAgUHVycGxlIDgwMCB0byBQaW5rIDkwMCAqL1xuICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICM0NTI3QTAgLCAjODcwRDRFKTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG46Om5nLWRlZXAgLmd1LXVuc2VsZWN0YWJsZSBhcHAtZGF0YS1zZWxlY3Rvci1tZW51IHtcbiAgLyogSGlkZSB0aGUgZGF0YSBzZWxlY3RvciBtZW51cyB3aGlsZSBhIGNhcmQgaXMgYmVpbmcgZHJhZ2dlZC4gKi9cbiAgb3BhY2l0eTogMCAhaW1wb3J0YW50O1xufVxuXG4ubWFrZUd1dHRlcnMge1xuICBwYWRkaW5nLXJpZ2h0OiA1MHB4O1xuICBwYWRkaW5nLWxlZnQ6IDUwcHg7XG59XG5cbjo6bmctZGVlcCAubWF0LXRvb2xiYXItc2luZ2xlLXJvdyB7XG4gIHdoaXRlLXNwYWNlOiB1bnNldCAhaW1wb3J0YW50O1xufVxuXG46Om5nLWRlZXAgLnRpbWVsaW5lVG9vbGJhck1haW4ge1xuICBmbG9hdDogcmlnaHQ7XG4gIG1hcmdpbi1yaWdodDogMTVweDtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7ICAvKiBGb3IgSUUxMCAqL1xufVxuXG46Om5nLWRlZXAgYXBwLWNhcmQge1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdztcbiAgZGlzcGxheTogZmxleDtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7IC8qIEZvciBJRTEwICovXG59XG5cbjo6bmctZGVlcCBhcHAtZGF0YS1zZWxlY3Rvci1tZW51IHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgLW1zLWZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94OyAvKiBGb3IgSUUxMCAqL1xufVxuIl19 */"

/***/ }),

/***/ "./src/app/cardcontainer/cardcontainer.component.html":
/*!************************************************************!*\
  !*** ./src/app/cardcontainer/cardcontainer.component.html ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-toolbar>\n  <app-timeline-controller\n    (changeDateRange)=\"changeDateRange($event)\"\n    [encounters]=\"this.setupDataService.encounters\"\n    [encountersError]=\"this.setupDataService.encountersError\"\n    [selectedDateRange]=\"this.setupDataService.selectedDateRange\">\n  </app-timeline-controller>\n  <!--Push the buttons to the right and left sides.-->\n  <div fxFlex class=\"flexSpacer\"></div>\n  <app-timeline-toolbar (saveSnapshot)=\"snapshot()\" (addTextbox)=\"addTextbox()\">\n  </app-timeline-toolbar>\n</mat-toolbar>\n<div *ngIf=\"useDebugger\">\n  <app-debugger></app-debugger>\n</div>\n<div fxLayout=\"column\" class=\"cardContainer makeGutters\" fxLayoutAlign=\"start\">\n  <app-data-selector-menu (addCard)=\"addConceptCard($event)\" (addTextbox)=\"addTextbox()\"\n    (addCustomTimeline)=\"addCustomTimeline()\"></app-data-selector-menu>\n  <div fxLayout=\"column\" dragula=\"graphcards\" class=\"draggable\">\n    <div *ngFor=\"let element of displayedConcepts\" [attr.data-index]=\"element['id']\" class=\"displayedConcept\">\n      <app-textboxcard *ngIf=\"element['concept'] ==='textbox'\" [id]=\"element['id']\" [noteString]=\"element['value']\"\n        (removeEvent)=\"removeDisplayedCard($event)\"></app-textboxcard>\n      <app-customizable-timeline *ngIf=\"element['concept']==='customTimeline'\" [id]=\"element['id']\"\n        [dateRange]=\"dateRange\" [deletedData]=\"element['value']\" (updateEventLines)=\"updateEventLines($event)\"\n        (removeEvent)=\"removeDisplayedCard($event)\">\n      </app-customizable-timeline>\n      <app-multigraphcard *ngIf=\"element['concept'] !=='textbox' && element['concept'] !== 'customTimeline'\"\n        [axisGroup]=\"element['concept']\" [dateRange]=\"dateRange\" [eventlines]=\"eventlines\" [id]=\"element['id']\"\n        (removeEvent)=\"removeDisplayedCard($event)\">\n      </app-multigraphcard>\n      <app-data-selector-menu (addCard)=\"addConceptCard($event, element['id'])\" (addTextbox)=\"addTextbox(element['id'])\"\n        (addCustomTimeline)=\"addCustomTimeline(element['id'])\"></app-data-selector-menu>\n    </div>\n  </div>\n  <!-- Leave some cushion at the bottom so that tooltips show up. -->\n  <div style=\"height: 500px\"></div>\n</div>\n"

/***/ }),

/***/ "./src/app/cardcontainer/cardcontainer.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/cardcontainer/cardcontainer.component.ts ***!
  \**********************************************************/
/*! exports provided: CardcontainerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardcontainerComponent", function() { return CardcontainerComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material/dialog */ "./node_modules/@angular/material/esm5/dialog.es5.js");
/* harmony import */ var _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material/snack-bar */ "./node_modules/@angular/material/esm5/snack-bar.es5.js");
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! html2canvas */ "./node_modules/html2canvas/dist/html2canvas.js");
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var ng2_dragula__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-dragula */ "./node_modules/ng2-dragula/dist/fesm5/ng2-dragula.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var _dialogs_confirm_save_confirm_save_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dialogs/confirm-save/confirm-save.component */ "./src/app/dialogs/confirm-save/confirm-save.component.ts");
/* harmony import */ var _dialogs_delete_dialog_delete_dialog_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../dialogs/delete-dialog/delete-dialog.component */ "./src/app/dialogs/delete-dialog/delete-dialog.component.ts");
/* harmony import */ var _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../fhir-server/fhir.service */ "./src/app/fhir-server/fhir.service.ts");
/* harmony import */ var _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../graphs/graphtypes/graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var _setup_setup_data_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../setup/setup-data.service */ "./src/app/setup/setup-data.service.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};















var CardcontainerComponent = /** @class */ (function () {
    function CardcontainerComponent(dragulaService, setupDataService, snackBar, deleteDialog, saveDialog, fhirService, uiConstants) {
        this.setupDataService = setupDataService;
        this.snackBar = snackBar;
        this.deleteDialog = deleteDialog;
        this.saveDialog = saveDialog;
        this.fhirService = fhirService;
        this.uiConstants = uiConstants;
        // How long to display the snack bar for.
        this.DISPLAY_TIME = 6000;
        // Whether or not to display the debugger.
        this.useDebugger = _environments_environment__WEBPACK_IMPORTED_MODULE_9__["environment"].useDebugger;
        /**
         * The format of each object in the array is an object representing a line
         * drawn on the chart, that has a value, text, and class field. The value
         * field represents the x-position of the line to be drawn, while the class
         * represents the class name, and the text represents the text displayed near
         * the line.
         */
        this.eventlines = [];
        // The concepts that are actually being displayed on the page.
        // We keep track of unique ids for each displayed card, to allow removal on
        // clicking the trashcan icon.
        this.displayedConcepts = [];
        // The original concepts to duplicate, if necessary.
        this.originalConcepts = this.setupDataService.displayGroupMapping.then(function (mapping) {
            /* Load in the concepts to display, flattening them all into a
             * single-depth array. */
            return Array.from(mapping.values())
                .reduce(function (acc, val) { return acc.concat(val); }, []);
        });
        // Hold an instance of this enum so that the HTML template can access it.
        this.chartType = _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_13__["ChartType"];
        /**
         * By default make the date range displayed the past seven days.
         */
        this.dateRange = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].utc().minus({ days: 7 }), luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].utc());
        // Holds a subscription to the observable sequence of events emitted by the
        // Dragula Service.
        this.subs = new rxjs__WEBPACK_IMPORTED_MODULE_6__["Subscription"]();
        // A map of custom timeline id to the event lines corresponding to that
        // timeline.
        this.eventsForCustomTimelines = new Map();
        this.setUpCards();
        this.setUpDrag(dragulaService);
    }
    CardcontainerComponent.prototype.setUpCards = function () {
        // Add a textbox at the top of the card list.
        this.addTextbox();
        // Add a custom timeline to the top of the card list.
        this.addCustomTimeline();
        // Add all cards selected at the set-up screen.
        for (var _i = 0, _a = this.setupDataService.selectedConcepts; _i < _a.length; _i++) {
            var concept = _a[_i];
            this.displayedConcepts.push({ 'id': Object(uuid__WEBPACK_IMPORTED_MODULE_8__["v4"])(), 'concept': concept });
        }
    };
    // Ensures that the order of displayed concepts is updated as the user drags
    // cards around.
    CardcontainerComponent.prototype.setUpDrag = function (dragulaService) {
        var _this = this;
        this.subs.add(dragulaService.drop('graphcards').subscribe(function (value) {
            // Rearrange the order of this.displayedConcepts if graph/textbox
            // cards are reordered. We do not use dragulaModel since we cannot use
            // it for separate lists on the configuration panel.
            var originalIndex = _this.displayedConcepts.map(function (x) { return x.id; }).indexOf(value.el.getAttribute('data-index'));
            var siblingIndex = _this.getSiblingIdx(value);
            var elementDisplayed = _this.displayedConcepts[originalIndex];
            // Add the element to its new position.
            _this.displayedConcepts.splice(siblingIndex, 0, elementDisplayed);
            // Adjust the original position if needed.
            if (siblingIndex < originalIndex) {
                originalIndex++;
            }
            _this.displayedConcepts.splice(originalIndex, 1);
            Object(src_constants__WEBPACK_IMPORTED_MODULE_7__["recordGoogleAnalyticsEvent"])('moveCard', 'moveCard', (typeof elementDisplayed === 'string') ?
                elementDisplayed :
                elementDisplayed.label);
        }));
    };
    /**
     * Gets the index of the card below a dragged-and-dropped card's new place.
     */
    CardcontainerComponent.prototype.getSiblingIdx = function (value) {
        var siblingIndex;
        if (value.sibling === null) {
            // Dragged to bottom of list
            siblingIndex = this.displayedConcepts.length;
        }
        else {
            var siblingId = value.sibling.getAttribute('data-index');
            siblingIndex = this.displayedConcepts.map(function (x) { return x.id; }).indexOf(siblingId);
        }
        return siblingIndex;
    };
    /**
     * Adds a new annotation box to the card panel.
     * @param id: The id of the card above the position of the new annotation box.
     */
    CardcontainerComponent.prototype.addTextbox = function (id) {
        var index = id ? (this.displayedConcepts.map(function (x) { return x.id; }).indexOf(id) + 1) : 0;
        this.displayedConcepts.splice(index, 0, { id: Object(uuid__WEBPACK_IMPORTED_MODULE_8__["v4"])(), concept: 'textbox' });
    };
    /**
     * Adds a new custom timeline to the card panel.
     * @param id: The id of the card above the position of the new annotation box.
     */
    CardcontainerComponent.prototype.addCustomTimeline = function (id) {
        var index = id ? (this.displayedConcepts.map(function (x) { return x.id; }).indexOf(id) + 1) : 0;
        this.displayedConcepts.splice(index, 0, { id: Object(uuid__WEBPACK_IMPORTED_MODULE_8__["v4"])(), concept: 'customTimeline' });
    };
    // Listen for an event indicating that the date range has been changed on the
    // UI, and update the date range.
    CardcontainerComponent.prototype.changeDateRange = function ($event) {
        this.dateRange = $event;
    };
    // Saves a snapshot of the graph drawer HTML to the EHR using a FhirService.
    CardcontainerComponent.prototype.snapshot = function () {
        var _this = this;
        html2canvas__WEBPACK_IMPORTED_MODULE_3___default()(document.body).then(function (canvas) {
            _this.saveDialogRef = _this.saveDialog.open(_dialogs_confirm_save_confirm_save_component__WEBPACK_IMPORTED_MODULE_10__["ConfirmSaveComponent"], { data: canvas, height: '80%' });
            _this.saveDialogRef.afterClosed().subscribe(function (result) {
                // Only save the snapshot to the EHR if the user confirmed the save.
                if (result) {
                    var date = luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].fromJSDate(new Date()).toISO();
                    _this.fhirService.saveStaticNote(canvas, date).then(function (res) {
                        if (res) {
                            _this.snackBar.open(_this.uiConstants.SAVED_TO_POWERCHART, _this.uiConstants.DISMISS, {
                                duration: _this.DISPLAY_TIME,
                            });
                        }
                        else {
                            _this.snackBar.open(_this.uiConstants.ERROR_SAVED_TO_POWERCHART, _this.uiConstants.DISMISS, {
                                duration: _this.DISPLAY_TIME,
                            });
                        }
                    });
                    Object(src_constants__WEBPACK_IMPORTED_MODULE_7__["recordGoogleAnalyticsEvent"])('saveStaticSnapshot', 'save', new Date().toDateString());
                }
            });
        });
    };
    // Listen for an event indicating that a "delete" button has been clicked on a
    // card currently displayed, and update the displayed concepts
    // accordingly after asking for confirmation of deletion.
    CardcontainerComponent.prototype.removeDisplayedCard = function ($event) {
        var _this = this;
        var index = this.displayedConcepts.map(function (x) { return x.id; }).indexOf($event.id);
        var concept = this.displayedConcepts[index];
        concept.value = $event.value;
        this.deleteDialogRef = this.deleteDialog.open(_dialogs_delete_dialog_delete_dialog_component__WEBPACK_IMPORTED_MODULE_11__["DeleteDialogComponent"]);
        this.deleteDialogRef.afterClosed().subscribe(function (result) {
            // The user wishes to delete the card.
            if (result) {
                _this.displayedConcepts.splice(index, 1);
                _this.recentlyRemoved = [index, concept];
                _this.openSnackBar();
                if (_this.eventsForCustomTimelines.get($event.id)) {
                    // We only remove the event lines for this CustomTimeline if the user
                    // confirms the deletion of the card.
                    _this.updateEventLines({ id: $event.id });
                }
            }
        });
    };
    // Open a snack bar allowing for the user to potentially reverse the removal
    // of cards from the page. Only one snack bar can be opened at a time.
    CardcontainerComponent.prototype.openSnackBar = function () {
        var _this = this;
        var message = this.uiConstants.CARD_REMOVED;
        var snackBarRef = this.snackBar.open(message, this.uiConstants.UNDO, {
            duration: this.DISPLAY_TIME,
        });
        // Undo the most recent deletion according to what is stored in
        // recentlyRemoved.
        snackBarRef.onAction().subscribe(function () {
            var index = _this.recentlyRemoved[0];
            _this.displayedConcepts.splice(index, 0, _this.recentlyRemoved[1]);
            if (_this.displayedConcepts[index].concept === 'customTimeline') {
                _this.updateEventLines({
                    id: _this.displayedConcepts[0].id,
                    data: _this.displayedConcepts[0].value
                });
            }
            Object(src_constants__WEBPACK_IMPORTED_MODULE_7__["recordGoogleAnalyticsEvent"])('undoDelete', 'deleteCard', Array.from(_this.recentlyRemoved.values()).toString());
        });
    };
    /**
     * Listens for an event indicating that the user has selected to add the
     * concept card from the top toolbar. The card is added at the top of the
     * page, or, if the id of the closest card is specified, below the closest
     * card.
     * @param label The label of the new concept to add.
     * @param id The id of the card below which to add the new concept.
     */
    CardcontainerComponent.prototype.addConceptCard = function (label, id) {
        var _this = this;
        this.originalConcepts.then(function (concepts) {
            var graphCardValue = concepts.find(function (obj) { return (obj.label === label); });
            // Insert the card at the top of the page
            // Insert after the closest card rather than before the card.
            var index = id ? (_this.displayedConcepts.map(function (x) { return x.id; }).indexOf(id) + 1) : 0;
            _this.displayedConcepts.splice(index, 0, { id: Object(uuid__WEBPACK_IMPORTED_MODULE_8__["v4"])(), concept: graphCardValue });
        });
    };
    /**
     * Listens for an event indicating that the user has edited the points on a
     * custom timeline, and updates the x-axis eventlines displayed on all other
     * charts.
     * @param $event The updated CustomizableData from which we calculate event
     *     lines for each chart to display, along with the id of the updated.
     *
     */
    CardcontainerComponent.prototype.updateEventLines = function ($event) {
        var times = [];
        if ($event.data) {
            times = Array.from($event.data.annotations.keys()).map(function (x) { return Number(x); });
        }
        var eventlines = times.map(function (x) {
            return {
                value: x,
                text: $event.data.annotations.get(x).title,
                color: $event.data.annotations.get(x).color.hex()
            };
        });
        this.eventsForCustomTimelines.set($event.id, eventlines);
        // Consolidate all event lines from all custom timelines.
        var allEvents = [];
        for (var _i = 0, _a = Array.from(this.eventsForCustomTimelines.values()); _i < _a.length; _i++) {
            var events = _a[_i];
            allEvents = allEvents.concat(events);
        }
        this.eventlines = allEvents;
    };
    CardcontainerComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-cardcontainer',
            template: __webpack_require__(/*! ./cardcontainer.component.html */ "./src/app/cardcontainer/cardcontainer.component.html"),
            entryComponents: [_dialogs_delete_dialog_delete_dialog_component__WEBPACK_IMPORTED_MODULE_11__["DeleteDialogComponent"]],
            styles: [__webpack_require__(/*! ./cardcontainer.component.css */ "./src/app/cardcontainer/cardcontainer.component.css")]
        }),
        __param(6, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_7__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [ng2_dragula__WEBPACK_IMPORTED_MODULE_5__["DragulaService"],
            _setup_setup_data_service__WEBPACK_IMPORTED_MODULE_14__["SetupDataService"],
            _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_2__["MatSnackBar"],
            _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_12__["FhirService"], Object])
    ], CardcontainerComponent);
    return CardcontainerComponent;
}());



/***/ }),

/***/ "./src/app/cardtypes/card/card.component.css":
/*!***************************************************!*\
  !*** ./src/app/cardtypes/card/card.component.css ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".mat-card {\n  cursor: -webkit-grab;\n  cursor: grab;\n  margin-top:0px;\n  margin-bottom:0px;\n  margin-left: 35px; /* Leave space for the \"add card\" button. */\n  padding-top: 0px;\n  padding-bottom: 0px;\n  padding-right: 20px;\n  padding-left: 0px;\n  transition: box-shadow .1s;\n  background-color: rgb(248, 248, 248);\n  flex-direction: row;\n  -ms-flex-direction: row; /* For IE10 */\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n  flex: 1 1 0%;\n  -ms-flex: 1 1 0%; /* For IE10 */\n  width: 100%;\n  max-width: 100%;\n}\n\n::ng-deep .inEditMode .mat-card {\n  background-color: rgb(226, 226, 226) !important;\n}\n\n.mat-card:hover {\n  background-color: rgb(240, 240, 240);\n  box-shadow: 0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);\n}\n\n.colorbar {\n  margin-right: 6px;\n  min-width: 24px;\n  border-top-left-radius: 4px;\n  border-bottom-left-radius: 4px;\n  flex-direction: column;\n  -ms-flex-direction: column; /* For IE10 */\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n  flex: 0 0 0%;\n  -ms-flex: 0 0 0%; /* For IE10 */\n  align-content: center;\n  -ms-flex-line-pack: center; /* Align content: center conversion for IE10 */\n  justify-content: center;\n  -ms-flex-pack: center;  /* Justify content: center conversion for IE10 */\n  align-self: stretch;\n  -ms-flex-item-align: stretch;  /* Align self: stretch conversion for IE10 */\n}\n\n.mat-icon {\n  color: rgb(34, 44, 66);\n  cursor: pointer;\n  opacity: .3;\n  transition: opacity .3s;\n}\n\n.removeCardButton {\n  opacity: 0;\n}\n\n.mat-card:hover .mat-icon {\n  opacity: .8;\n}\n\n.mat-card:hover .dragCardIcon.mat-icon {\n  opacity: .4;\n}\n\n.dragCardIcon {\n  opacity: 0;\n  margin-bottom: 15px;\n}\n\n.labelColumn {\n  padding: 3px;\n  flex-direction: column;\n  -ms-flex-direction: column; /* For IE10 */\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n  flex: 0 0 auto;\n  -ms-flex: 0 0 auto; /* For IE10 */\n}\n\n.label {\n  width: 100%;\n  word-wrap: break-word;\n  flex: 1 1 auto;\n  -ms-flex: 1 1 auto; /* For IE10 */\n  font-family: 'Montserrat', sans-serif;\n}\n\n::ng-deep .mat-input-element:disabled{\n  color: rgb(0,0,0, .7) !important;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FyZHR5cGVzL2NhcmQvY2FyZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usb0JBQVk7RUFBWixZQUFZO0VBQ1osY0FBYztFQUNkLGlCQUFpQjtFQUNqQixpQkFBaUIsRUFBRSwyQ0FBMkM7RUFDOUQsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixtQkFBbUI7RUFDbkIsaUJBQWlCO0VBQ2pCLDBCQUEwQjtFQUMxQixvQ0FBb0M7RUFDcEMsbUJBQW1CO0VBQ25CLHVCQUF1QixFQUFFLGFBQWE7RUFDdEMsYUFBYTtFQUNiLG9CQUFvQixFQUFFLGFBQWE7RUFDbkMsWUFBWTtFQUNaLGdCQUFnQixFQUFFLGFBQWE7RUFDL0IsV0FBVztFQUNYLGVBQWU7QUFDakI7O0FBRUE7RUFDRSwrQ0FBK0M7QUFDakQ7O0FBRUE7RUFDRSxvQ0FBb0M7RUFDcEMsOERBQThEO0FBQ2hFOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZiwyQkFBMkI7RUFDM0IsOEJBQThCO0VBQzlCLHNCQUFzQjtFQUN0QiwwQkFBMEIsRUFBRSxhQUFhO0VBQ3pDLGFBQWE7RUFDYixvQkFBb0IsRUFBRSxhQUFhO0VBQ25DLFlBQVk7RUFDWixnQkFBZ0IsRUFBRSxhQUFhO0VBQy9CLHFCQUFxQjtFQUNyQiwwQkFBMEIsRUFBRSw4Q0FBOEM7RUFDMUUsdUJBQXVCO0VBQ3ZCLHFCQUFxQixHQUFHLGdEQUFnRDtFQUN4RSxtQkFBbUI7RUFDbkIsNEJBQTRCLEdBQUcsNENBQTRDO0FBQzdFOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixXQUFXO0VBQ1gsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0UsVUFBVTtFQUNWLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsMEJBQTBCLEVBQUUsYUFBYTtFQUN6QyxhQUFhO0VBQ2Isb0JBQW9CLEVBQUUsYUFBYTtFQUNuQyxjQUFjO0VBQ2Qsa0JBQWtCLEVBQUUsYUFBYTtBQUNuQzs7QUFFQTtFQUNFLFdBQVc7RUFDWCxxQkFBcUI7RUFDckIsY0FBYztFQUNkLGtCQUFrQixFQUFFLGFBQWE7RUFDakMscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0UsZ0NBQWdDO0FBQ2xDIiwiZmlsZSI6InNyYy9hcHAvY2FyZHR5cGVzL2NhcmQvY2FyZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1hdC1jYXJkIHtcbiAgY3Vyc29yOiBncmFiO1xuICBtYXJnaW4tdG9wOjBweDtcbiAgbWFyZ2luLWJvdHRvbTowcHg7XG4gIG1hcmdpbi1sZWZ0OiAzNXB4OyAvKiBMZWF2ZSBzcGFjZSBmb3IgdGhlIFwiYWRkIGNhcmRcIiBidXR0b24uICovXG4gIHBhZGRpbmctdG9wOiAwcHg7XG4gIHBhZGRpbmctYm90dG9tOiAwcHg7XG4gIHBhZGRpbmctcmlnaHQ6IDIwcHg7XG4gIHBhZGRpbmctbGVmdDogMHB4O1xuICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IC4xcztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0OCwgMjQ4LCAyNDgpO1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAtbXMtZmxleC1kaXJlY3Rpb246IHJvdzsgLyogRm9yIElFMTAgKi9cbiAgZGlzcGxheTogZmxleDtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7IC8qIEZvciBJRTEwICovXG4gIGZsZXg6IDEgMSAwJTtcbiAgLW1zLWZsZXg6IDEgMSAwJTsgLyogRm9yIElFMTAgKi9cbiAgd2lkdGg6IDEwMCU7XG4gIG1heC13aWR0aDogMTAwJTtcbn1cblxuOjpuZy1kZWVwIC5pbkVkaXRNb2RlIC5tYXQtY2FyZCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMjYsIDIyNiwgMjI2KSAhaW1wb3J0YW50O1xufVxuXG4ubWF0LWNhcmQ6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQwLCAyNDAsIDI0MCk7XG4gIGJveC1zaGFkb3c6IDAgMCA4cHggcmdiYSgwLDAsMCwuMTgpLDAgOHB4IDE2cHggcmdiYSgwLDAsMCwuMzYpO1xufVxuXG4uY29sb3JiYXIge1xuICBtYXJnaW4tcmlnaHQ6IDZweDtcbiAgbWluLXdpZHRoOiAyNHB4O1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IC8qIEZvciBJRTEwICovXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94OyAvKiBGb3IgSUUxMCAqL1xuICBmbGV4OiAwIDAgMCU7XG4gIC1tcy1mbGV4OiAwIDAgMCU7IC8qIEZvciBJRTEwICovXG4gIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcbiAgLW1zLWZsZXgtbGluZS1wYWNrOiBjZW50ZXI7IC8qIEFsaWduIGNvbnRlbnQ6IGNlbnRlciBjb252ZXJzaW9uIGZvciBJRTEwICovXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7ICAvKiBKdXN0aWZ5IGNvbnRlbnQ6IGNlbnRlciBjb252ZXJzaW9uIGZvciBJRTEwICovXG4gIGFsaWduLXNlbGY6IHN0cmV0Y2g7XG4gIC1tcy1mbGV4LWl0ZW0tYWxpZ246IHN0cmV0Y2g7ICAvKiBBbGlnbiBzZWxmOiBzdHJldGNoIGNvbnZlcnNpb24gZm9yIElFMTAgKi9cbn1cblxuLm1hdC1pY29uIHtcbiAgY29sb3I6IHJnYigzNCwgNDQsIDY2KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBvcGFjaXR5OiAuMztcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3M7XG59XG5cbi5yZW1vdmVDYXJkQnV0dG9uIHtcbiAgb3BhY2l0eTogMDtcbn1cblxuLm1hdC1jYXJkOmhvdmVyIC5tYXQtaWNvbiB7XG4gIG9wYWNpdHk6IC44O1xufVxuXG4ubWF0LWNhcmQ6aG92ZXIgLmRyYWdDYXJkSWNvbi5tYXQtaWNvbiB7XG4gIG9wYWNpdHk6IC40O1xufVxuXG4uZHJhZ0NhcmRJY29uIHtcbiAgb3BhY2l0eTogMDtcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcbn1cblxuLmxhYmVsQ29sdW1uIHtcbiAgcGFkZGluZzogM3B4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAtbXMtZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgLyogRm9yIElFMTAgKi9cbiAgZGlzcGxheTogZmxleDtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7IC8qIEZvciBJRTEwICovXG4gIGZsZXg6IDAgMCBhdXRvO1xuICAtbXMtZmxleDogMCAwIGF1dG87IC8qIEZvciBJRTEwICovXG59XG5cbi5sYWJlbCB7XG4gIHdpZHRoOiAxMDAlO1xuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gIGZsZXg6IDEgMSBhdXRvO1xuICAtbXMtZmxleDogMSAxIGF1dG87IC8qIEZvciBJRTEwICovXG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCcsIHNhbnMtc2VyaWY7XG59XG5cbjo6bmctZGVlcCAubWF0LWlucHV0LWVsZW1lbnQ6ZGlzYWJsZWR7XG4gIGNvbG9yOiByZ2IoMCwwLDAsIC43KSAhaW1wb3J0YW50O1xufVxuIl19 */"

/***/ }),

/***/ "./src/app/cardtypes/card/card.component.html":
/*!****************************************************!*\
  !*** ./src/app/cardtypes/card/card.component.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!-- This component is a card that holds a colored sidebar with icons indicating\nfunctionality, then space for a label & legend, then space for other contents. -->\n<mat-card fxFlex [attr.id]=\"id\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\" (resized)=\"resize($event)\">\n  <div fxFlex fxLayout=\"column\" fxFlexAlign=\"stretch\" fxShrink='0' fxGrow='0' fxLayoutAlign=\"space-between center\"\n    [style.background-color]=\"color\" class=\"colorbar\">\n    <mat-icon *ngIf=\"isRemovable\" class=\"removeCardButton\" (click)=\"remove($event)\"\n      matTooltip=\"{{uiConstants.REMOVE_THIS_CARD}}\">clear\n    </mat-icon>\n    <mat-icon class=\"removeCardButton\" matTooltip=\"{{uiConstants.DRAG_THIS_CARD}}\">\n      drag_handle\n    </mat-icon>\n    <!--Ensure that the dragger icon is always at the center of the color bar.-->\n    <div style=\"margin-bottom: 12px\"></div>\n  </div>\n  <div *ngIf=\"label\" fxFlex=\"0 0 15\" fxLayout=\"column\" fxFlexAlign=\"stretch\" class=\"labelColumn\">\n    <div fxFlex class=\"mat-title label\">{{label}}</div>\n    <!--Give the div that you want to appear here the class \"legends-block\".-->\n    <ng-content select=\".legends-block\"></ng-content>\n  </div>\n  <!--Give the div that you want to appear here the class \"contents-block\".-->\n  <ng-content select=\".contents-block\"></ng-content>\n  <div *ngIf=\"!isEditable\" style=\"margin-right: 25px\"></div>\n  <ng-container *ngIf=\"isEditable\">\n    <mat-icon *ngIf=\"!inEditMode\" matTooltip=\"{{uiConstants.EDIT_THIS_CARD}}\" (click)=\"edit($event)\"\n      class=\"editCardIcon\">edit\n    </mat-icon>\n    <mat-icon *ngIf=\"inEditMode\" matTooltip=\"{{uiConstants.SAVE_YOUR_WORK}}\" (click)=\"save($event)\">save</mat-icon>\n  </ng-container>\n</mat-card>\n"

/***/ }),

/***/ "./src/app/cardtypes/card/card.component.ts":
/*!**************************************************!*\
  !*** ./src/app/cardtypes/card/card.component.ts ***!
  \**************************************************/
/*! exports provided: CardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardComponent", function() { return CardComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/theme/verily_colors */ "./src/app/theme/verily_colors.ts");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




/**
 * This is the base template for all the cards in this app. It will show a
 * colored bar on the left hand side with icons for actions, and then
 * optionally a label and legend, then the contents of the card.
 */
var CardComponent = /** @class */ (function () {
    function CardComponent(uiConstants) {
        this.uiConstants = uiConstants;
        this.color = src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_2__["BLUE_GREY_500"];
        this.isEditable = false;
        this.isRemovable = true;
        this.renderEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.removeEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.editEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.saveEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.inEditMode = false;
    }
    // The events below need to get propogated up to the card container.
    // Called when the user clicks the trashcan button on the card.
    CardComponent.prototype.remove = function () {
        this.removeEvent.emit(this.id);
    };
    // Called when the card resizes.
    CardComponent.prototype.resize = function ($event) {
        this.renderEvent.emit($event);
    };
    // Called when the user clicks on the edit button.
    CardComponent.prototype.edit = function ($event) {
        this.inEditMode = true;
        this.editEvent.emit($event);
    };
    // Called when the user hits the save button to exit out of edit mode.
    CardComponent.prototype.save = function ($event) {
        this.inEditMode = false;
        this.saveEvent.emit($event);
    };
    var _a;
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", typeof (_a = typeof color__WEBPACK_IMPORTED_MODULE_1__ !== "undefined" && color__WEBPACK_IMPORTED_MODULE_1__) === "function" ? _a : Object)
    ], CardComponent.prototype, "color", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CardComponent.prototype, "id", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CardComponent.prototype, "label", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], CardComponent.prototype, "isEditable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], CardComponent.prototype, "isRemovable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CardComponent.prototype, "renderEvent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CardComponent.prototype, "removeEvent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CardComponent.prototype, "editEvent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CardComponent.prototype, "saveEvent", void 0);
    CardComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-card',
            template: __webpack_require__(/*! ./card.component.html */ "./src/app/cardtypes/card/card.component.html"),
            styles: [__webpack_require__(/*! ./card.component.css */ "./src/app/cardtypes/card/card.component.css")]
        }),
        __param(0, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_3__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [Object])
    ], CardComponent);
    return CardComponent;
}());



/***/ }),

/***/ "./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.css":
/*!*************************************************************************************************************************!*\
  !*** ./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.css ***!
  \*************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "ngb-timepicker {\n  font-size: 1rem;\n}\n\n::ng-deep fieldset {\n  min-width: 0;\n  padding: 0;\n  margin: 0;\n  border: 0;\n}\n\n::ng-deep .ngb-tp {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n::ng-deep .ngb-tp-hour, .ngb-tp-meridian, .ngb-tp-minute, .ngb-tp-second {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: distribute;\n  justify-content: space-around;\n}\n\n::ng-deep .ngb-tp-input-container {\n  width: 4em;\n}\n\n::ng-deep .ngb-tp-spacer {\n  width: 50px !important;\n  text-align: center;\n}\n\n::ng-deep .btn-link {\n  font-weight: 400;\n  color: #5E35B1;\n  background-color: transparent;\n  border-width: 1px;\n  cursor: pointer;\n  border-radius: 4px;\n}\n\n::ng-deep .form-control {\n  display: block;\n  width: 100%;\n  padding: .375rem .75rem;\n  font-size: 1rem;\n  line-height: 1.5;\n  color: #495057;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ced4da;\n  border-radius: .25rem;\n}\n\n::ng-deep .ngb-tp-input {\n  text-align: center;\n  width: inherit;\n}\n\n::ng-deep .sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0,0,0,0);\n  white-space: nowrap;\n  -webkit-clip-path: inset(50%);\n  clip-path: inset(50%);\n  border: none;\n}\n\n::ng-deep .mat-error {\n  font-size: 12px;\n}\n\n.mockPlaceholder {\n  font-size: 12px;\n  color: grey;\n  margin-top: 18px;\n}\n\n::ng-deep .dateInput {\n  width: 100px !important;\n}\n\n::ng-deep ngb-datepicker {\n  z-index: 4;\n  background-color:white;\n}\n\n::ng-deep .date {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n::ng-deep .time {\n  display: inline-block;\n  margin-left:30px;\n  vertical-align: middle;\n}\n\n::ng-deep .date .mockPlaceholder {\n  margin-bottom: 20px;\n}\n\n::ng-deep .date .dateInput {\n  margin-bottom: 20px;\n}\n\n::ng-deep .mat-dialog-container {\n  max-height: 400px !important;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FyZHR5cGVzL2N1c3RvbWl6YWJsZS10aW1lbGluZS9jdXN0b21pemFibGUtdGltZWxpbmUtZGlhbG9nL2N1c3RvbWl6YWJsZS10aW1lbGluZS1kaWFsb2cuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osVUFBVTtFQUNWLFNBQVM7RUFDVCxTQUFTO0FBQ1g7O0FBRUE7RUFDRSxvQkFBb0I7RUFDcEIsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixtQkFBbUI7QUFDckI7O0FBQ0E7RUFDRSxvQkFBb0I7RUFDcEIsYUFBYTtFQUNiLDBCQUEwQjtFQUMxQixzQkFBc0I7RUFDdEIsc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2QsNkJBQTZCO0VBQzdCLGlCQUFpQjtFQUNqQixlQUFlO0VBQ2Ysa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsY0FBYztFQUNkLFdBQVc7RUFDWCx1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2Qsc0JBQXNCO0VBQ3RCLDRCQUE0QjtFQUM1Qix5QkFBeUI7RUFDekIscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsVUFBVTtFQUNWLFdBQVc7RUFDWCxVQUFVO0VBQ1YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixtQkFBbUI7RUFDbkIsNkJBQTZCO0VBQzdCLHFCQUFxQjtFQUNyQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLFdBQVc7RUFDWCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxVQUFVO0VBQ1Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixnQkFBZ0I7RUFDaEIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsNEJBQTRCO0FBQzlCIiwiZmlsZSI6InNyYy9hcHAvY2FyZHR5cGVzL2N1c3RvbWl6YWJsZS10aW1lbGluZS9jdXN0b21pemFibGUtdGltZWxpbmUtZGlhbG9nL2N1c3RvbWl6YWJsZS10aW1lbGluZS1kaWFsb2cuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIm5nYi10aW1lcGlja2VyIHtcbiAgZm9udC1zaXplOiAxcmVtO1xufVxuXG46Om5nLWRlZXAgZmllbGRzZXQge1xuICBtaW4td2lkdGg6IDA7XG4gIHBhZGRpbmc6IDA7XG4gIG1hcmdpbjogMDtcbiAgYm9yZGVyOiAwO1xufVxuXG46Om5nLWRlZXAgLm5nYi10cCB7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuOjpuZy1kZWVwIC5uZ2ItdHAtaG91ciwgLm5nYi10cC1tZXJpZGlhbiwgLm5nYi10cC1taW51dGUsIC5uZ2ItdHAtc2Vjb25kIHtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAtbXMtZmxleC1wYWNrOiBkaXN0cmlidXRlO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbn1cblxuOjpuZy1kZWVwIC5uZ2ItdHAtaW5wdXQtY29udGFpbmVyIHtcbiAgd2lkdGg6IDRlbTtcbn1cblxuOjpuZy1kZWVwIC5uZ2ItdHAtc3BhY2VyIHtcbiAgd2lkdGg6IDUwcHggIWltcG9ydGFudDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG46Om5nLWRlZXAgLmJ0bi1saW5rIHtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgY29sb3I6ICM1RTM1QjE7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICBib3JkZXItd2lkdGg6IDFweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbjo6bmctZGVlcCAuZm9ybS1jb250cm9sIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAuMzc1cmVtIC43NXJlbTtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBsaW5lLWhlaWdodDogMS41O1xuICBjb2xvcjogIzQ5NTA1NztcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDtcbiAgYm9yZGVyOiAxcHggc29saWQgI2NlZDRkYTtcbiAgYm9yZGVyLXJhZGl1czogLjI1cmVtO1xufVxuXG46Om5nLWRlZXAgLm5nYi10cC1pbnB1dCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgd2lkdGg6IGluaGVyaXQ7XG59XG5cbjo6bmctZGVlcCAuc3Itb25seSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDFweDtcbiAgaGVpZ2h0OiAxcHg7XG4gIHBhZGRpbmc6IDA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGNsaXA6IHJlY3QoMCwwLDAsMCk7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIC13ZWJraXQtY2xpcC1wYXRoOiBpbnNldCg1MCUpO1xuICBjbGlwLXBhdGg6IGluc2V0KDUwJSk7XG4gIGJvcmRlcjogbm9uZTtcbn1cblxuOjpuZy1kZWVwIC5tYXQtZXJyb3Ige1xuICBmb250LXNpemU6IDEycHg7XG59XG5cbi5tb2NrUGxhY2Vob2xkZXIge1xuICBmb250LXNpemU6IDEycHg7XG4gIGNvbG9yOiBncmV5O1xuICBtYXJnaW4tdG9wOiAxOHB4O1xufVxuXG46Om5nLWRlZXAgLmRhdGVJbnB1dCB7XG4gIHdpZHRoOiAxMDBweCAhaW1wb3J0YW50O1xufVxuXG46Om5nLWRlZXAgbmdiLWRhdGVwaWNrZXIge1xuICB6LWluZGV4OiA0O1xuICBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO1xufVxuXG46Om5nLWRlZXAgLmRhdGUge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG5cbjo6bmctZGVlcCAudGltZSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgbWFyZ2luLWxlZnQ6MzBweDtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cblxuOjpuZy1kZWVwIC5kYXRlIC5tb2NrUGxhY2Vob2xkZXIge1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG46Om5nLWRlZXAgLmRhdGUgLmRhdGVJbnB1dCB7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbjo6bmctZGVlcCAubWF0LWRpYWxvZy1jb250YWluZXIge1xuICBtYXgtaGVpZ2h0OiA0MDBweCAhaW1wb3J0YW50O1xufVxuIl19 */"

/***/ }),

/***/ "./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.html":
/*!**************************************************************************************************************************!*\
  !*** ./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.html ***!
  \**************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxLayout=\"column\" fxLayoutAlign=\"space-around start\">\n  <div>\n    <div class=\"date\">\n      <div class=\"mockPlaceholder\">Date *</div>\n      <input class=\"dateInput form-control\" placeholder=\"yyyy-mm-dd\" name=\"datePicker\" [(ngModel)]=\"date\" ngbDatepicker\n        #datePicker=\"ngbDatepicker\" (click)=\"datePicker.toggle()\">\n      <div *ngIf=\"!date || isInvalidDate()\" class=\"mat-error\">Invalid date</div>\n    </div>\n    <div class=\"time\">\n      <div class=\"mockPlaceholder\">Time *</div>\n      <ngb-timepicker [(ngModel)]=\"time\" [formControl]=\"timeFormControl\" required [spinners]=\"true\">\n      </ngb-timepicker>\n      <div *ngIf=\"!timeFormControl.value\" class=\"mat-error\">Invalid time</div>\n    </div>\n    <div *ngIf=\"dateNotInRange()\" class=\"mat-error\">\n      Caution: Date outside of current range\n    </div>\n  </div>\n  <div fxLayout=\"column\" fxFlex>\n    <mat-form-field class=\"inputTitle\">\n      <input matInput [(ngModel)]=\"userTitle\" placeholder=\"Add title\" required id=\"dialogTitle\">\n      <mat-error>Please enter a title.</mat-error>\n    </mat-form-field>\n    <mat-form-field class=\"inputDescription\">\n      <textarea matInput [(ngModel)]=\"userDescription\" placeholder=\"Add description\" id=\"dialogDescription\"></textarea>\n    </mat-form-field>\n    <div class=\"colorPicker\" fxLayout=\"row\" fxLayoutGap=\"5px\">\n      <mat-label class=\"mat-body\">Flag color</mat-label>\n      <mat-button-toggle-group style=\"border: 0px\" #group=\"matButtonToggleGroup\" [(ngModel)]=\"selectedColor\"\n        value=\"BOSTON_YELLOW\">\n        <mat-button-toggle *ngFor=\"let color of listOfColors\" [value]=\"color\">\n          <mat-card style.backgroundColor=\"{{color}}\"></mat-card>\n        </mat-button-toggle>\n      </mat-button-toggle-group>\n    </div>\n    <div mat-dialog-actions align=\"end\">\n      <button mat-button (click)=\"onCancel()\" id=\"cancelButton\" class=\"cancelButton\">Cancel</button>\n      <button [disabled]=\"findIncompleteFields()\" mat-raised-button (click)=\"onSave()\" color=\"primary\"\n        id=\"saveButton\">Save</button>\n    </div>\n  </div>\n"

/***/ }),

/***/ "./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.ts":
/*!************************************************************************************************************************!*\
  !*** ./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.ts ***!
  \************************************************************************************************************************/
/*! exports provided: CustomizableTimelineDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomizableTimelineDialogComponent", function() { return CustomizableTimelineDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material/dialog */ "./node_modules/@angular/material/esm5/dialog.es5.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var src_app_graphs_graphtypes_customizable_graph_customizable_graph_annotation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/app/graphs/graphtypes/customizable-graph/customizable-graph-annotation */ "./src/app/graphs/graphtypes/customizable-graph/customizable-graph-annotation.ts");
/* harmony import */ var src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/app/theme/verily_colors */ "./src/app/theme/verily_colors.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






// tslint:disable-next-line:max-line-length

// tslint:disable-next-line:max-line-length

/**
 * A Dialog with a textarea input, used to set the description of points on the
 * CustomizableTimeline.
 */
var CustomizableTimelineDialogComponent = /** @class */ (function () {
    function CustomizableTimelineDialogComponent(dialogRef, data) {
        this.dialogRef = dialogRef;
        this.data = data;
        // The list of suggested times to display with the autocomplete.
        this.listOfTimes = [];
        // The list of colors the user will be able to choose from.
        this.listOfColors = [
            src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_7__["DEEP_CORAL"],
            src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_7__["DEEP_ORANGE"],
            src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_7__["DEEP_TURQUOISE"],
            src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_7__["DEEP_CYAN"],
            src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_7__["DEEP_PURPLE_600"],
        ];
        this.date = new Date(data.date);
        var minutes = this.date.getMinutes();
        var hours = this.date.getHours();
        this.time = { hour: hours, minute: minutes };
        this.timeFormControl =
            new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"](this.time, function (control) {
                var value = control.value;
                if (!value) {
                    return null;
                }
            });
        // Set the default selected color as yellow if unset, or find the BCH Color
        // matching the selected color passed in.
        this.selectedColor = data.color ?
            this.listOfColors.find(function (c) { return c.hex() === data.color.hex(); }) :
            src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_7__["DEEP_CORAL"];
        // Set the title if it is passed in.
        if (data.title) {
            this.userTitle = data.title;
        }
        // Set the description if it is passed in.
        if (data.description) {
            this.userDescription = data.description;
        }
        if (data.dateRange) {
            this.dateRange = luxon__WEBPACK_IMPORTED_MODULE_5__["Interval"].fromDateTimes(this.data.dateRange.start.toLocal().startOf('day'), this.data.dateRange.end.toLocal().endOf('day'));
        }
    }
    // Closes the dialog popup without saving the user input.
    CustomizableTimelineDialogComponent.prototype.onCancel = function () {
        this.dialogRef.close();
    };
    // Closes the dialog popup and saves user input.
    CustomizableTimelineDialogComponent.prototype.onSave = function () {
        this.dialogRef.close(new src_app_graphs_graphtypes_customizable_graph_customizable_graph_annotation__WEBPACK_IMPORTED_MODULE_6__["CustomizableGraphAnnotation"](luxon__WEBPACK_IMPORTED_MODULE_5__["DateTime"].fromJSDate(this.getSelectedDate()), this.userTitle.trim(), this.userDescription, color__WEBPACK_IMPORTED_MODULE_4__["rgb"](this.selectedColor)));
    };
    // Constructs a new Date based on user input.
    CustomizableTimelineDialogComponent.prototype.getSelectedDate = function () {
        var dateTime = new Date(this.date);
        if (!this.time || !this.timeFormControl.value) {
            return undefined;
        }
        // For date parsing to work in IE, we must remove all extraneous non-ASCII
        // characters added, and manually change the time.
        dateTime.setHours(this.time.hour, this.time.minute);
        return dateTime;
    };
    // Finds incomplete fields that are required and disables saving.
    CustomizableTimelineDialogComponent.prototype.findIncompleteFields = function () {
        return !this.userTitle ||
            (this.userTitle && this.userTitle.trim().length === 0) ||
            this.date === null || this.isInvalidDate() ||
            this.timeFormControl.hasError('required') ||
            this.timeFormControl.invalid;
    };
    // Returns whether the date input has an invalid date.
    CustomizableTimelineDialogComponent.prototype.isInvalidDate = function () {
        return isNaN(luxon__WEBPACK_IMPORTED_MODULE_5__["DateTime"].fromJSDate(this.date).toMillis());
    };
    // Returns whether the date selected by the user falls outside the current
    // date range.
    CustomizableTimelineDialogComponent.prototype.dateNotInRange = function () {
        var dateTime = luxon__WEBPACK_IMPORTED_MODULE_5__["DateTime"].fromJSDate(this.getSelectedDate());
        if (!this.dateRange) {
            return false;
        }
        return !(this.dateRange.contains(dateTime));
    };
    CustomizableTimelineDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-customizable-timeline-dialog',
            template: __webpack_require__(/*! ./customizable-timeline-dialog.component.html */ "./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.html"),
            providers: [{ provide: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__["NgbDateAdapter"], useClass: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__["NgbDateNativeAdapter"] }],
            styles: [__webpack_require__(/*! ./customizable-timeline-dialog.component.css */ "./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__["MatDialogRef"], Object])
    ], CustomizableTimelineDialogComponent);
    return CustomizableTimelineDialogComponent;
}());



/***/ }),

/***/ "./src/app/cardtypes/customizable-timeline/customizable-timeline.component.css":
/*!*************************************************************************************!*\
  !*** ./src/app/cardtypes/customizable-timeline/customizable-timeline.component.css ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "::ng-deep [class*=\"timeline\"] .c3-xgrid-focus {\n  visibility: visible !important;\n}\n\n::ng-deep .timeline .c3 {\n  cursor: default !important;\n}\n\n::ng-deep .inEditMode .timeline .c3 {\n  cursor: pointer !important;\n}\n\n/* Only display icons on flags in the CustomizableGraph if in edit mode. */\n\n::ng-deep app-customizable-graph.inEditMode .showIcon {\n  visibility: visible !important;\n}\n\n::ng-deep [class*=\"tooltip-custom\"] {\n  position: absolute;\n  display: block;\n  font-size: 11px;\n  border-style: solid;\n  padding: 3px;\n  border-width: 1px;\n  border-color: grey;\n  border-radius: 3px;\n  min-height: 25px;\n  width: 200px;\n  max-height: 100px;\n  background-color: white;\n  overflow: auto;\n  color: white;\n}\n\n::ng-deep [class*=\"tooltip-whole\"] {\n  position: absolute;\n  display: block;\n  min-height: 25px;\n  width: 0px;\n  max-height: 100px;\n  border-left-style: solid;\n  border-width: 1px;\n}\n\n::ng-deep [class*=\"tooltip-title-custom\"] {\n  margin: 0px;\n  font-size: small;\n  text-align: center;\n  max-width: 120px;\n  display: inline-block;\n  vertical-align: bottom;\n  min-width: 120px;\n  overflow: auto;\n  margin-top: 5px;\n  overflow-wrap: break-word;\n}\n\n::ng-deep [class*=\"tooltip-details-custom\"] {\n  display: none;\n  overflow: auto;\n  text-align: center;\n  overflow-wrap: break-word;\n  max-width: 120px;\n}\n\n::ng-deep [id*=\"expand\"] {\n  visibility: hidden;\n  vertical-align: middle;\n}\n\n::ng-deep [id*=\"delete\"] {\n  visibility: hidden;\n  vertical-align: middle;\n}\n\n::ng-deep [id*=\"edit\"] {\n  visibility: hidden;\n  margin-top: 8px;\n}\n\n.contents-block {\n  flex-direction: column;\n  -ms-flex-direction: column;\n  display: flex;\n  display: -ms-flexbox;\n  flex: 1 1 100%;\n  -ms-flex: 1 1 100%; /* For IE10 */\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FyZHR5cGVzL2N1c3RvbWl6YWJsZS10aW1lbGluZS9jdXN0b21pemFibGUtdGltZWxpbmUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDhCQUE4QjtBQUNoQzs7QUFFQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQSwwRUFBMEU7O0FBQzFFO0VBQ0UsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxlQUFlO0VBQ2YsbUJBQW1CO0VBQ25CLFlBQVk7RUFDWixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQix1QkFBdUI7RUFDdkIsY0FBYztFQUNkLFlBQVk7QUFDZDs7QUFHQTtFQUNFLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLFVBQVU7RUFDVixpQkFBaUI7RUFDakIsd0JBQXdCO0VBQ3hCLGlCQUFpQjtBQUNuQjs7QUFHQTtFQUNFLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2QsZUFBZTtFQUNmLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLHlCQUF5QjtFQUN6QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLHNCQUFzQjtBQUN4Qjs7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLDBCQUEwQjtFQUMxQixhQUFhO0VBQ2Isb0JBQW9CO0VBQ3BCLGNBQWM7RUFDZCxrQkFBa0IsRUFBRSxhQUFhO0FBQ25DIiwiZmlsZSI6InNyYy9hcHAvY2FyZHR5cGVzL2N1c3RvbWl6YWJsZS10aW1lbGluZS9jdXN0b21pemFibGUtdGltZWxpbmUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIjo6bmctZGVlcCBbY2xhc3MqPVwidGltZWxpbmVcIl0gLmMzLXhncmlkLWZvY3VzIHtcbiAgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50O1xufVxuXG46Om5nLWRlZXAgLnRpbWVsaW5lIC5jMyB7XG4gIGN1cnNvcjogZGVmYXVsdCAhaW1wb3J0YW50O1xufVxuXG46Om5nLWRlZXAgLmluRWRpdE1vZGUgLnRpbWVsaW5lIC5jMyB7XG4gIGN1cnNvcjogcG9pbnRlciAhaW1wb3J0YW50O1xufVxuXG4vKiBPbmx5IGRpc3BsYXkgaWNvbnMgb24gZmxhZ3MgaW4gdGhlIEN1c3RvbWl6YWJsZUdyYXBoIGlmIGluIGVkaXQgbW9kZS4gKi9cbjo6bmctZGVlcCBhcHAtY3VzdG9taXphYmxlLWdyYXBoLmluRWRpdE1vZGUgLnNob3dJY29uIHtcbiAgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50O1xufVxuXG46Om5nLWRlZXAgW2NsYXNzKj1cInRvb2x0aXAtY3VzdG9tXCJdIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgZm9udC1zaXplOiAxMXB4O1xuICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICBwYWRkaW5nOiAzcHg7XG4gIGJvcmRlci13aWR0aDogMXB4O1xuICBib3JkZXItY29sb3I6IGdyZXk7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgbWluLWhlaWdodDogMjVweDtcbiAgd2lkdGg6IDIwMHB4O1xuICBtYXgtaGVpZ2h0OiAxMDBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gIG92ZXJmbG93OiBhdXRvO1xuICBjb2xvcjogd2hpdGU7XG59XG5cblxuOjpuZy1kZWVwIFtjbGFzcyo9XCJ0b29sdGlwLXdob2xlXCJdIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWluLWhlaWdodDogMjVweDtcbiAgd2lkdGg6IDBweDtcbiAgbWF4LWhlaWdodDogMTAwcHg7XG4gIGJvcmRlci1sZWZ0LXN0eWxlOiBzb2xpZDtcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XG59XG5cblxuOjpuZy1kZWVwIFtjbGFzcyo9XCJ0b29sdGlwLXRpdGxlLWN1c3RvbVwiXSB7XG4gIG1hcmdpbjogMHB4O1xuICBmb250LXNpemU6IHNtYWxsO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1heC13aWR0aDogMTIwcHg7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgbWluLXdpZHRoOiAxMjBweDtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIG1hcmdpbi10b3A6IDVweDtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbn1cblxuOjpuZy1kZWVwIFtjbGFzcyo9XCJ0b29sdGlwLWRldGFpbHMtY3VzdG9tXCJdIHtcbiAgZGlzcGxheTogbm9uZTtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgbWF4LXdpZHRoOiAxMjBweDtcbn1cblxuOjpuZy1kZWVwIFtpZCo9XCJleHBhbmRcIl0ge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG5cbjo6bmctZGVlcCBbaWQqPVwiZGVsZXRlXCJdIHtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xufVxuOjpuZy1kZWVwIFtpZCo9XCJlZGl0XCJdIHtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICBtYXJnaW4tdG9wOiA4cHg7XG59XG5cbi5jb250ZW50cy1ibG9jayB7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBkaXNwbGF5OiBmbGV4O1xuICBkaXNwbGF5OiAtbXMtZmxleGJveDtcbiAgZmxleDogMSAxIDEwMCU7XG4gIC1tcy1mbGV4OiAxIDEgMTAwJTsgLyogRm9yIElFMTAgKi9cbn1cbiJdfQ== */"

/***/ }),

/***/ "./src/app/cardtypes/customizable-timeline/customizable-timeline.component.html":
/*!**************************************************************************************!*\
  !*** ./src/app/cardtypes/customizable-timeline/customizable-timeline.component.html ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<app-card [attr.id]=\"id\" label=\"{{this.uiConstants.CUSTOM_TIMELINE_LABEL}}\" [isEditable]=\"true\" [isRemovable]=\"true\"\n  (editEvent)=\"this.inEditMode = true\" (saveEvent)=\"this.inEditMode = false\" (removeEvent)=\"remove()\"\n  [ngClass]=\"{'inEditMode': inEditMode}\">\n  <ng-container class=\"legends-block\">\n    <div *ngIf=\"inEditMode\" style=\"min-width: 200px; max-width: 200px; word-wrap: break-word;\">\n      {{this.uiConstants.CUSTOM_TIMELINE_INSTRUCTIONS}}\n    </div>\n  </ng-container>\n  <div fxFlex=\"row\" class=\"contents-block\">\n    <app-customizable-graph class=\"timeline\" [data]=\"this.data\" [dateRange]=\"this.dateRange\" [inEditMode]=\"inEditMode\"\n      (pointsChanged)=\"pointsChanged($event)\" [ngClass]=\"{'inEditMode': inEditMode}\">\n    </app-customizable-graph>\n  </div>\n</app-card>\n"

/***/ }),

/***/ "./src/app/cardtypes/customizable-timeline/customizable-timeline.component.ts":
/*!************************************************************************************!*\
  !*** ./src/app/cardtypes/customizable-timeline/customizable-timeline.component.ts ***!
  \************************************************************************************/
/*! exports provided: CustomizableTimelineComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomizableTimelineComponent", function() { return CustomizableTimelineComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var src_app_fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/fhir-server/fhir.service */ "./src/app/fhir-server/fhir.service.ts");
/* harmony import */ var src_app_graphs_graphdatatypes_customizabledata__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/graphs/graphdatatypes/customizabledata */ "./src/app/graphs/graphdatatypes/customizabledata.ts");
/* harmony import */ var src_app_graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/app/graphs/graphtypes/graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
// tslint:disable-next-line:max-line-length






/**
 * The customizable timeline lets the user plot any events they'd like to keep
 * track of as little flags along a timeline.
 */
var CustomizableTimelineComponent = /** @class */ (function () {
    function CustomizableTimelineComponent(fhirService, uiConstants) {
        this.fhirService = fhirService;
        this.uiConstants = uiConstants;
        // An event indicating that the event lines displayed on all other charts need
        // to be updated.
        this.updateEventLines = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /** Propogate remove events up to the card container.  */
        this.removeEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        // Whether or not this CustomizableTimeline is being edited.
        this.inEditMode = false;
        this.data = src_app_graphs_graphdatatypes_customizabledata__WEBPACK_IMPORTED_MODULE_3__["CustomizableData"].defaultEmptySeries();
    }
    CustomizableTimelineComponent.prototype.ngOnChanges = function (changes) {
        if (changes.deletedData && changes.deletedData.currentValue) {
            this.data = this.deletedData;
            this.containedGraph.data = this.data;
        }
    };
    // Listens for an event indicating that the points on the CustomizableGraph
    // have been changed, and emits an event with the modified eventlines
    // displayed on all other charts.
    CustomizableTimelineComponent.prototype.pointsChanged = function ($event) {
        this.updateEventLines.emit({ data: this.data, id: this.id });
    };
    // Called when the user clicks the trashcan button on the card.
    CustomizableTimelineComponent.prototype.remove = function () {
        this.removeEvent.emit({ id: this.id, value: this.data });
        Object(src_constants__WEBPACK_IMPORTED_MODULE_5__["recordGoogleAnalyticsEvent"])('deleteCustomTimeline', 'deleteCard', new Date().toDateString());
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(src_app_graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_4__["GraphComponent"]),
        __metadata("design:type", src_app_graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_4__["GraphComponent"])
    ], CustomizableTimelineComponent.prototype, "containedGraph", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], CustomizableTimelineComponent.prototype, "id", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", luxon__WEBPACK_IMPORTED_MODULE_1__["Interval"])
    ], CustomizableTimelineComponent.prototype, "dateRange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], CustomizableTimelineComponent.prototype, "deletedData", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CustomizableTimelineComponent.prototype, "updateEventLines", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CustomizableTimelineComponent.prototype, "removeEvent", void 0);
    CustomizableTimelineComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-customizable-timeline',
            template: __webpack_require__(/*! ./customizable-timeline.component.html */ "./src/app/cardtypes/customizable-timeline/customizable-timeline.component.html"),
            styles: [__webpack_require__(/*! ./customizable-timeline.component.css */ "./src/app/cardtypes/customizable-timeline/customizable-timeline.component.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_5__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [src_app_fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_2__["FhirService"], Object])
    ], CustomizableTimelineComponent);
    return CustomizableTimelineComponent;
}());



/***/ }),

/***/ "./src/app/cardtypes/legendstyles.css":
/*!********************************************!*\
  !*** ./src/app/cardtypes/legendstyles.css ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".legend {\n  cursor: pointer;\n}\n\n/* This is the color swatch for the legends.*/\n\n.legend span {\n  border-style: solid !important;\n  height: 7px;\n  margin: 3px;\n  vertical-align: center;\n  width: 7px;\n}\n\n/* This is a specific style for MultiGraphCard. */\n\n.contents-block {\n  flex-direction: column;\n  -ms-flex-direction: column; /* For IE10 */\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n  flex: 1 1 0%;\n  -ms-flex: 1 1 0%; /* For IE10 */\n}\n\n.axis {\n  flex: 0 0 auto;\n  -ms-flex: 0 0 auto; /* For IE10 */\n}\n\n.mat-body {\n  font-family: 'Work Sans', sans-serif;\n  font-size: 14px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FyZHR5cGVzL2xlZ2VuZHN0eWxlcy5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBLDZDQUE2Qzs7QUFDN0M7RUFDRSw4QkFBOEI7RUFDOUIsV0FBVztFQUNYLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsVUFBVTtBQUNaOztBQUVBLGlEQUFpRDs7QUFDakQ7RUFDRSxzQkFBc0I7RUFDdEIsMEJBQTBCLEVBQUUsYUFBYTtFQUN6QyxhQUFhO0VBQ2Isb0JBQW9CLEVBQUUsYUFBYTtFQUNuQyxZQUFZO0VBQ1osZ0JBQWdCLEVBQUUsYUFBYTtBQUNqQzs7QUFFQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0IsRUFBRSxhQUFhO0FBQ25DOztBQUVBO0VBQ0Usb0NBQW9DO0VBQ3BDLGVBQWU7QUFDakIiLCJmaWxlIjoic3JjL2FwcC9jYXJkdHlwZXMvbGVnZW5kc3R5bGVzLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sZWdlbmQge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi8qIFRoaXMgaXMgdGhlIGNvbG9yIHN3YXRjaCBmb3IgdGhlIGxlZ2VuZHMuKi9cbi5sZWdlbmQgc3BhbiB7XG4gIGJvcmRlci1zdHlsZTogc29saWQgIWltcG9ydGFudDtcbiAgaGVpZ2h0OiA3cHg7XG4gIG1hcmdpbjogM3B4O1xuICB2ZXJ0aWNhbC1hbGlnbjogY2VudGVyO1xuICB3aWR0aDogN3B4O1xufVxuXG4vKiBUaGlzIGlzIGEgc3BlY2lmaWMgc3R5bGUgZm9yIE11bHRpR3JhcGhDYXJkLiAqL1xuLmNvbnRlbnRzLWJsb2NrIHtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IC8qIEZvciBJRTEwICovXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94OyAvKiBGb3IgSUUxMCAqL1xuICBmbGV4OiAxIDEgMCU7XG4gIC1tcy1mbGV4OiAxIDEgMCU7IC8qIEZvciBJRTEwICovXG59XG5cbi5heGlzIHtcbiAgZmxleDogMCAwIGF1dG87XG4gIC1tcy1mbGV4OiAwIDAgYXV0bzsgLyogRm9yIElFMTAgKi9cbn1cblxuLm1hdC1ib2R5IHtcbiAgZm9udC1mYW1pbHk6ICdXb3JrIFNhbnMnLCBzYW5zLXNlcmlmO1xuICBmb250LXNpemU6IDE0cHg7XG59Il19 */"

/***/ }),

/***/ "./src/app/cardtypes/multigraphcard/multigraphcard.component.css":
/*!***********************************************************************!*\
  !*** ./src/app/cardtypes/multigraphcard/multigraphcard.component.css ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n.card-error {\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FyZHR5cGVzL211bHRpZ3JhcGhjYXJkL211bHRpZ3JhcGhjYXJkLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0VBQ0UscUJBQXFCO0VBQ3JCLHFCQUFxQjtBQUN2QiIsImZpbGUiOiJzcmMvYXBwL2NhcmR0eXBlcy9tdWx0aWdyYXBoY2FyZC9tdWx0aWdyYXBoY2FyZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG4uY2FyZC1lcnJvciB7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgd29yZC1icmVhazogYnJlYWstYWxsO1xufVxuIl19 */"

/***/ }),

/***/ "./src/app/cardtypes/multigraphcard/multigraphcard.component.ts":
/*!**********************************************************************!*\
  !*** ./src/app/cardtypes/multigraphcard/multigraphcard.component.ts ***!
  \**********************************************************************/
/*! exports provided: MultiGraphCardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MultiGraphCardComponent", function() { return MultiGraphCardComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var src_app_graphs_graphtypes_axis_group__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/graphs/graphtypes/axis-group */ "./src/app/graphs/graphtypes/axis-group.ts");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../graphs/graphtypes/graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var _graphs_graphtypes_linegraph_linegraph_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../graphs/graphtypes/linegraph/linegraph.component */ "./src/app/graphs/graphtypes/linegraph/linegraph.component.ts");
/* harmony import */ var _theme_verily_colors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../theme/verily_colors */ "./src/app/theme/verily_colors.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// tslint:disable-next-line:max-line-length







/**
 * This card holds a label, one or more graphs on one or more axes, and a
 * dragger handle.
 */
var MultiGraphCardComponent = /** @class */ (function () {
    function MultiGraphCardComponent() {
        /** Propogate remove events up to the card container.  */
        this.removeEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * The units text for this card. Blank if the axes have more than one unit.
         */
        this.unitsLabel = '';
        /** Holds the color corresponding to this card. */
        this.color = _theme_verily_colors__WEBPACK_IMPORTED_MODULE_6__["BLUE_GREY_500"]; // Default color for a card component.
        /** Hold an instance of this enum so the HTML template can reference it. */
        this.ChartType = _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_4__["ChartType"];
        /**
         * Maps legend categories to the corresponding series so that when you hover
         * over a legend category, it can highlight all the corresponding series.
         */
        this.legendToSeries = new Map();
    }
    /**
     * Sets up the class variables that are dependent on the @Input parameter to
     * this component, resourceCodeGroups.
     * @throws An Error if ResourceCodeGroups is undefined or contains mixed
     *     clinical concepts.
     */
    MultiGraphCardComponent.prototype.ngOnInit = function () {
        if (!this.axisGroup) {
            throw Error('All MultiGraphCardComponents are expected to have an AxisGroup ' +
                ' as the data source, but none provided for card id ' + this.id);
        }
        this.label = this.axisGroup.label;
        this.color = this.axisGroup.displayGroup.fill;
    };
    MultiGraphCardComponent.prototype.ngOnChanges = function (changes) {
        var dateRange = changes.dateRange;
        if (dateRange && dateRange.previousValue !== dateRange.currentValue) {
            this.loadNewData();
        }
    };
    MultiGraphCardComponent.prototype.addSeriesToLegendMap = function (series) {
        // We do not want to add the normalBound series to the legend
        if (series.legendInfo.label ===
            _graphs_graphtypes_linegraph_linegraph_component__WEBPACK_IMPORTED_MODULE_5__["LineGraphComponent"].NORMAL_BOUND_SERIES_NAME) {
            return;
        }
        if (!this.legendToSeries.has(series.legendInfo)) {
            this.legendToSeries.set(series.legendInfo, []);
        }
        var added = this.legendToSeries.get(series.legendInfo);
        added.push(series);
        this.legendToSeries.set(series.legendInfo, added);
    };
    MultiGraphCardComponent.prototype.loadNewData = function () {
        var _this = this;
        Promise
            .all(this.axisGroup.axes.map(function (axis) { return axis.updateDateRange(_this.dateRange); }))
            .then(function (axisData) {
            _this.getLabelText().then(function (lblText) {
                _this.unitsLabel = lblText;
            });
            // Gather a list of all the unique legends and series displayed.
            _this.legendToSeries.clear();
            for (var _i = 0, axisData_1 = axisData; _i < axisData_1.length; _i++) {
                var data = axisData_1[_i];
                for (var _a = 0, _b = data.series; _a < _b.length; _a++) {
                    var series = _b[_a];
                    _this.addSeriesToLegendMap(series);
                }
            }
            // Kick off the promise to get all the x-regions. It will update
            // the class variable and then everything bound to it will update,
            // too.
            _this.getAllXRegions();
        });
    };
    /**
     * Gets the label text for this card. If the axes have all matching units,
     * it returns the units; otherwise it returns a blank string.
     */
    MultiGraphCardComponent.prototype.getLabelText = function () {
        var _this = this;
        return Promise
            .all(this.axisGroup.axes.map(function (axis) { return axis.updateDateRange(_this.dateRange); }))
            .then(function (dataArray) { return dataArray.map(function (data) { return data.series; }); })
            .then(function (seriesNestedArray) {
            var flattened = [].concat.apply([], seriesNestedArray);
            return flattened.map(function (series) { return series.unit; })
                .filter(function (v) { return v !== undefined; });
        })
            .then(function (allUnits) {
            var units = new Set(allUnits);
            if (units.size === 1 && allUnits[0] !== undefined) {
                return ' (' + allUnits[0] + ')';
            }
            else {
                _this.updateAxisLabels();
                return '';
            }
        });
    };
    /**
     * Gets all the X regions for the axes contained in this group.
     */
    MultiGraphCardComponent.prototype.getAllXRegions = function () {
        var _this = this;
        return Promise.all(this.axisGroup.axes.map(function (axis) { return axis.getXRegions(); }))
            .then(function (nestedXRegions) {
            _this.xRegions = [].concat.apply([], nestedXRegions);
        });
    };
    /**
     * If the axes on this card have different units, make sure that each
     * axis displays its units on the y-axis, for clarity.
     */
    MultiGraphCardComponent.prototype.updateAxisLabels = function () {
        var _loop_1 = function (axis) {
            axis.updateDateRange(this_1.dateRange).then(function (axisData) {
                if (axisData && axis.label && axisData.series &&
                    axisData.series.length > 0 && axisData.series[0].unit) {
                    var units = ' (' + axisData.series[0].unit + ')';
                    // Only add units if not done so already.
                    if (axis.label.indexOf(units) === -1) {
                        axis.label += units;
                    }
                }
            });
        };
        var this_1 = this;
        for (var _i = 0, _a = this.axisGroup.axes; _i < _a.length; _i++) {
            var axis = _a[_i];
            _loop_1(axis);
        }
    };
    /**
     * Returns true if any of the LabeledSeries passed in has a datapoint
     * in the time range.
     * This is just a convenience function because this can't be evaluated
     * directly in the Angular template.
     */
    MultiGraphCardComponent.prototype.hasData = function (labeledSeries) {
        var _this = this;
        return labeledSeries.map(function (s) { return s.hasPointInRange(_this.dateRange); })
            .some(function (s) { return s === true; });
    };
    /**
     * Highlights the listed series in any graph they appear in for this card.
     */
    MultiGraphCardComponent.prototype.focusOnSeries = function (labeledSeries) {
        this.containedGraphs.forEach(function (graph) {
            graph.focusOnSeries(labeledSeries);
        });
    };
    /**
     * Removes highlight from any series on this card.
     */
    MultiGraphCardComponent.prototype.resetChart = function () {
        this.containedGraphs.forEach(function (graph) {
            graph.resetChart();
        });
    };
    // The events below need to get propogated up to the card container.
    /**
     *  Called when the user clicks the trashcan button on the card.
     */
    MultiGraphCardComponent.prototype.remove = function () {
        // We do not add a 'value' field because there is no internal value that
        // needs to be restored when the user reverts a deletion.
        this.removeEvent.emit({ id: this.id });
        Object(src_constants__WEBPACK_IMPORTED_MODULE_3__["recordGoogleAnalyticsEvent"])('deleteConcept', 'deleteCard', this.label);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChildren"])(_graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_4__["GraphComponent"]),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["QueryList"])
    ], MultiGraphCardComponent.prototype, "containedGraphs", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], MultiGraphCardComponent.prototype, "id", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", luxon__WEBPACK_IMPORTED_MODULE_1__["Interval"])
    ], MultiGraphCardComponent.prototype, "dateRange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", src_app_graphs_graphtypes_axis_group__WEBPACK_IMPORTED_MODULE_2__["AxisGroup"])
    ], MultiGraphCardComponent.prototype, "axisGroup", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], MultiGraphCardComponent.prototype, "eventlines", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], MultiGraphCardComponent.prototype, "removeEvent", void 0);
    MultiGraphCardComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-multigraphcard',
            template: __webpack_require__(/*! ./multigraphcard.html */ "./src/app/cardtypes/multigraphcard/multigraphcard.html"),
            styles: [__webpack_require__(/*! ../legendstyles.css */ "./src/app/cardtypes/legendstyles.css"), __webpack_require__(/*! ./multigraphcard.component.css */ "./src/app/cardtypes/multigraphcard/multigraphcard.component.css")]
        })
    ], MultiGraphCardComponent);
    return MultiGraphCardComponent;
}());



/***/ }),

/***/ "./src/app/cardtypes/multigraphcard/multigraphcard.html":
/*!**************************************************************!*\
  !*** ./src/app/cardtypes/multigraphcard/multigraphcard.html ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<app-card [id]=\"id\" [color]=\"this.color.hsl().string()\" [label]=\"label + unitsLabel\" (removeEvent)=\"remove()\">\n  <ng-container *ngIf=\"legendToSeries.size > 1\" class=\"legends-block\">\n    <ng-container *ngFor=\"let series of legendToSeries | keyvalue\">\n      <div fxLayout=\"row\" class=\"legend\" *ngIf=\"hasData(series.value)\" (mouseover)=\"focusOnSeries(series.value)\"\n        (mouseout)=\"resetChart()\">\n        <span [style.background-color]=\"series.key.fill.hsl().string()\"\n          [style.border]=\"series.key.outline.hsl().string()\">\n        </span>\n        <div fxFlex class=\"mat-body\">{{series.key.label}}</div>\n      </div>\n    </ng-container>\n  </ng-container>\n  <div fxFlex *ngIf=\"axisGroup\" fxLayout=\"column\" class=\"contents-block\">\n    <div fxFlex *ngFor=\"let axis of axisGroup.axes\" fxShrink=\"0\" fxGrow=\"0\">\n      <mat-spinner *ngIf=\"!axis.alreadyResolvedData && !axis.errorMessage\" [diameter]=\"30\"></mat-spinner>\n      <mat-expansion-panel *ngIf=\"axis.errorMessage\" class=\"card-error\">\n        <mat-expansion-panel-header>\n          <mat-icon>error</mat-icon>Error loading data for: {{axis.label}}. Please check the PowerChart for correct\n          information.\n        </mat-expansion-panel-header>Technical details:<br>{{axis.errorMessage}}\n      </mat-expansion-panel>\n      <ng-container *ngIf=\"axis.dataResolved() && !axis.errorMessage && axis.axisDataAvailable\"\n        [ngSwitch]=\"axis.chartType\">\n        <app-linegraph *ngSwitchCase=\"ChartType.LINE\" [data]=\"axis.alreadyResolvedData\" [dateRange]=\"this.dateRange\"\n          [eventlines]=\"this.eventlines\" [xRegions]=\"this.xRegions\"\n          [axisLabel]=\"axisGroup.axes.length > 1 ? axis.label : ''\" [showTicks]=\"axis.showTicks\"></app-linegraph>\n        <app-scatterplot *ngSwitchCase=\"ChartType.SCATTER\" [data]=\"axis.alreadyResolvedData\"\n          [dateRange]=\"this.dateRange\" [eventlines]=\"this.eventlines\" [xRegions]=\"this.xRegions\"\n          [axisLabel]=\"axisGroup.axes.length > 1 ? axis.label : ''\" [showTicks]=\"axis.showTicks\"></app-scatterplot>\n        <app-stepgraph class=\"stepgraph\" *ngSwitchCase=\"ChartType.STEP\" [data]=\"axis.alreadyResolvedData\"\n          [dateRange]=\"this.dateRange\" [eventlines]=\"this.eventlines\" [xRegions]=\"this.xRegions\"\n          [axisLabel]=\"axisGroup.axes.length > 1 ? axis.label : ''\">\n        </app-stepgraph>\n        <app-microbio-graph *ngSwitchCase=\"ChartType.MICROBIO\" [data]=\"axis.alreadyResolvedData\"\n          [dateRange]=\"this.dateRange\" [eventlines]=\"this.eventlines\" [xRegions]=\"this.xRegions\"\n          [axisLabel]=\"axisGroup.axes.length > 1 ? axis.label : ''\">\n        </app-microbio-graph>\n        <app-diagnostic-graph *ngSwitchCase=\"ChartType.DIAGNOSTIC\" [data]=\"axis.alreadyResolvedData\"\n          [dateRange]=\"this.dateRange\" [eventlines]=\"this.eventlines\" [xRegions]=\"this.xRegions\"\n          [axisLabel]=\"axisGroup.axes.length > 1 ? axis.label : ''\">\n        </app-diagnostic-graph>\n      </ng-container>\n    </div>\n  </div>\n</app-card>"

/***/ }),

/***/ "./src/app/cardtypes/textboxcard/textboxcard.component.html":
/*!******************************************************************!*\
  !*** ./src/app/cardtypes/textboxcard/textboxcard.component.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<app-card [id]=\"id\" [isEditable]=\"true\" (removeEvent)=\"remove()\" (editEvent)=\"edit()\" (saveEvent)=\"save()\"\n  [ngClass]=\"{'inEditMode': inEditMode}\">\n  <ng-container class=\"contents-block\">\n    <mat-form-field style=\"width: 95%;\">\n      <textarea #textArea matInput matTextareaAutosize placeholder=\"Add annotation here.\" [disabled]=\"!inEditMode\"\n        (change)=\"updateValue()\" [(ngModel)]=\"noteString\">\n    </textarea>\n      <mat-hint> {{getHintText()}} </mat-hint>\n    </mat-form-field>\n  </ng-container>\n</app-card>\n"

/***/ }),

/***/ "./src/app/cardtypes/textboxcard/textboxcard.component.ts":
/*!****************************************************************!*\
  !*** ./src/app/cardtypes/textboxcard/textboxcard.component.ts ***!
  \****************************************************************/
/*! exports provided: TextboxcardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextboxcardComponent", function() { return TextboxcardComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};


/**
 * A Material Card that displays a label, a textbox, and a draggable handle
 * in a row.
 */
var TextboxcardComponent = /** @class */ (function () {
    function TextboxcardComponent(uiConstants) {
        this.uiConstants = uiConstants;
        /** Propogate remove events up to the card container.  */
        this.removeEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.inEditMode = false;
    }
    TextboxcardComponent.prototype.updateValue = function () {
        this.textAreaElement.nativeElement.innerHTML = this.noteString;
    };
    // The events below need to get propogated up to the card container.
    // Called when the user clicks the trashcan button on the card.
    TextboxcardComponent.prototype.remove = function () {
        // We pass a 'value' field with the contents of the textbox so that, in case
        // of restoration of a deleted textbox, the previous value can be displayed.
        this.removeEvent.emit({ id: this.id, value: this.noteString });
        Object(src_constants__WEBPACK_IMPORTED_MODULE_1__["recordGoogleAnalyticsEvent"])('deleteTextbox', 'deleteCard', new Date().toDateString());
    };
    TextboxcardComponent.prototype.edit = function () {
        this.inEditMode = true;
    };
    TextboxcardComponent.prototype.save = function () {
        this.inEditMode = false;
    };
    TextboxcardComponent.prototype.getHintText = function () {
        if (this.inEditMode) {
            return this.uiConstants.SAVE_TEXT_HINT;
        }
        else {
            return this.uiConstants.EDIT_TEXT_HINT;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('textArea'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], TextboxcardComponent.prototype, "textAreaElement", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], TextboxcardComponent.prototype, "id", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], TextboxcardComponent.prototype, "removeEvent", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], TextboxcardComponent.prototype, "noteString", void 0);
    TextboxcardComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-textboxcard',
            template: __webpack_require__(/*! ./textboxcard.component.html */ "./src/app/cardtypes/textboxcard/textboxcard.component.html"),
        }),
        __param(0, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [Object])
    ], TextboxcardComponent);
    return TextboxcardComponent;
}());



/***/ }),

/***/ "./src/app/conceptmappings/annotation-mapping.ts":
/*!*******************************************************!*\
  !*** ./src/app/conceptmappings/annotation-mapping.ts ***!
  \*******************************************************/
/*! exports provided: ANNOTATION_CONFIGURATION */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ANNOTATION_CONFIGURATION", function() { return ANNOTATION_CONFIGURATION; });
/* harmony import */ var _fhir_resources_annotated_annotated_observation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../fhir-resources/annotated/annotated-observation */ "./src/app/fhir-resources/annotated/annotated-observation.ts");

/**
 * Returns the function to annotate a Blood Pressure Resource group with
 * a Blood Pressure Location.
 *
 * @param The LOINCCodeGroup for the 'Blood Pressure Details' group
 */
function getBloodPressureAnnotationFunction(bpDetailsResourceGroup) {
    return function (observation, dateRange) {
        return bpDetailsResourceGroup.getResourceSet(dateRange).then(function (obsSet) {
            return _fhir_resources_annotated_annotated_observation__WEBPACK_IMPORTED_MODULE_0__["AnnotatedObservation"].forBloodPressure(observation, 
            // We only pass in the first ObservationSet, since we
            // know there is only one code whose observations we
            // care about.
            obsSet[0]);
        });
    };
}
/**
 * Returns the function to annotate a Medication Monitoring Resource group with
 * Medication Administration information.
 *
 * @param The RxNormCode for the Medication Resource group
 */
function getMedicationMonitoringAnnotationFunction(rxNormGroup) {
    return function (observation, dateRange) {
        return rxNormGroup.getResourceSet(dateRange).then(function (rxNorms) {
            var medOrders = [].concat.apply([], rxNorms.map(function (rxNorm) { return rxNorm.orders.resourceList; }));
            return _fhir_resources_annotated_annotated_observation__WEBPACK_IMPORTED_MODULE_0__["AnnotatedObservation"].forMedicationMonitoring(observation, medOrders);
        });
    };
}
/**
 * List of Configurations for Resource Groups that should have a makeAnnotated
 * function set.
 *
 * Each element in the list should be a JSON object with the following
 * properties:
 *  - groupName: should be the name of the ResourceCodeGroup that should have
 * its makeAnnotated attribute set.
 *  - makeAnnotatedFunction: a function that takes a reference
 * ResourceCodeGroup and returns a function that should be assigned to the
 * makeAnnotated attribute.
 *  - refGroup: the name of the ResourceCodeGroup that needs to be referenced
 * in order to create the makeAnnotated attribute function.
 *
 */
var ANNOTATION_CONFIGURATION = [
    {
        'groupName': 'Blood Pressure',
        'makeAnnotatedFunction': function (refGroup) {
            return getBloodPressureAnnotationFunction(refGroup);
        },
        'refGroup': 'Blood Pressure Details'
    },
    {
        'groupName': 'Vancomycin',
        'makeAnnotatedFunction': function (refGroup) {
            return getMedicationMonitoringAnnotationFunction(refGroup);
        },
        'refGroup': 'Vancomycin Monitoring Reference'
    },
    {
        'groupName': 'Gentamicin',
        'makeAnnotatedFunction': function (refGroup) {
            return getMedicationMonitoringAnnotationFunction(refGroup);
        },
        'refGroup': 'Gentamicin Monitoring Reference'
    }
];


/***/ }),

/***/ "./src/app/conceptmappings/concept-file-configuration.ts":
/*!***************************************************************!*\
  !*** ./src/app/conceptmappings/concept-file-configuration.ts ***!
  \***************************************************************/
/*! exports provided: ConceptFileConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConceptFileConfiguration", function() { return ConceptFileConfiguration; });
/* harmony import */ var _resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./resource-codes/display-grouping */ "./src/app/conceptmappings/resource-codes/display-grouping.ts");

/**
 * Holds information for where the JSON files defining groupings and individual
 * clinical concepts are.
 */
var ConceptFileConfiguration = /** @class */ (function () {
    function ConceptFileConfiguration(conceptsFolder, vitalGroupFile, vitalConceptsFile, labConceptsFile, labGroupFile, radiologyConceptsFile, radiologyGroupFile, antibioticConceptsFile, antibioticGroupFile, antiviralConceptsFile, antiviralGroupFile, antifungalConceptsFile, antifungalGroupFile, microbioGroupFile, microbioConceptsFile) {
        if (conceptsFolder === void 0) { conceptsFolder = 'clinical_concept_configuration'; }
        if (vitalGroupFile === void 0) { vitalGroupFile = 'vital_sign_groups.json'; }
        if (vitalConceptsFile === void 0) { vitalConceptsFile = 'vital_signs.json'; }
        if (labConceptsFile === void 0) { labConceptsFile = 'lab_results.json'; }
        if (labGroupFile === void 0) { labGroupFile = 'lab_groups.json'; }
        if (radiologyConceptsFile === void 0) { radiologyConceptsFile = 'radiology_results.json'; }
        if (radiologyGroupFile === void 0) { radiologyGroupFile = 'radiology_groups.json'; }
        if (antibioticConceptsFile === void 0) { antibioticConceptsFile = 'medications_antibiotics.json'; }
        if (antibioticGroupFile === void 0) { antibioticGroupFile = 'medication_groups_antibiotics.json'; }
        if (antiviralConceptsFile === void 0) { antiviralConceptsFile = 'medications_antivirals.json'; }
        if (antiviralGroupFile === void 0) { antiviralGroupFile = 'medication_groups_antivirals.json'; }
        if (antifungalConceptsFile === void 0) { antifungalConceptsFile = 'medications_antifungals.json'; }
        if (antifungalGroupFile === void 0) { antifungalGroupFile = 'medication_groups_antifungals.json'; }
        if (microbioGroupFile === void 0) { microbioGroupFile = 'microbio_groups.json'; }
        if (microbioConceptsFile === void 0) { microbioConceptsFile = 'microbio_results.json'; }
        this.conceptsFolder = conceptsFolder;
        this.fileMap = new Map([
            [_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__["vitalSign"], [vitalGroupFile, vitalConceptsFile]],
            [_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__["labResult"], [labGroupFile, labConceptsFile]],
            [_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__["radiology"], [radiologyGroupFile, radiologyConceptsFile]],
            [_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__["antibiotics"], [antibioticGroupFile, antibioticConceptsFile]],
            [_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__["antivirals"], [antiviralGroupFile, antiviralConceptsFile]],
            [_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__["antifungals"], [antifungalGroupFile, antifungalConceptsFile]],
            [_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_0__["microbio"], [microbioGroupFile, microbioConceptsFile]]
        ]);
        this.assetPath = './assets/' + this.conceptsFolder;
    }
    return ConceptFileConfiguration;
}());



/***/ }),

/***/ "./src/app/conceptmappings/resource-code-creator.ts":
/*!**********************************************************!*\
  !*** ./src/app/conceptmappings/resource-code-creator.ts ***!
  \**********************************************************/
/*! exports provided: GroupConfiguration, ResourceCodeCreator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GroupConfiguration", function() { return GroupConfiguration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceCodeCreator", function() { return ResourceCodeCreator; });
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../graphs/graphtypes/graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var _concept_file_configuration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./concept-file-configuration */ "./src/app/conceptmappings/concept-file-configuration.ts");
/* harmony import */ var _resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resource-codes/bch-microbio-code */ "./src/app/conceptmappings/resource-codes/bch-microbio-code.ts");
/* harmony import */ var _resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resource-codes/diagnostic-report-code */ "./src/app/conceptmappings/resource-codes/diagnostic-report-code.ts");
/* harmony import */ var _resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resource-codes/display-grouping */ "./src/app/conceptmappings/resource-codes/display-grouping.ts");
/* harmony import */ var _resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resource-codes/loinc-code */ "./src/app/conceptmappings/resource-codes/loinc-code.ts");
/* harmony import */ var _resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resource-codes/rx-norm */ "./src/app/conceptmappings/resource-codes/rx-norm.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.









/**
 * Holds basic configuration information for clinical concept groups.
 */
var GroupConfiguration = /** @class */ (function () {
    function GroupConfiguration(groupName, chartType, showOnSameAxis, displayGrouping, parentGroupName) {
        this.groupName = groupName;
        this.chartType = chartType;
        this.showOnSameAxis = showOnSameAxis;
        this.displayGrouping = displayGrouping;
        this.parentGroupName = parentGroupName;
    }
    return GroupConfiguration;
}());

/**
 * Responsible for reading in the configuration files defined in this
 * environment and parsing them into clinical concepts and their
 * corresponding groups.
 */
var ResourceCodeCreator = /** @class */ (function () {
    function ResourceCodeCreator(http, conceptFileConfiguration) {
        var _this = this;
        this.http = http;
        this.conceptFileConfiguration = conceptFileConfiguration;
        this.loadJsonForAllGroups = Promise.all(Array.from(this.conceptFileConfiguration.fileMap).map(function (entry) {
            var displayGroup = entry[0];
            var groupFile = entry[1][0];
            return _this.http
                .get(_this.conceptFileConfiguration.assetPath + '/' + groupFile)
                .toPromise()
                .then(function (groups) {
                // Without explicit typing here, the TS compiler complains.
                var returned = [displayGroup, groups];
                return returned;
            });
        }));
        this.loadJsonForAllConcepts = Promise.all(Array.from(this.conceptFileConfiguration.fileMap).map(function (entry) {
            var displayGroup = entry[0];
            var conceptsFile = entry[1][1];
            return _this.http
                .get(_this.conceptFileConfiguration.assetPath + '/' +
                conceptsFile)
                .toPromise()
                .then(function (clinicalConcepts) {
                // Without explicit typing here, the TS compiler complains.
                var returned = [displayGroup, clinicalConcepts];
                return returned;
            });
        }));
        /**
         * Loads in configuration for all the display groupings, including the
         * grouping name, the chart type for the grouping, whether it's displayed
         * by default
         */
        this.loadAllGroups = this.loadJsonForAllGroups
            .then(function (groupsList) {
            return groupsList.map(function (group) { return _this.createGroupConfigurations(group[0], group[1]); });
        })
            // Return one flattened map for all the display groups regardless of
            // their file source.
            .then(function (allMaps) {
            return new Map(allMaps.map(function (m) { return Array.from(m); })
                .reduce(function (acc, val) { return acc.concat(val); }));
        });
        this.loadAllConcepts = this.loadAllGroups.then(function (groupMap) {
            return _this.loadJsonForAllConcepts
                .then(function (conceptsList) {
                return conceptsList.map(function (concept) { return _this.createConcepts(concept[0], concept[1]); });
            })
                .then(function (conceptsFromFile) {
                // Reduce into one flattened map, allowing for mixing across
                // concept groups.
                var allConceptsMap = new Map();
                for (var _i = 0, conceptsFromFile_1 = conceptsFromFile; _i < conceptsFromFile_1.length; _i++) {
                    var mapEntry = conceptsFromFile_1[_i];
                    for (var _a = 0, _b = Array.from(mapEntry.entries()); _a < _b.length; _a++) {
                        var entry = _b[_a];
                        var group = entry[0];
                        var resourceCodes = entry[1];
                        if (allConceptsMap.has(group)) {
                            resourceCodes =
                                resourceCodes.concat(allConceptsMap.get(group));
                        }
                        allConceptsMap.set(group, resourceCodes);
                    }
                }
                // Match up the display groupings to their corresponding
                // group configurations.
                var groupConfigurationToResourceCodes = new Map();
                allConceptsMap.forEach(function (concepts, groupName) {
                    var groupConfiguration = groupMap.get(groupName);
                    // If there's no group configured for a clinical concept
                    // list, and the configuration was validated before running,
                    // we know that there is only one clinical concept in this
                    // group and that the group should be configured according
                    // to its attributes.
                    if (!groupConfiguration) {
                        groupConfiguration = new GroupConfiguration(groupName, _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_2__["ChartType"].LINE, true, concepts[0].displayGrouping);
                    }
                    groupConfigurationToResourceCodes.set(groupConfiguration, concepts);
                });
                return groupConfigurationToResourceCodes;
            });
        });
    }
    ResourceCodeCreator_1 = ResourceCodeCreator;
    /**
     * Creates a ResourceCode. The type of ResourceCode is determined by the
     * passed in displayGrouping.
     *
     * @param displayGrouping DisplayGrouping for the ResourceCode
     * @param concept
     */
    ResourceCodeCreator.prototype.createResourceCode = function (displayGrouping, concept) {
        var showByDefault = concept.showByDefault ? concept.showByDefault : false;
        var displayBounds = concept.displayBounds ?
            [concept.displayBounds.lower, concept.displayBounds.upper] :
            undefined;
        var forceDisplayBounds = concept.forceDisplayBounds ? concept.forceDisplayBounds : false;
        if (displayGrouping === _resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_6__["radiology"]) {
            return new _resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_5__["DiagnosticReportCode"](concept.codeString, displayGrouping, concept.displayName, showByDefault, displayBounds, forceDisplayBounds);
        }
        else if (displayGrouping === _resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_6__["microbio"]) {
            return new _resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_4__["BCHMicrobioCode"](concept.codeString, displayGrouping, concept.displayName, showByDefault, displayBounds, forceDisplayBounds);
        }
        else if ([_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_6__["antibiotics"], _resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_6__["antifungals"], _resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_6__["antivirals"]].includes(displayGrouping)) {
            return new _resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_8__["RxNormCode"](concept.codeString, displayGrouping, concept.displayName, showByDefault, displayBounds, forceDisplayBounds);
        }
        else {
            return new _resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_7__["LOINCCode"](concept.codeString, displayGrouping, concept.displayName, showByDefault, displayBounds, forceDisplayBounds);
        }
    };
    /**
     * Reads in a JSON file and creates clinical concepts for each listed
     * configuration. Returns a map of listed display groupings to their
     * corresponding clinical concepts.
     */
    ResourceCodeCreator.prototype.createConcepts = function (displayGrouping, json) {
        var groupToConcept = new Map();
        for (var _i = 0, json_1 = json; _i < json_1.length; _i++) {
            var concept = json_1[_i];
            var code = this.createResourceCode(displayGrouping, concept);
            // Concepts with innerComponentOnly=true are "components" of other
            // concepts. (See
            // http://hl7.org/fhir/DSTU2/observation-definitions.html#Observation.component
            // for more information.) In order for us to display these inner
            // components, the Resource Code needs to be created, but we do not
            // explicitly add them to a Resource Group.
            if (concept.innerComponentOnly) {
                continue;
            }
            // If the concept has no higher level grouping, then use its display
            // name as the proxy for its grouping.
            if (!concept.groupNames) {
                concept.groupNames = [concept.displayName];
            }
            for (var _a = 0, _b = concept.groupNames; _a < _b.length; _a++) {
                var groupName = _b[_a];
                var concepts = groupToConcept.get(groupName) || [];
                concepts.push(code);
                groupToConcept.set(groupName, concepts);
            }
        }
        return groupToConcept;
    };
    /**
     * Reads in a JSON file for display group configurations and maps
     * display group names to simple chart configuration attributes.
     */
    ResourceCodeCreator.prototype.createGroupConfigurations = function (displayGrouping, json) {
        return json.map(function (group) {
            return [group.groupName,
                new GroupConfiguration(group.groupName, ResourceCodeCreator_1.stringToChartType[group.graphType], group.displayGroupOnSameAxis, displayGrouping, group.parentGroupName)];
        });
    };
    var ResourceCodeCreator_1;
    ResourceCodeCreator.stringToChartType = {
        'SCATTER': _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_2__["ChartType"].SCATTER,
        'STEP': _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_2__["ChartType"].STEP,
        'MICROBIO': _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_2__["ChartType"].MICROBIO,
        'DIAGNOSTIC': _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_2__["ChartType"].DIAGNOSTIC,
        'LINE': _graphs_graphtypes_graph_graph_component__WEBPACK_IMPORTED_MODULE_2__["ChartType"].LINE
    };
    ResourceCodeCreator = ResourceCodeCreator_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpClient"],
            _concept_file_configuration__WEBPACK_IMPORTED_MODULE_3__["ConceptFileConfiguration"]])
    ], ResourceCodeCreator);
    return ResourceCodeCreator;
}());



/***/ }),

/***/ "./src/app/conceptmappings/resource-code-manager.ts":
/*!**********************************************************!*\
  !*** ./src/app/conceptmappings/resource-code-manager.ts ***!
  \**********************************************************/
/*! exports provided: documentReferenceLoinc, ResourceCodeManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "documentReferenceLoinc", function() { return documentReferenceLoinc; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceCodeManager", function() { return ResourceCodeManager; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _graphs_graphtypes_axis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../graphs/graphtypes/axis */ "./src/app/graphs/graphtypes/axis.ts");
/* harmony import */ var _graphs_graphtypes_axis_group__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../graphs/graphtypes/axis-group */ "./src/app/graphs/graphtypes/axis-group.ts");
/* harmony import */ var _annotation_mapping__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./annotation-mapping */ "./src/app/conceptmappings/annotation-mapping.ts");
/* harmony import */ var _resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resource-codes/bch-microbio-code */ "./src/app/conceptmappings/resource-codes/bch-microbio-code.ts");
/* harmony import */ var _resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resource-codes/diagnostic-report-code */ "./src/app/conceptmappings/resource-codes/diagnostic-report-code.ts");
/* harmony import */ var _resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resource-codes/loinc-code */ "./src/app/conceptmappings/resource-codes/loinc-code.ts");
/* harmony import */ var _resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resource-codes/rx-norm */ "./src/app/conceptmappings/resource-codes/rx-norm.ts");
/* harmony import */ var _resource_codes_rx_norm_group__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./resource-codes/rx-norm-group */ "./src/app/conceptmappings/resource-codes/rx-norm-group.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











// We declare a new LOINCCode referencing a DocumentReference, but do not
// include it in the groupings below because it is not graphed/displayed in the
// configuration sidebar.
var documentReferenceLoinc = new _resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_7__["LOINCCode"]('68608-9', undefined, 'Summary', true);
/**
 * ResourceCodeManager is the centralized class where other components can
 * look to find an exhaustive listing of all the resource code groups that the
 * application may display.
 */
var ResourceCodeManager = /** @class */ (function () {
    function ResourceCodeManager(sanitizer) {
        this.sanitizer = sanitizer;
    }
    ResourceCodeManager_1 = ResourceCodeManager;
    /**
     * Determines ResourceCodeGroup type from the displayGrouping passed in.
     *
     * @param displayGrouping DisplayGroup to create ResourceCodeGroups with
     * @param fhirService FhirService to create ResourceCodeGroups with
     * @param chartType ChartType to create ResourceCodeGroups with
     * @param sameAxis Whether all the concepts should be shown on the same axis
     *     or not.
     * @param groupName The label for the AxisGroup
     * @param conceptList List of concepts to be included in the AxisGroup.
     */
    ResourceCodeManager.prototype.createResourceGroups = function (displayGrouping, fhirService, chartType, sameAxis, groupName, conceptList) {
        var axisGroups = new Map();
        // if all concepts should be shown on the same axis, we only have one axis
        // that contains all concepts from the concept list.
        if (sameAxis) {
            axisGroups.set(groupName, conceptList);
            // otherwise we need an axis for each concept with the label being the
            // concept's label.
        }
        else {
            conceptList.forEach(function (concept) {
                axisGroups.set(concept.label, [concept]);
            });
        }
        var resourceGroups = new Array();
        axisGroups.forEach(function (concepts, label) {
            var group;
            if (concepts[0] instanceof _resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_7__["LOINCCode"]) {
                group = new _resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_7__["LOINCCodeGroup"](fhirService, label, concepts, displayGrouping, chartType);
            }
            else if (concepts[0] instanceof _resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_8__["RxNormCode"]) {
                group = new _resource_codes_rx_norm_group__WEBPACK_IMPORTED_MODULE_9__["RxNormCodeGroup"](fhirService, label, concepts, displayGrouping, chartType);
            }
            else if (concepts[0] instanceof _resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_6__["DiagnosticReportCode"]) {
                group = new _resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_6__["DiagnosticReportCodeGroup"](fhirService, label, concepts, displayGrouping, chartType);
            }
            else if (concepts[0] instanceof _resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_5__["BCHMicrobioCode"]) {
                group = new _resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_5__["BCHMicrobioCodeGroup"](fhirService, label, concepts, displayGrouping, chartType);
            }
            if (group) {
                resourceGroups.push(group);
            }
        });
        return resourceGroups;
    };
    /**
     * Creates all AxisGroups.
     * @param resourceGroupMap Mapping from Axis Group label to the list of
     *     ResourceCodeGroups that should be included in the axis group.
     * @param fhirService FhirService to create Axes with.
     * @param resourceCodeCreator ResourceCodeCreator to get the group
     *     configurations
     * @returns List of AxisGroups
     */
    ResourceCodeManager.prototype.createAxisGroups = function (resourceGroupMap, fhirService, resourceCodeCreator) {
        var _this = this;
        return resourceCodeCreator.loadAllGroups.then(function (groupConfigurationMapping) {
            // mapping of Axis group name to the list of axes in that group. Axes
            // may come from different resource Groups in the case of medications so
            // we need to keep track of the mapping and create the axis group after
            // creating all of the axes.
            var axisGroupMapping = new Map();
            resourceGroupMap.forEach(function (resourceGroupList, groupName) {
                var _a;
                // some resources are creating only for the purpose of annotations.
                // These have an undefined chartType. We filter these resource groups
                // out because they should not be included in AxisGroups.
                var axes = resourceGroupList
                    .filter(function (resourceGroup) { return resourceGroup.chartType !== undefined; })
                    .map(function (resourceGroup) { return new _graphs_graphtypes_axis__WEBPACK_IMPORTED_MODULE_2__["Axis"](fhirService, _this.sanitizer, resourceGroup, resourceGroup.label); });
                if (axes.length > 0) {
                    var axisGroupName = groupName;
                    var groupConfig = groupConfigurationMapping.get(groupName);
                    // if a Resource Group has a parent group (such as Medication
                    // Administrations and Medication Monitoring), we want the Axis Group
                    // name to be the parent group's name.
                    if (groupConfig && groupConfig.parentGroupName) {
                        axisGroupName = groupConfig.parentGroupName;
                    }
                    if (!axisGroupMapping.has(axisGroupName)) {
                        axisGroupMapping.set(axisGroupName, new Array());
                    }
                    (_a = axisGroupMapping.get(axisGroupName)).push.apply(_a, axes);
                }
            });
            var axisGroups = new Array();
            axisGroupMapping.forEach(function (axisList, axisGroupName) {
                // if the group is in the group configuration mapping, we use that
                // display group. Otherwise we leave the display group to be inferred
                // during AxisGroup creation.
                var displayGroup = groupConfigurationMapping.has(axisGroupName) ?
                    groupConfigurationMapping.get(axisGroupName).displayGrouping :
                    undefined;
                axisGroups.push(new _graphs_graphtypes_axis_group__WEBPACK_IMPORTED_MODULE_3__["AxisGroup"](axisList, axisGroupName, displayGroup));
            });
            return axisGroups;
        });
    };
    /**
     * Creates a mapping of group names to a list of ResourceCodeGroups.
     * Creates all ResourceCodes and ResourceCodeGroups according to the
     * ResourceCodeCreator.
     *
     * @param fhirService the FhirService instance to create ResourceCodeGroups
     *     with.
     * @param resourceCodeCreator: ResourceCodeCreator instance
     * @returns Promise that when resolves gives a mapping from group name to
     * the list of ResourceCodeGroups in that group.
     */
    ResourceCodeManager.prototype.getResourceCodeGroups = function (fhirService, resourceCodeCreator) {
        var _this = this;
        return resourceCodeCreator.loadAllConcepts.then(function (groupConfigurationToResourceCodes) {
            var groupNameToResourceGroups = new Map();
            groupConfigurationToResourceCodes.forEach(function (codeList, config) {
                var resourceGroups = _this.createResourceGroups(config.displayGrouping, fhirService, config.chartType, config.showOnSameAxis, config.groupName, codeList);
                groupNameToResourceGroups.set(config.groupName, resourceGroups);
            });
            return groupNameToResourceGroups;
        });
    };
    /**
     * Annotates ResourceCodeGroups that require additional information.
     * All ResourceCodeGroups need to be created before this method is called,
     * otherwise the group to annotate or the reference group may not be
     * created yet.
     * @param: List of all ResourceCodeGroups that were created.
     */
    ResourceCodeManager.prototype.annotateResourceGroups = function (resourceGroups) {
        for (var _i = 0, ANNOTATION_CONFIGURATION_1 = _annotation_mapping__WEBPACK_IMPORTED_MODULE_4__["ANNOTATION_CONFIGURATION"]; _i < ANNOTATION_CONFIGURATION_1.length; _i++) {
            var annotation = ANNOTATION_CONFIGURATION_1[_i];
            var groups = resourceGroups.get(annotation.groupName);
            var refGroup = resourceGroups.get(annotation.refGroup);
            if ((!groups || !refGroup) || (refGroup.length > 1)) {
                continue;
            }
            for (var _a = 0, groups_1 = groups; _a < groups_1.length; _a++) {
                var group = groups_1[_a];
                // Right now we only support annotating LOINCCodeGroups; could be
                // extended in the future.
                if (group instanceof _resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_7__["LOINCCodeGroup"]) {
                    group.setMakeAnnotated(annotation.makeAnnotatedFunction(refGroup[0]));
                }
            }
        }
    };
    /**
     * Returns a map where the key is a clinical concept group and the value is
     * a list of axis groups belonging to the clinical concept group.
     */
    ResourceCodeManager.prototype.getDisplayGroupMapping = function (fhirService, resourceCodeCreator) {
        var _this = this;
        if (!ResourceCodeManager_1.displayGroupMapping) {
            ResourceCodeManager_1.displayGroupMapping =
                this.getResourceCodeGroups(fhirService, resourceCodeCreator)
                    .then(function (resourceGroupMap) {
                    _this.annotateResourceGroups(resourceGroupMap);
                    return _this
                        .createAxisGroups(resourceGroupMap, fhirService, resourceCodeCreator)
                        .then(function (axisGroups) {
                        var mapping = new Map();
                        for (var _i = 0, axisGroups_1 = axisGroups; _i < axisGroups_1.length; _i++) {
                            var group = axisGroups_1[_i];
                            if (mapping.has(group.displayGroup)) {
                                mapping.get(group.displayGroup).push(group);
                            }
                            else {
                                mapping.set(group.displayGroup, [group]);
                            }
                        }
                        return mapping;
                    });
                });
        }
        return Promise.resolve(ResourceCodeManager_1.displayGroupMapping);
    };
    var ResourceCodeManager_1;
    ResourceCodeManager = ResourceCodeManager_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"]])
    ], ResourceCodeManager);
    return ResourceCodeManager;
}());



/***/ }),

/***/ "./src/app/conceptmappings/resource-codes/bch-microbio-code.ts":
/*!*********************************************************************!*\
  !*** ./src/app/conceptmappings/resource-codes/bch-microbio-code.ts ***!
  \*********************************************************************/
/*! exports provided: BCHMicrobioCodeGroup, BCHMicrobioCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BCHMicrobioCodeGroup", function() { return BCHMicrobioCodeGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BCHMicrobioCode", function() { return BCHMicrobioCode; });
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _fhir_resources_annotated_annotated_microbio_report__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../fhir-resources/annotated/annotated-microbio-report */ "./src/app/fhir-resources/annotated/annotated-microbio-report.ts");
/* harmony import */ var _resource_code_group__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resource-code-group */ "./src/app/conceptmappings/resource-codes/resource-code-group.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



/**
 * Represents one or more LOINC codes that should be displayed together. In the
 * case of multiple LOINC codes in a group, you should provide a label for that
 * group.
 */
var BCHMicrobioCodeGroup = /** @class */ (function (_super) {
    __extends(BCHMicrobioCodeGroup, _super);
    function BCHMicrobioCodeGroup() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Gets a list of MicrobioReports corresponding to this code group. Each
     * item in the list has the same specimen type as the label of this group, and
     * each report's list of results has a code that is in this group's list of
     * codes.
     */
    BCHMicrobioCodeGroup.prototype.getResourceFromFhir = function (dateRange) {
        return this.fhirService.getMicrobioReports(this, dateRange)
            .then(function (reports) {
            return reports.map(function (report) { return new _fhir_resources_annotated_annotated_microbio_report__WEBPACK_IMPORTED_MODULE_1__["AnnotatedMicrobioReport"](report); });
        });
    };
    BCHMicrobioCodeGroup.prototype.formatRawResults = function (rawResults) {
        var microbioReports = rawResults.map(function (result) { return result.report; });
        return Promise.resolve(microbioReports);
    };
    /**
     * Returns whether there is any data available for this ResourceCode within
     * the fixed timescope of this app.
     * @override
     */
    BCHMicrobioCodeGroup.prototype.dataAvailableInAppTimeScope = function () {
        return this.fhirService.microbioReportsPresentWithCodes(this, src_constants__WEBPACK_IMPORTED_MODULE_0__["APP_TIMESPAN"]);
    };
    return BCHMicrobioCodeGroup;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_2__["AbstractResourceCodeGroup"]));

/**
 * Holds BCHMicrobioCode codes. BCH provides a custom mapping for their
 * microbiology data since retrieving it is not yet supported in the Cerner
 * FHIR API implementation.
 */
var BCHMicrobioCode = /** @class */ (function (_super) {
    __extends(BCHMicrobioCode, _super);
    function BCHMicrobioCode() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BCHMicrobioCode.prototype.dataAvailableInAppTimeScope = function (fhirService) {
        // This is not an elegant way of implementing this function but since it's
        // a non-standard API server we aren't going to put much effort into
        // developing it further at this point.
        return fhirService.microbioReportsPresentWithCodes(new BCHMicrobioCodeGroup(fhirService, this.label, [this], undefined, undefined), src_constants__WEBPACK_IMPORTED_MODULE_0__["APP_TIMESPAN"]);
    };
    BCHMicrobioCode.CODING_STRING = 'http://cerner.com/bch_mapping/';
    return BCHMicrobioCode;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_2__["ResourceCode"]));



/***/ }),

/***/ "./src/app/conceptmappings/resource-codes/diagnostic-report-code.ts":
/*!**************************************************************************!*\
  !*** ./src/app/conceptmappings/resource-codes/diagnostic-report-code.ts ***!
  \**************************************************************************/
/*! exports provided: DiagnosticReportCodeGroup, DiagnosticReportCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticReportCodeGroup", function() { return DiagnosticReportCodeGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticReportCode", function() { return DiagnosticReportCode; });
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _resource_code_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resource-code-group */ "./src/app/conceptmappings/resource-codes/resource-code-group.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Represents one or more DiagnosticReport codes that should be displayed
 * together. In the case of multiple DiagnosticReport codes in a group, you
 * should provide a label for that group.
 */
var DiagnosticReportCodeGroup = /** @class */ (function (_super) {
    __extends(DiagnosticReportCodeGroup, _super);
    function DiagnosticReportCodeGroup() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Gets a list of AnnotatedDiagnosticReports corresponding to this code group.
     */
    DiagnosticReportCodeGroup.prototype.getResourceFromFhir = function (dateRange) {
        return this.fhirService.getAnnotatedDiagnosticReports(this, dateRange);
    };
    DiagnosticReportCodeGroup.prototype.formatRawResults = function (rawResults) {
        return Promise.resolve(rawResults);
    };
    /**
     * Returns whether there is any data available for this ResourceCode within
     * the fixed timescope of this app.
     * @override
     */
    DiagnosticReportCodeGroup.prototype.dataAvailableInAppTimeScope = function () {
        return this.fhirService.diagnosticReportsPresentWithCodes(this, src_constants__WEBPACK_IMPORTED_MODULE_0__["APP_TIMESPAN"]);
    };
    return DiagnosticReportCodeGroup;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_1__["AbstractResourceCodeGroup"]));

/**
 * Holds DiagnosticReport codes, which are technically LOINC codes. This is
 * not grouped with LOINC codes because Observations and DiagnosticReports
 * are inherently different in the Fhir and Cerner implementations.
 */
var DiagnosticReportCode = /** @class */ (function (_super) {
    __extends(DiagnosticReportCode, _super);
    function DiagnosticReportCode() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    // CODING_STRING could also equal http://loinc.org
    DiagnosticReportCode.prototype.dataAvailableInAppTimeScope = function (fhirService) {
        // Currently utilizing code that is very similar to BCHMicrobioCode
        return fhirService.diagnosticReportsPresentWithCodes(new DiagnosticReportCodeGroup(fhirService, this.label, [this], undefined, undefined), src_constants__WEBPACK_IMPORTED_MODULE_0__["APP_TIMESPAN"]);
    };
    DiagnosticReportCode.CODING_STRING = 'http://hl7.org/fhir/dstu2/valueset-report-codes.html';
    return DiagnosticReportCode;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_1__["ResourceCode"]));



/***/ }),

/***/ "./src/app/conceptmappings/resource-codes/display-grouping.ts":
/*!********************************************************************!*\
  !*** ./src/app/conceptmappings/resource-codes/display-grouping.ts ***!
  \********************************************************************/
/*! exports provided: ALL_DISPLAY_GROUPS_MAP, DisplayGrouping, labResult, vitalSign, antibiotics, antivirals, antifungals, microbio, posPrelimMB, negPrelimMB, posFinalMB, negFinalMB, posOtherNB, negOtherMB, radiology */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ALL_DISPLAY_GROUPS_MAP", function() { return ALL_DISPLAY_GROUPS_MAP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DisplayGrouping", function() { return DisplayGrouping; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "labResult", function() { return labResult; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "vitalSign", function() { return vitalSign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "antibiotics", function() { return antibiotics; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "antivirals", function() { return antivirals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "antifungals", function() { return antifungals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "microbio", function() { return microbio; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "posPrelimMB", function() { return posPrelimMB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negPrelimMB", function() { return negPrelimMB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "posFinalMB", function() { return posFinalMB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negFinalMB", function() { return negFinalMB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "posOtherNB", function() { return posOtherNB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negOtherMB", function() { return negOtherMB; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "radiology", function() { return radiology; });
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../theme/verily_colors */ "./src/app/theme/verily_colors.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.


var ALL_DISPLAY_GROUPS_MAP = new Map();
/**
 * Represents the category that a certain chart's data might fall into, for
 * example a MedicationConcept such as "Antibiotic" or a ClinicalConcept such as
 * "Lab result"
 */
var DisplayGrouping = /** @class */ (function () {
    function DisplayGrouping(label, color, outline) {
        this.label = label;
        var tempColor = color;
        if (color === undefined) {
            tempColor = _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["getDataColors"]()[DisplayGrouping.colorIdx];
            DisplayGrouping.colorIdx =
                (DisplayGrouping.colorIdx + 1) % _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["getDataColors"]().length;
        }
        this.fill = tempColor;
        this.outline = outline ? outline : tempColor;
        ALL_DISPLAY_GROUPS_MAP.set(label, this);
    }
    DisplayGrouping.colorIdx = 0;
    return DisplayGrouping;
}());

var labResult = new DisplayGrouping('Lab Results', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["LIME"]);
var vitalSign = new DisplayGrouping('Vital Signs', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["ORANGE"]);
var antibiotics = new DisplayGrouping('Antibiotics', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["TURQUOISE"]);
var antivirals = new DisplayGrouping('Antivirals', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["GOLD"]);
var antifungals = new DisplayGrouping('Antifungals', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["GREEN"]);
var microbio = new DisplayGrouping('Microbiology', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["CYAN"]);
// We declare more DisplayGroupings related to Microbiology results that are
// used to classify points on the Microbiology chart.
var posPrelimMB = new DisplayGrouping('Check Result Preliminary', color__WEBPACK_IMPORTED_MODULE_0__('#e4e2e2'), _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["ABNORMAL"]);
var negPrelimMB = new DisplayGrouping('Negative Preliminary', color__WEBPACK_IMPORTED_MODULE_0__('#e4e2e2'), _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["BLUE_A700"]);
var posFinalMB = new DisplayGrouping('Check Result Final', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["ABNORMAL"]);
var negFinalMB = new DisplayGrouping('Negative Final', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["BLUE_A700"]);
// We declare DisplayGroupings that correspond to report statuses that we might
// encounter rarely.
var posOtherNB = new DisplayGrouping('Check Result, Other', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["DEEP_GOLD"]);
var negOtherMB = new DisplayGrouping('Negative, Other', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["DEEP_GOLD"]);
// Radiology Report categories
var radiology = new DisplayGrouping('Radiology', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["PINK_900"]);


/***/ }),

/***/ "./src/app/conceptmappings/resource-codes/loinc-code.ts":
/*!**************************************************************!*\
  !*** ./src/app/conceptmappings/resource-codes/loinc-code.ts ***!
  \**************************************************************/
/*! exports provided: LOINCCode, LOINCCodeGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOINCCode", function() { return LOINCCode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LOINCCodeGroup", function() { return LOINCCodeGroup; });
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _fhir_resources_annotated_annotated_observation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../fhir-resources/annotated/annotated-observation */ "./src/app/fhir-resources/annotated/annotated-observation.ts");
/* harmony import */ var _fhir_resources_sets_observation_set__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../fhir-resources/sets/observation-set */ "./src/app/fhir-resources/sets/observation-set.ts");
/* harmony import */ var _resource_code_group__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resource-code-group */ "./src/app/conceptmappings/resource-codes/resource-code-group.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();





/**
 * Holds LOINC codes.
 */
var LOINCCode = /** @class */ (function (_super) {
    __extends(LOINCCode, _super);
    function LOINCCode() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LOINCCode.prototype.dataAvailableInAppTimeScope = function (fhirService) {
        return fhirService.observationsPresentWithCode(this, src_constants__WEBPACK_IMPORTED_MODULE_0__["APP_TIMESPAN"]);
    };
    LOINCCode.CODING_STRING = 'http://loinc.org';
    return LOINCCode;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_3__["ResourceCode"]));

/**
 * Represents one or more LOINC codes that should be displayed together. In the
 * case of multiple LOINC codes in a group, you should provide a label for that
 * group.
 */
var LOINCCodeGroup = /** @class */ (function (_super) {
    __extends(LOINCCodeGroup, _super);
    function LOINCCodeGroup(
    /** FHIR service for retrieving data */
    fhirService, 
    /** The label for this resource code group. */
    label, 
    /** The resource codes to display on this Axis. */
    resourceCodes, 
    /** The display grouping for this resource code group. */
    displayGrouping, 
    /** The chart type for this Axis. */
    chartType, 
    /**
     * The (optional) function that will make an observation into an
     * AnnotatedObservation so that the graph can show the appropriate
     * tooltip.
     */
    makeAnnotated) {
        var _this = _super.call(this, fhirService, label, resourceCodes, displayGrouping, chartType) || this;
        _this.fhirService = fhirService;
        _this.label = label;
        _this.resourceCodes = resourceCodes;
        _this.displayGrouping = displayGrouping;
        _this.chartType = chartType;
        _this.makeAnnotated = makeAnnotated;
        return _this;
    }
    LOINCCodeGroup.prototype.setMakeAnnotated = function (makeAnnotatedFunction) {
        this.makeAnnotated = makeAnnotatedFunction;
    };
    /**
     * Gets one ObservationSet for each LOINCCode in the rawResults, and returns
     * a list of those ObservationSets.
     * @param rawResults: List of AnnotatedObservations to group into
     *     ObservationSets
     * @returns: list of ObservationSets. One ObservationSet for each LOINCCode
     * found in the rawResults.
     */
    LOINCCodeGroup.prototype.formatRawResults = function (rawResults) {
        var mapObs = new Map();
        var maxPrecision = 0;
        for (var _i = 0, rawResults_1 = rawResults; _i < rawResults_1.length; _i++) {
            var annotatedObservation = rawResults_1[_i];
            var observation = annotatedObservation.observation;
            // From this point on, each observation should have a value,
            // result, or interpretation. All observations that just had
            // innerComponents have been flattened out.
            var obsList = mapObs.get(observation.label);
            if (!obsList) {
                obsList = new Array();
            }
            obsList.push(annotatedObservation);
            if (observation.precision > maxPrecision) {
                maxPrecision = observation.precision;
            }
            mapObs.set(observation.label, obsList);
        }
        this.precision = maxPrecision;
        var doubleAnnotationArray = Array.from(mapObs.values());
        return Promise.all(doubleAnnotationArray.map(function (singleAnnotationArray) {
            return Promise.all(singleAnnotationArray)
                .then(function (resolvedAnnotations) {
                return new _fhir_resources_sets_observation_set__WEBPACK_IMPORTED_MODULE_2__["ObservationSet"](resolvedAnnotations);
            });
        }));
    };
    /**
     * Gets list of Observations from the FHIR server and makes them annotated
     * if makeAnnotated function is defined.
     * If an Observation contains "inner components", this returns separate
     * Observations for those.
     * @param dateRange: date range to get results from FHIR for
     * @returns: List of Annotated Observations
     */
    LOINCCodeGroup.prototype.getResourceFromFhir = function (dateRange) {
        var _this = this;
        return this.fhirService.getObservationsForCodeGroup(this, dateRange)
            .then(function (observationDoubleArray) {
            // Unnest the inner and outer observations into one flattened
            // array per concept group.
            return observationDoubleArray.map(function (obsSingleArray) {
                return Array.from(obsSingleArray)
                    .reduce(function (acc, observation) {
                    // The outer component may not have a
                    // value or result.
                    if (observation.value || observation.result ||
                        observation.interpretation) {
                        acc.push(observation);
                    }
                    // Add separate ObservationLists for
                    // each inner component.
                    if (observation.innerComponents.length > 0) {
                        for (var _i = 0, _a = observation.innerComponents; _i < _a.length; _i++) {
                            var innerComponent = _a[_i];
                            acc.push(innerComponent);
                        }
                    }
                    return acc;
                }, []);
            });
        }, function (rejection) {
            // If there is any error with constructing an Observation for any
            // code in this code group, throw the error.
            throw rejection;
        })
            .then(function (flattened) {
            var resultList = new Array();
            flattened.forEach(function (conceptList) {
                for (var _i = 0, conceptList_1 = conceptList; _i < conceptList_1.length; _i++) {
                    var observation = conceptList_1[_i];
                    if (_this.makeAnnotated) {
                        resultList.push(_this.makeAnnotated(observation, dateRange));
                    }
                    else {
                        resultList.push(Promise.resolve(new _fhir_resources_annotated_annotated_observation__WEBPACK_IMPORTED_MODULE_1__["AnnotatedObservation"](observation)));
                    }
                }
            });
            return Promise.all(resultList);
        });
    };
    return LOINCCodeGroup;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_3__["AbstractResourceCodeGroup"]));



/***/ }),

/***/ "./src/app/conceptmappings/resource-codes/resource-code-group.ts":
/*!***********************************************************************!*\
  !*** ./src/app/conceptmappings/resource-codes/resource-code-group.ts ***!
  \***********************************************************************/
/*! exports provided: ResourceCode, ResourceCodeGroup, AbstractResourceCodeGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceCode", function() { return ResourceCode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceCodeGroup", function() { return ResourceCodeGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbstractResourceCodeGroup", function() { return AbstractResourceCodeGroup; });
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
/**
 * A code specifying the medication or observation type as well as the specific
 * medication or observation.
 */
var ResourceCode = /** @class */ (function () {
    function ResourceCode(codeString, displayGrouping, label, showByDefault, 
    /* Absolute axis bounds for the graph displaying this ResourceCode. */
    displayBounds, 
    /* Whether or not to force the axis bounds, even if a smaller range
       containing all the data can be calculated. */
    forceDisplayBounds) {
        if (showByDefault === void 0) { showByDefault = false; }
        if (forceDisplayBounds === void 0) { forceDisplayBounds = false; }
        this.codeString = codeString;
        this.displayGrouping = displayGrouping;
        this.label = label;
        this.showByDefault = showByDefault;
        this.displayBounds = displayBounds;
        this.forceDisplayBounds = forceDisplayBounds;
        var matchingCode = ResourceCode.CODE_STRING_TO_CODE[codeString];
        if (matchingCode && matchingCode.label !== label) {
            throw Error('A Resource Code has already been created with this code string but a different label: ' +
                codeString);
        }
        ResourceCode.CODE_STRING_TO_CODE[codeString] = matchingCode || this;
    }
    ResourceCode.fromCodeString = function (code) {
        return ResourceCode.CODE_STRING_TO_CODE[code];
    };
    ResourceCode.CODE_STRING_TO_CODE = {};
    return ResourceCode;
}());

/**
 * A class that holds a group of resource codes that should be displayed on
 * the same Axis together.
 */
var ResourceCodeGroup = /** @class */ (function () {
    function ResourceCodeGroup(fhirService, 
    /** The label for this resource code group. */
    label, 
    /** The resource codes to display on this Axis. */
    resourceCodes, 
    /** The display grouping for this resource code group. */
    displayGrouping, 
    /** The chart type for this Axis. */
    chartType) {
        this.fhirService = fhirService;
        this.label = label;
        this.resourceCodes = resourceCodes;
        this.displayGrouping = displayGrouping;
        this.chartType = chartType;
        // The number of decimal places to show for any value associated with this
        // resource group. The default is 0, to minimize errors caused by unnecessary
        // trailing zeros.
        this.precision = 0;
        /**
         * When we've decided whether this resource code group has data available
         * in the app, it doesn't change over the course of the app lifetime, so we
         * cache it.
         */
        this.resolvedDataAvailableInAppTimeScope = undefined;
        this.showByDefault = this.resourceCodes.some(function (code) { return code.showByDefault; });
    }
    /**
     * Returns whether there is any data available for this ResourceCode within
     * the fixed timescope of this app.
     */
    ResourceCodeGroup.prototype.dataAvailableInAppTimeScope = function () {
        var _this = this;
        if (this.resolvedDataAvailableInAppTimeScope !== undefined) {
            return Promise.resolve(this.resolvedDataAvailableInAppTimeScope);
        }
        return Promise
            .all(this.resourceCodes.map(function (rc) { return rc.dataAvailableInAppTimeScope(_this.fhirService); }))
            .then(function (bools) {
            _this.resolvedDataAvailableInAppTimeScope =
                bools.reduce(function (result, next) { return result = result || next; });
            return _this.resolvedDataAvailableInAppTimeScope;
        });
    };
    return ResourceCodeGroup;
}());

var AbstractResourceCodeGroup = /** @class */ (function (_super) {
    __extends(AbstractResourceCodeGroup, _super);
    function AbstractResourceCodeGroup() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Looks in the cache to see if data for this time interval exists. If not,
     * calls the implementing class's getResourceFromFhir function and caches
     * its data, then returns the data for the given time interval.
     */
    AbstractResourceCodeGroup.prototype.getResourceSet = function (dateRange) {
        var _this = this;
        return this.getResourceFromFhir(dateRange).then(function (rawResults) {
            return _this.formatRawResults(rawResults);
        });
    };
    return AbstractResourceCodeGroup;
}(ResourceCodeGroup));



/***/ }),

/***/ "./src/app/conceptmappings/resource-codes/rx-norm-group.ts":
/*!*****************************************************************!*\
  !*** ./src/app/conceptmappings/resource-codes/rx-norm-group.ts ***!
  \*****************************************************************/
/*! exports provided: RxNormCodeGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RxNormCodeGroup", function() { return RxNormCodeGroup; });
/* harmony import */ var _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../fhir-resources/medication-order */ "./src/app/fhir-resources/medication-order.ts");
/* harmony import */ var _resource_code_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resource-code-group */ "./src/app/conceptmappings/resource-codes/resource-code-group.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * Represents one or more RxNorm codes that should be displayed together. In the
 * case of multiple RxNorm codes in a group, you should provide a label for that
 * group.
 */
var RxNormCodeGroup = /** @class */ (function (_super) {
    __extends(RxNormCodeGroup, _super);
    function RxNormCodeGroup() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.medicationOrderCache = new Map();
        return _this;
    }
    /**
     * Gets all Medication Administrations in this group from FHIR for the given
     * date range.
     * @param dateRange date range to get medication administrations for
     */
    RxNormCodeGroup.prototype.getResourceFromFhir = function (dateRange) {
        return this.fhirService.getMedicationAdministrationsWithCodeGroup(this, dateRange);
    };
    /**
     * Fills out the order and administration information for each
     * RxNormCode in this group, and returns a list of the populated RxNormCodes.
     * This is a roundabout process because the Cerner implementation of the
     * FHIR standard doesn't allow for searching MedicationOrders by RxNorm code,
     * so we have to search for MedicationAdministrations by RxNorm code and work
     * up from there.
     */
    RxNormCodeGroup.prototype.formatRawResults = function (rawResults) {
        var groupedByOrder = this.groupAdministrationsByOrderId(rawResults);
        return this.getMedicationOrdersAndMapToMed(groupedByOrder);
    };
    /**
     * Takes a list of lists of MedicationAdministrations and groups them by their
     * order IDs. Each list represents a set of MedicationAdministrations for a
     * specific RxNorm, but they're not arranged by order. For example:
     *
     * [[admin1_rxnorm1_orderA, admin2_rxnorm1_orderB, admin3_rxnorm1_orderB],
     *  [admin1_rxnorm2_orderC, admin2_rxnorm2_orderC],
     *  [admin1_rxnorm3_orderD]]
     *
     * would yield:
     *
     * {orderA: [admin1_rxnorm1_orderA],
     *  orderB: [admin2_rxnorm1_orderB, admin3_rxnorm1_orderB],
     *  orderC: [admin1_rxnorm2_orderC, admin2_rxnorm2_orderC],
     *  orderD: [admin1_rxnorm3_orderD]
     * }
     * @param medAdmins A list of lists of MedicationAdministrations. See above.
     * @returns A map of order IDs to a list of corresponding
     *     MedicationAdministrations.
     */
    RxNormCodeGroup.prototype.groupAdministrationsByOrderId = function (medAdmins) {
        var groupedByOrder = new Map();
        // Group medication administrations by medication order.
        groupedByOrder = medAdmins.reduce(function (groups, medAdmin) {
            // Append this administration to whatever order list it belongs to.
            var orderId = medAdmin.medicationOrderId;
            if (!groups.has(orderId)) {
                groups.set(orderId, new Array());
            }
            groups.set(orderId, groups.get(orderId).concat(medAdmin));
            return groups;
        }, 
        // Use whatever existed in groupedByOrder prior to this iteration as
        // the basis for the reducer to add to.
        groupedByOrder);
        return groupedByOrder;
    };
    /**
     * Transforms a map with keys of MedicationOrder IDs and values of
     * MedicationAdministrations to a list of RxNormCodes, with the RxNormCodes
     * containing their corresponding MedicationOrders, and the medicationOrders
     * containing their corresponding MedicationAdministrations. For example:
     *
     * {orderA: [admin1_rxnorm1_orderA],
     *  orderB: [admin2_rxnorm1_orderB, admin3_rxnorm1_orderB],
     *  orderC: [admin1_rxnorm2_orderC, admin2_rxnorm2_orderC],
     *  orderD: [admin1_rxnorm3_orderD]
     * }
     *
     * would yield:
     *
     *  [RxNorm1 = {orders:
     *     [OrderA {administrationsForOrder: [admin1_rxnorm1_orderA]},
     *      OrderB {administrationsForOrder: [admin2_rxnorm1_orderB,
     *                                        admin3_rxnorm1_orderB]}]}
     *   RxNorm2 = {orders:
     *      [OrderC {administrationsForOrder: [admin1_rxnorm2_orderC,
     *                                         admin2_rxnorm2_orderC]}]}
     *   RxNorm3 = {orders:
     *      [OrderD {administrationsForOrder: [admin1_rxnorm3_orderD]}]}
     *
     * @param groupedByOrder A map with keys of MedicationOrder IDs and values of
     *     MedicationAdministrations for those MedicationOrders.
     * @returns A list of RxNormCodes with orders populated
     * @throws Error if the incoming parameter has medication administrations that
     *     did not come from the same order for the same med
     */
    RxNormCodeGroup.prototype.getMedicationOrdersAndMapToMed = function (groupedByOrder) {
        var _this = this;
        var allPromises = Array.from(groupedByOrder.keys()).map(function (orderId) {
            if (_this.medicationOrderCache.has(orderId)) {
                return Promise.resolve(_this.medicationOrderCache.get(orderId));
            }
            else {
                return _this.fhirService.getMedicationOrderWithId(orderId).then(function (order) {
                    _this.medicationOrderCache.set(orderId, order);
                    return order;
                }, function (rejection) {
                    // If there are any errors getting a MedicationOrder for
                    // this RxNormCode[], throw the error.
                    throw rejection;
                });
            }
        });
        // Resolve all the promises and set the corresponding orders for each
        // RxNorm.
        var groupedByMed = new Map();
        return Promise.all(allPromises)
            .then(function (orders) {
            orders.map(function (order) {
                var orderId = order.orderId;
                var medicationAdminsForOrder = Array.from(groupedByOrder.get(orderId).values());
                // Verify all the administrations have the same RxNormCode and
                // same Order ID.
                var rxNormCodeSet = new Set(medicationAdminsForOrder.map(function (admin) { return admin.rxNormCode; }));
                if (rxNormCodeSet.size !== 1) {
                    throw Error('Administrations for order ' + orderId +
                        ' are for multiple RxNorms: ' +
                        Array.from(rxNormCodeSet.values()));
                }
                var orderSet = new Set(medicationAdminsForOrder.map(function (admin) { return admin.medicationOrderId; }));
                if (rxNormCodeSet.size !== 1) {
                    throw Error('Administrations for order ' + orderId +
                        ' report multiple order IDs: ' + Array.from(orderSet));
                }
                // Add the order to the map for the RxNorm code.
                var rxCode = rxNormCodeSet.values().next().value;
                var annotatedOrder = new _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_0__["AnnotatedMedicationOrder"](order, medicationAdminsForOrder);
                if (groupedByMed.has(rxCode)) {
                    groupedByMed.set(rxCode, groupedByMed.get(rxCode).concat(annotatedOrder));
                }
                else {
                    groupedByMed.set(rxCode, new Array(annotatedOrder));
                }
            }, function (rejection) {
                // If there are any errors constructing MedicationOrders for
                // this RxNormCode[], throw the error.
                throw rejection;
            });
        })
            .then(function (_) {
            Array.from(groupedByMed.entries()).forEach(function (medEntry) {
                var rxNorm = medEntry[0];
                var medOrders = medEntry[1];
                rxNorm.orders = new _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_0__["MedicationOrderSet"](medOrders);
            });
            // Return all the populated RxNorms.
            return Array.from(groupedByMed.keys());
        }, function (rejection) {
            // If any promise is rejected, throw the same rejection.
            throw rejection;
        });
    };
    return RxNormCodeGroup;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_1__["AbstractResourceCodeGroup"]));



/***/ }),

/***/ "./src/app/conceptmappings/resource-codes/rx-norm.ts":
/*!***********************************************************!*\
  !*** ./src/app/conceptmappings/resource-codes/rx-norm.ts ***!
  \***********************************************************/
/*! exports provided: MedicationConceptGroup, ANTIBIOTIC, MEDICATION_GROUPS, RxNormCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationConceptGroup", function() { return MedicationConceptGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ANTIBIOTIC", function() { return ANTIBIOTIC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MEDICATION_GROUPS", function() { return MEDICATION_GROUPS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RxNormCode", function() { return RxNormCode; });
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../theme/verily_colors */ "./src/app/theme/verily_colors.ts");
/* harmony import */ var _display_grouping__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./display-grouping */ "./src/app/conceptmappings/resource-codes/display-grouping.ts");
/* harmony import */ var _resource_code_group__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resource-code-group */ "./src/app/conceptmappings/resource-codes/resource-code-group.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




var MedicationConceptGroup = /** @class */ (function (_super) {
    __extends(MedicationConceptGroup, _super);
    function MedicationConceptGroup() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return MedicationConceptGroup;
}(_display_grouping__WEBPACK_IMPORTED_MODULE_2__["DisplayGrouping"]));

var ANTIBIOTIC = new MedicationConceptGroup('Antibiotic', _theme_verily_colors__WEBPACK_IMPORTED_MODULE_1__["DEEP_TURQUOISE"]);
var MEDICATION_GROUPS = [ANTIBIOTIC];
/**
 * Holds RXNorm codes and orders corresponding to them.
 */
var RxNormCode = /** @class */ (function (_super) {
    __extends(RxNormCode, _super);
    function RxNormCode() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    RxNormCode.prototype.dataAvailableInAppTimeScope = function (fhirService) {
        return fhirService.medicationsPresentWithCode(this, src_constants__WEBPACK_IMPORTED_MODULE_0__["APP_TIMESPAN"]);
    };
    RxNormCode.CODING_STRING = 'http://www.nlm.nih.gov/research/umls/rxnorm';
    return RxNormCode;
}(_resource_code_group__WEBPACK_IMPORTED_MODULE_3__["ResourceCode"]));



/***/ }),

/***/ "./src/app/data-selector-menu/data-selector-element/data-selector-element.component.css":
/*!**********************************************************************************************!*\
  !*** ./src/app/data-selector-menu/data-selector-element/data-selector-element.component.css ***!
  \**********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".configurationCard {\n  background-color: transparent;\n  border-left-style: solid;\n  border-left-width: 5px;\n  height: 40px !important;\n  padding: 3px;\n}\n\n\n.disableDragging {\n  color: gray;\n  cursor: not-allowed;\n  padding-top: 4px;\n}\n\n\n.listItem {\n  display: inline-block;\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  padding-left: 5px !important;\n}\n\n\n.label {\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  line-height: 15px;\n}\n\n\n.tinytext {\n  font-size: 12px;\n  line-height: 15px;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZGF0YS1zZWxlY3Rvci1tZW51L2RhdGEtc2VsZWN0b3ItZWxlbWVudC9kYXRhLXNlbGVjdG9yLWVsZW1lbnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDZCQUE2QjtFQUM3Qix3QkFBd0I7RUFDeEIsc0JBQXNCO0VBQ3RCLHVCQUF1QjtFQUN2QixZQUFZO0FBQ2Q7OztBQUdBO0VBQ0UsV0FBVztFQUNYLG1CQUFtQjtFQUNuQixnQkFBZ0I7QUFDbEI7OztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLDJCQUFtQjtFQUFuQix3QkFBbUI7RUFBbkIsbUJBQW1CO0VBQ25CLDRCQUE0QjtBQUM5Qjs7O0FBRUE7RUFDRSwyQkFBbUI7RUFBbkIsd0JBQW1CO0VBQW5CLG1CQUFtQjtFQUNuQixpQkFBaUI7QUFDbkI7OztBQUVBO0VBQ0UsZUFBZTtFQUNmLGlCQUFpQjtBQUNuQiIsImZpbGUiOiJzcmMvYXBwL2RhdGEtc2VsZWN0b3ItbWVudS9kYXRhLXNlbGVjdG9yLWVsZW1lbnQvZGF0YS1zZWxlY3Rvci1lbGVtZW50LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29uZmlndXJhdGlvbkNhcmQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyLWxlZnQtc3R5bGU6IHNvbGlkO1xuICBib3JkZXItbGVmdC13aWR0aDogNXB4O1xuICBoZWlnaHQ6IDQwcHggIWltcG9ydGFudDtcbiAgcGFkZGluZzogM3B4O1xufVxuXG5cbi5kaXNhYmxlRHJhZ2dpbmcge1xuICBjb2xvcjogZ3JheTtcbiAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgcGFkZGluZy10b3A6IDRweDtcbn1cblxuLmxpc3RJdGVtIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBoZWlnaHQ6IGZpdC1jb250ZW50O1xuICBwYWRkaW5nLWxlZnQ6IDVweCAhaW1wb3J0YW50O1xufVxuXG4ubGFiZWwge1xuICBoZWlnaHQ6IGZpdC1jb250ZW50O1xuICBsaW5lLWhlaWdodDogMTVweDtcbn1cblxuLnRpbnl0ZXh0IHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBsaW5lLWhlaWdodDogMTVweDtcbn1cbiJdfQ== */"

/***/ }),

/***/ "./src/app/data-selector-menu/data-selector-element/data-selector-element.component.html":
/*!***********************************************************************************************!*\
  !*** ./src/app/data-selector-menu/data-selector-element/data-selector-element.component.html ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"configurationCard {{axisGroup.dataAvailable ? 'enableDragging': 'disableDragging'}}\"\n  [style.border-left-color]=\"axisGroup.dataAvailable ? axisGroup.displayGroup.fill.hsl().string(): 'rgb(197, 185, 172)'\">\n  <!-- BOSTON_WARM_GRAY -->\n  <mat-list-item>\n    <div class=\"listItem\">\n      <div style=\"display:inline-block; vertical-align: middle;\">\n        <div class=\"label\">\n          {{axisGroup.label}}\n        </div>\n        <div class=\"tinytext\" *ngIf=\"axisGroup.dataAvailable === false\">\n          {{uiConstants.NO_DATA_AVAILABLE_TMPL + appTimeIntervalString}}\n        </div>\n      </div>\n    </div>\n  </mat-list-item>\n</div>\n"

/***/ }),

/***/ "./src/app/data-selector-menu/data-selector-element/data-selector-element.component.ts":
/*!*********************************************************************************************!*\
  !*** ./src/app/data-selector-menu/data-selector-element/data-selector-element.component.ts ***!
  \*********************************************************************************************/
/*! exports provided: DataSelectorElementComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSelectorElementComponent", function() { return DataSelectorElementComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _graphs_graphtypes_axis_group__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../graphs/graphtypes/axis-group */ "./src/app/graphs/graphtypes/axis-group.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



/**
 * Represents one element in a list or menu of ResourceCodesForCards
 * that can be added to the main CardContainer.
 */
var DataSelectorElementComponent = /** @class */ (function () {
    function DataSelectorElementComponent(uiConstants) {
        this.uiConstants = uiConstants;
        /**
         *  Hold an instance of the app time interval so we can display it in the HTML
         */
        this.appTimeIntervalString = src_constants__WEBPACK_IMPORTED_MODULE_1__["APP_TIMESPAN"].start.toFormat('MM/dd/yyyy') +
            ' and ' + src_constants__WEBPACK_IMPORTED_MODULE_1__["APP_TIMESPAN"].end.toFormat('MM/dd/yyyy');
        /**
         * Whether there is data available within the app timespan for this card.
         */
        this.dataAvailable = true;
    }
    DataSelectorElementComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // We have to wait until after view initialization so that the @Input
        // element binding happens.
        this.axisGroup.dataAvailableInAppTimeScope().then(function (available) {
            _this.dataAvailable = available;
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _graphs_graphtypes_axis_group__WEBPACK_IMPORTED_MODULE_2__["AxisGroup"])
    ], DataSelectorElementComponent.prototype, "axisGroup", void 0);
    DataSelectorElementComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-data-selector-element',
            template: __webpack_require__(/*! ./data-selector-element.component.html */ "./src/app/data-selector-menu/data-selector-element/data-selector-element.component.html"),
            styles: [__webpack_require__(/*! ./data-selector-element.component.css */ "./src/app/data-selector-menu/data-selector-element/data-selector-element.component.css")]
        }),
        __param(0, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [Object])
    ], DataSelectorElementComponent);
    return DataSelectorElementComponent;
}());



/***/ }),

/***/ "./src/app/data-selector-menu/data-selector-menu.component.css":
/*!*********************************************************************!*\
  !*** ./src/app/data-selector-menu/data-selector-menu.component.css ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".addCardInline {\n  color: rgb(248, 248, 248);\n  display: inline-block;\n  opacity: 0.15;\n  transition: opacity 0.3s;\n  /* Needed so that there's not enough space between the cards to hold the icon,\n  just enough to hold the line placeholder.*/\n  margin-bottom:-17px;\n  margin-top:-17px;\n  display: flex;\n  display: -ms-flexbox; /* For IE10 */\n  flex-direction: row;\n  -ms-flex-direction: row; /* For IE10 */\n  align-content: center;\n  -ms-flex-line-pack: center;  /* Align content: center conversion for IE10 */\n  justify-content: flex-start;\n  -ms-flex-pack: start;  /* Justify content: start conversion for IE10 */\n  align-items: center;\n  -ms-flex-align: center;  /* Align items: center conversion for IE10 */\n  flex: 1 1 0%;\n  -ms-flex: 1 1 0%; /* For IE10 */\n}\n\nspan {\n  border: 2px dashed rgb(248, 248, 248);\n  /* Only outline the bottom instead of all four sides.*/\n  border-style: none none dotted;\n  display: inline-block;\n  flex: 1 1 0%;\n  -ms-flex: 1 1 0%; /* For IE10 */\n}\n\n.addCardInline:hover {\n  opacity: 1;\n}\n\n.conceptSelector {\n  padding-left: 0px !important;\n  padding-right: 0px !important;\n  min-width: 200px;\n}\n\n.mainConceptSelector {\n  border-left-style: solid;\n  border-left-width: 5px;\n}\n\n::ng-deep .mat-menu-item  {\n  line-height: 20px !important;\n}\n\n::ng-deep .mat-list-item-content {\n  margin-top: 8px;\n}\n\n::ng-deep .mat-autocomplete-panel .mat-list-item-content {\n  margin-top: -8px; /* Styling for autocomplete menu items needs to be different.*/\n}\n\n::ng-deep .mat-option {\n  height: -webkit-fit-content !important;\n  height: -moz-fit-content !important;\n  height: fit-content !important;\n  overflow: visible !important;\n  padding: 0px !important;\n}\n\n.conceptForm {\n  margin-left: 10px;\n  margin-right: 10px;\n}\n\n::ng-deep .autoMenu.mat-menu-panel {\n  min-width: 300px;\n}\n\n.conceptFormField {\n  width: 100%;\n}\n\nbutton {\n  font-family: 'Work Sans', sans-serif;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZGF0YS1zZWxlY3Rvci1tZW51L2RhdGEtc2VsZWN0b3ItbWVudS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQXlCO0VBQ3pCLHFCQUFxQjtFQUNyQixhQUFhO0VBQ2Isd0JBQXdCO0VBQ3hCOzRDQUMwQztFQUMxQyxtQkFBbUI7RUFDbkIsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixvQkFBb0IsRUFBRSxhQUFhO0VBQ25DLG1CQUFtQjtFQUNuQix1QkFBdUIsRUFBRSxhQUFhO0VBQ3RDLHFCQUFxQjtFQUNyQiwwQkFBMEIsR0FBRyw4Q0FBOEM7RUFDM0UsMkJBQTJCO0VBQzNCLG9CQUFvQixHQUFHLCtDQUErQztFQUN0RSxtQkFBbUI7RUFDbkIsc0JBQXNCLEdBQUcsNENBQTRDO0VBQ3JFLFlBQVk7RUFDWixnQkFBZ0IsRUFBRSxhQUFhO0FBQ2pDOztBQUVBO0VBQ0UscUNBQXFDO0VBQ3JDLHNEQUFzRDtFQUN0RCw4QkFBOEI7RUFDOUIscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWixnQkFBZ0IsRUFBRSxhQUFhO0FBQ2pDOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLDZCQUE2QjtFQUM3QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx3QkFBd0I7RUFDeEIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGdCQUFnQixFQUFFLDhEQUE4RDtBQUNsRjs7QUFFQTtFQUNFLHNDQUE4QjtFQUE5QixtQ0FBOEI7RUFBOUIsOEJBQThCO0VBQzlCLDRCQUE0QjtFQUM1Qix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0Usb0NBQW9DO0FBQ3RDIiwiZmlsZSI6InNyYy9hcHAvZGF0YS1zZWxlY3Rvci1tZW51L2RhdGEtc2VsZWN0b3ItbWVudS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFkZENhcmRJbmxpbmUge1xuICBjb2xvcjogcmdiKDI0OCwgMjQ4LCAyNDgpO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG9wYWNpdHk6IDAuMTU7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcztcbiAgLyogTmVlZGVkIHNvIHRoYXQgdGhlcmUncyBub3QgZW5vdWdoIHNwYWNlIGJldHdlZW4gdGhlIGNhcmRzIHRvIGhvbGQgdGhlIGljb24sXG4gIGp1c3QgZW5vdWdoIHRvIGhvbGQgdGhlIGxpbmUgcGxhY2Vob2xkZXIuKi9cbiAgbWFyZ2luLWJvdHRvbTotMTdweDtcbiAgbWFyZ2luLXRvcDotMTdweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7IC8qIEZvciBJRTEwICovXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIC1tcy1mbGV4LWRpcmVjdGlvbjogcm93OyAvKiBGb3IgSUUxMCAqL1xuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIC1tcy1mbGV4LWxpbmUtcGFjazogY2VudGVyOyAgLyogQWxpZ24gY29udGVudDogY2VudGVyIGNvbnZlcnNpb24gZm9yIElFMTAgKi9cbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAtbXMtZmxleC1wYWNrOiBzdGFydDsgIC8qIEp1c3RpZnkgY29udGVudDogc3RhcnQgY29udmVyc2lvbiBmb3IgSUUxMCAqL1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAtbXMtZmxleC1hbGlnbjogY2VudGVyOyAgLyogQWxpZ24gaXRlbXM6IGNlbnRlciBjb252ZXJzaW9uIGZvciBJRTEwICovXG4gIGZsZXg6IDEgMSAwJTtcbiAgLW1zLWZsZXg6IDEgMSAwJTsgLyogRm9yIElFMTAgKi9cbn1cblxuc3BhbiB7XG4gIGJvcmRlcjogMnB4IGRhc2hlZCByZ2IoMjQ4LCAyNDgsIDI0OCk7XG4gIC8qIE9ubHkgb3V0bGluZSB0aGUgYm90dG9tIGluc3RlYWQgb2YgYWxsIGZvdXIgc2lkZXMuKi9cbiAgYm9yZGVyLXN0eWxlOiBub25lIG5vbmUgZG90dGVkO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIGZsZXg6IDEgMSAwJTtcbiAgLW1zLWZsZXg6IDEgMSAwJTsgLyogRm9yIElFMTAgKi9cbn1cblxuLmFkZENhcmRJbmxpbmU6aG92ZXIge1xuICBvcGFjaXR5OiAxO1xufVxuXG4uY29uY2VwdFNlbGVjdG9yIHtcbiAgcGFkZGluZy1sZWZ0OiAwcHggIWltcG9ydGFudDtcbiAgcGFkZGluZy1yaWdodDogMHB4ICFpbXBvcnRhbnQ7XG4gIG1pbi13aWR0aDogMjAwcHg7XG59XG5cbi5tYWluQ29uY2VwdFNlbGVjdG9yIHtcbiAgYm9yZGVyLWxlZnQtc3R5bGU6IHNvbGlkO1xuICBib3JkZXItbGVmdC13aWR0aDogNXB4O1xufVxuXG46Om5nLWRlZXAgLm1hdC1tZW51LWl0ZW0gIHtcbiAgbGluZS1oZWlnaHQ6IDIwcHggIWltcG9ydGFudDtcbn1cblxuOjpuZy1kZWVwIC5tYXQtbGlzdC1pdGVtLWNvbnRlbnQge1xuICBtYXJnaW4tdG9wOiA4cHg7XG59XG5cbjo6bmctZGVlcCAubWF0LWF1dG9jb21wbGV0ZS1wYW5lbCAubWF0LWxpc3QtaXRlbS1jb250ZW50IHtcbiAgbWFyZ2luLXRvcDogLThweDsgLyogU3R5bGluZyBmb3IgYXV0b2NvbXBsZXRlIG1lbnUgaXRlbXMgbmVlZHMgdG8gYmUgZGlmZmVyZW50LiovXG59XG5cbjo6bmctZGVlcCAubWF0LW9wdGlvbiB7XG4gIGhlaWdodDogZml0LWNvbnRlbnQgIWltcG9ydGFudDtcbiAgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDtcbiAgcGFkZGluZzogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5jb25jZXB0Rm9ybSB7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG59XG5cbjo6bmctZGVlcCAuYXV0b01lbnUubWF0LW1lbnUtcGFuZWwge1xuICBtaW4td2lkdGg6IDMwMHB4O1xufVxuXG4uY29uY2VwdEZvcm1GaWVsZCB7XG4gIHdpZHRoOiAxMDAlO1xufVxuXG5idXR0b24ge1xuICBmb250LWZhbWlseTogJ1dvcmsgU2FucycsIHNhbnMtc2VyaWY7XG59Il19 */"

/***/ }),

/***/ "./src/app/data-selector-menu/data-selector-menu.component.html":
/*!**********************************************************************!*\
  !*** ./src/app/data-selector-menu/data-selector-menu.component.html ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"addCardInline\">\n  <button mat-icon-button [matMenuTriggerFor]=\"masterMenu\" matTooltip=\"{{uiConstants.ADD_CARD_HERE}}\">\n    <mat-icon class=\"toolbarButton\">add_circle</mat-icon>\n  </button>\n  <span fxFlex>\n  </span>\n</div>\n<mat-menu #masterMenu=\"matMenu\" [overlapTrigger]=\"false\">\n  <ng-template matMenuContent>\n    <button mat-menu-item (click)=\"textbox()\">\n      <mat-icon>comment</mat-icon>\n      <span>{{uiConstants.ADD_ANNOTATION}}</span>\n    </button>\n    <button mat-menu-item (click)=\"customTimeline()\">\n      <mat-icon>show_chart</mat-icon>\n      <span>{{uiConstants.ADD_CUSTOM_TIMELINE}}</span>\n    </button>\n    <mat-divider></mat-divider>\n    <button mat-menu-item [matMenuTriggerFor]=\"conceptSelectorMenu\">\n      <mat-icon>add_to_photos</mat-icon>\n      <span>{{uiConstants.ADD_CHART}}</span>\n    </button>\n  </ng-template>\n</mat-menu>\n<mat-menu #conceptSelectorMenu=\"matMenu\" [style.padding]=\"0\">\n  <div aria-label=\"Concept Selector Menu\">\n  <ng-template matMenuContent>\n    <button mat-menu-item [matMenuTriggerFor]=\"menu\">\n      {{uiConstants.SEARCH_FOR_A_CONCEPT}}\n    </button>\n    <mat-divider></mat-divider>\n    <mat-menu #menu=\"matMenu\" (closed)=\"autocompleteTrigger.closePanel()\" class=\"autoMenu\">\n      <!-- Autocomplete search bar -->\n      <form class=\"conceptForm\">\n        <mat-form-field class=\"conceptFormField\">\n          <input matInput placeholder=\"{{uiConstants.SEARCH_FOR_A_CONCEPT}}\" [matAutocomplete]=\"auto\"\n            [formControl]=\"conceptCtrl\" (click)=\"$event.stopPropagation()\">\n          <!-- $event.stopPropagation is to not close main menu when clicking inside the input field -->\n          <mat-icon matPrefix>search</mat-icon>\n          <mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"selectOption($event)\">\n            <mat-option *ngFor=\"let concept of filteredConcepts | async\" [value]=\"concept.label\">\n              <app-data-selector-element [axisGroup]=\"concept\"></app-data-selector-element>\n              <mat-divider></mat-divider>\n            </mat-option>\n          </mat-autocomplete>\n        </mat-form-field>\n      </form>\n    </mat-menu>\n    <ng-container *ngFor=\"let entry of displayGroupings\">\n      <button mat-menu-item [matMenuTriggerFor]=\"subConceptSelectorMenu\" class=\"mainConceptSelector\"\n        [style.border-left-color]=\"entry[0].fill.hsl().string()\">\n        {{entry[0].label}}\n      </button>\n      <mat-divider></mat-divider>\n      <mat-menu #subConceptSelectorMenu=\"matMenu\">\n        <div [attr.aria-label]=\"entry[0].label + ' Menu'\">\n        <ng-template matMenuContent>\n          <button *ngFor=\"let axisGroup of entry[1]\" (click)=\"addConceptCard(axisGroup.label)\" class=\"conceptSelector\"\n            mat-menu-item>\n            <app-data-selector-element [axisGroup]=\"axisGroup\">\n            </app-data-selector-element>\n            <mat-divider></mat-divider>\n          </button>\n        </ng-template>\n      </div>\n      </mat-menu>\n    </ng-container>\n  </ng-template>\n  </div>\n</mat-menu>\n"

/***/ }),

/***/ "./src/app/data-selector-menu/data-selector-menu.component.ts":
/*!********************************************************************!*\
  !*** ./src/app/data-selector-menu/data-selector-menu.component.ts ***!
  \********************************************************************/
/*! exports provided: DataSelectorMenuComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSelectorMenuComponent", function() { return DataSelectorMenuComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _setup_setup_data_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../setup/setup-data.service */ "./src/app/setup/setup-data.service.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






/**
 * Shows a button with expanding menus for selecting data elements to display.
 */
var DataSelectorMenuComponent = /** @class */ (function () {
    function DataSelectorMenuComponent(setupDataService, uiConstants) {
        var _this = this;
        this.uiConstants = uiConstants;
        /** An event that is emitted when the user requests to add a new card. */
        this.addCard = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /** An event that is emitted when the user requests to add a textbox. */
        this.addTextbox = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * An event that is emitted when the user requests to add a custom timeline.
         */
        this.addCustomTimeline = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * The FormControl used to monitor changes in the user input of the
         * autocomplete field.
         */
        this.conceptCtrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        setupDataService.displayGroupMapping.then(function (displayGroups) {
            var temp = Array.from(displayGroups.values());
            _this.allConcepts = [].concat.apply([], temp);
            _this.displayGroupings = Array.from(displayGroups.entries());
            // Watch for changes to the user input on the autocomplete panel.
            _this.filteredConcepts = _this.conceptCtrl.valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["startWith"])(''), // The autocomplete input starts with nothing typed in.
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["map"])(function (concept) { return concept ? _this.filter(concept, _this.allConcepts) :
                _this.allConcepts.slice(); }));
        });
    }
    // Listens for an event indicating that the user has selected to add the
    // concept card from the top toolbar. The label for the card is sent as an
    // event to CardContainer.
    DataSelectorMenuComponent.prototype.addConceptCard = function (label) {
        this.addCard.emit(label);
        Object(src_constants__WEBPACK_IMPORTED_MODULE_4__["recordGoogleAnalyticsEvent"])('addConcept', 'addCard', label);
    };
    // Emits an event indicating to CardContainer to add a blank textbox at the
    // top of the page.
    DataSelectorMenuComponent.prototype.textbox = function () {
        this.addTextbox.emit();
        Object(src_constants__WEBPACK_IMPORTED_MODULE_4__["recordGoogleAnalyticsEvent"])('addTextbox', 'addCard', new Date().toDateString());
    };
    DataSelectorMenuComponent.prototype.customTimeline = function () {
        this.addCustomTimeline.emit();
        Object(src_constants__WEBPACK_IMPORTED_MODULE_4__["recordGoogleAnalyticsEvent"])('addCustomTimeline', 'addCard', new Date().toDateString());
    };
    // Filter the concepts shown on the autocomplete menu.
    DataSelectorMenuComponent.prototype.filter = function (concept, allConcepts) {
        return allConcepts.filter(function (option) {
            return option.label.toLowerCase().indexOf(concept.toLowerCase()) === 0;
        });
    };
    // We close the menu after an option is selected by autocomplete.
    DataSelectorMenuComponent.prototype.closeMenus = function () {
        this.menuTrigger.closeMenu();
        this.autocompleteTrigger.closePanel();
    };
    // Listen for the event indicating that an option has been selected in the
    // autocomplete menu.
    DataSelectorMenuComponent.prototype.selectOption = function ($event) {
        this.addConceptCard($event.option.value);
        this.closeMenus();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatMenuTrigger"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatMenuTrigger"])
    ], DataSelectorMenuComponent.prototype, "menuTrigger", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material__WEBPACK_IMPORTED_MODULE_2__["MatAutocompleteTrigger"]),
        __metadata("design:type", _angular_material__WEBPACK_IMPORTED_MODULE_2__["MatAutocompleteTrigger"])
    ], DataSelectorMenuComponent.prototype, "autocompleteTrigger", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DataSelectorMenuComponent.prototype, "addCard", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DataSelectorMenuComponent.prototype, "addTextbox", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], DataSelectorMenuComponent.prototype, "addCustomTimeline", void 0);
    DataSelectorMenuComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-data-selector-menu',
            template: __webpack_require__(/*! ./data-selector-menu.component.html */ "./src/app/data-selector-menu/data-selector-menu.component.html"),
            styles: [__webpack_require__(/*! ./data-selector-menu.component.css */ "./src/app/data-selector-menu/data-selector-menu.component.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_4__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_setup_setup_data_service__WEBPACK_IMPORTED_MODULE_5__["SetupDataService"], Object])
    ], DataSelectorMenuComponent);
    return DataSelectorMenuComponent;
}());



/***/ }),

/***/ "./src/app/debugger/debugger.component.html":
/*!**************************************************!*\
  !*** ./src/app/debugger/debugger.component.html ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div style=\"background-color: white\">\n  Browser version: {{browserVersion}} <br />\n  Authentication information:<br />\n  URL Parameters: {{parameters}} <br />\n\n  Errors surfaced:<br />\n  <div *ngFor=\"let error of debugService.errors\">\n    {{error}}\n  </div>\n</div>\n"

/***/ }),

/***/ "./src/app/debugger/debugger.component.ts":
/*!************************************************!*\
  !*** ./src/app/debugger/debugger.component.ts ***!
  \************************************************/
/*! exports provided: DebuggerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DebuggerComponent", function() { return DebuggerComponent; });
/* harmony import */ var fhirclient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fhirclient */ "./node_modules/fhirclient/fhir-client.js");
/* harmony import */ var fhirclient__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fhirclient__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _debugger_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./debugger.service */ "./src/app/debugger/debugger.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.




var DebuggerComponent = /** @class */ (function () {
    function DebuggerComponent(debugService, route) {
        var _this = this;
        this.debugService = debugService;
        this.route = route;
        this.parameters = new Array();
        this.browserVersion = navigator.appVersion;
        this.route.queryParams.subscribe(function (params) {
            _this.parameters.push(JSON.stringify(params));
        });
    }
    DebuggerComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'app-debugger',
            template: __webpack_require__(/*! ./debugger.component.html */ "./src/app/debugger/debugger.component.html"),
        })
        /**
         * This debugger component surfaces errors stored in the debug service to the
         * UI.
         */
        ,
        __metadata("design:paramtypes", [_debugger_service__WEBPACK_IMPORTED_MODULE_3__["DebuggerService"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]])
    ], DebuggerComponent);
    return DebuggerComponent;
}());



/***/ }),

/***/ "./src/app/debugger/debugger.service.ts":
/*!**********************************************!*\
  !*** ./src/app/debugger/debugger.service.ts ***!
  \**********************************************/
/*! exports provided: DebuggerService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DebuggerService", function() { return DebuggerService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

/**
 * This service accumulates any errors sent to it in the app into an array of
 * strings so that they can be surfaced in the UI.
 */
var DebuggerService = /** @class */ (function () {
    function DebuggerService() {
        this.errors = [];
    }
    DebuggerService.prototype.logError = function (error) {
        this.errors.push(error);
    };
    DebuggerService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({ providedIn: 'root' })
    ], DebuggerService);
    return DebuggerService;
}());



/***/ }),

/***/ "./src/app/dialogs/confirm-save/confirm-save.component.css":
/*!*****************************************************************!*\
  !*** ./src/app/dialogs/confirm-save/confirm-save.component.css ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".previewSave {\n  background-color:#202020; /* GREY_900 */\n  display: -ms-flexbox;\n  display: flex;\n  padding: 15px;\n  width: 90%;\n  overflow: auto;\n  max-height: 80%;\n  /* Disable selecting/highlighting on the page. */\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n     -moz-user-select: none; /* Firefox */\n      -ms-user-select: none; /* Internet Explorer/Edge */\n          user-select: none; /* Chrome and Opera */\n}\n\n::ng-deep .previewSave > * {\n  pointer-events: none !important;\n}\n\n.mat-dialog-actions {\n  float: right;\n}\n\nh1 {\n  font-family: 'Montserrat', sans-serif;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZGlhbG9ncy9jb25maXJtLXNhdmUvY29uZmlybS1zYXZlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx3QkFBd0IsRUFBRSxhQUFhO0VBQ3ZDLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGFBQWE7RUFDYixVQUFVO0VBQ1YsY0FBYztFQUNkLGVBQWU7RUFDZixnREFBZ0Q7RUFDaEQsMkJBQTJCLEVBQUUsZUFBZTtFQUM1Qyx5QkFBeUIsRUFBRSxXQUFXO0tBQ25DLHNCQUFzQixFQUFFLFlBQVk7TUFDbkMscUJBQXFCLEVBQUUsMkJBQTJCO1VBQzlDLGlCQUFpQixFQUFFLHFCQUFxQjtBQUNsRDs7QUFFQTtFQUNFLCtCQUErQjtBQUNqQzs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHFDQUFxQztBQUN2QyIsImZpbGUiOiJzcmMvYXBwL2RpYWxvZ3MvY29uZmlybS1zYXZlL2NvbmZpcm0tc2F2ZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByZXZpZXdTYXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjojMjAyMDIwOyAvKiBHUkVZXzkwMCAqL1xuICBkaXNwbGF5OiBmbGV4O1xuICBwYWRkaW5nOiAxNXB4O1xuICB3aWR0aDogOTAlO1xuICBvdmVyZmxvdzogYXV0bztcbiAgbWF4LWhlaWdodDogODAlO1xuICAvKiBEaXNhYmxlIHNlbGVjdGluZy9oaWdobGlnaHRpbmcgb24gdGhlIHBhZ2UuICovXG4gIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTsgLyogaU9TIFNhZmFyaSAqL1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOyAvKiBTYWZhcmkgKi9cbiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgLyogRmlyZWZveCAqL1xuICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOyAvKiBJbnRlcm5ldCBFeHBsb3Jlci9FZGdlICovXG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7IC8qIENocm9tZSBhbmQgT3BlcmEgKi9cbn1cblxuOjpuZy1kZWVwIC5wcmV2aWV3U2F2ZSA+ICoge1xuICBwb2ludGVyLWV2ZW50czogbm9uZSAhaW1wb3J0YW50O1xufVxuXG4ubWF0LWRpYWxvZy1hY3Rpb25zIHtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG5oMSB7XG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCcsIHNhbnMtc2VyaWY7XG59Il19 */"

/***/ }),

/***/ "./src/app/dialogs/confirm-save/confirm-save.component.html":
/*!******************************************************************!*\
  !*** ./src/app/dialogs/confirm-save/confirm-save.component.html ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 mat-dialog-title>\n  Save a static image of this page to a PowerChart clinical note?\n</h1>\n<div class=\"previewText\">Preview:</div>\n<div id=\"previewCanvas\" style=\"overflow-y:auto;\"></div>\n<div mat-dialog-actions>\n  <button mat-raised-button color=\"primary\" (click)=\"onExit()\">No</button>\n  <button mat-raised-button color=\"primary\" (click)=\"onConfirm()\" cdkFocusInitial>Yes</button>\n</div>\n"

/***/ }),

/***/ "./src/app/dialogs/confirm-save/confirm-save.component.ts":
/*!****************************************************************!*\
  !*** ./src/app/dialogs/confirm-save/confirm-save.component.ts ***!
  \****************************************************************/
/*! exports provided: ConfirmSaveComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfirmSaveComponent", function() { return ConfirmSaveComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};


var ConfirmSaveComponent = /** @class */ (function () {
    function ConfirmSaveComponent(dialogRef, data) {
        this.dialogRef = dialogRef;
        this.data = data;
    }
    ConfirmSaveComponent.prototype.ngAfterViewInit = function () {
        this.data.setAttribute('id', 'previewImg');
        this.data.setAttribute('style', 'width:500px');
        document.getElementById('previewCanvas').appendChild(this.data);
    };
    // The user does not wish to save the snapshot.
    ConfirmSaveComponent.prototype.onExit = function () {
        this.dialogRef.close();
    };
    // The user wishes to save the snapshot.
    ConfirmSaveComponent.prototype.onConfirm = function () {
        this.dialogRef.close({
            save: true,
        });
    };
    ConfirmSaveComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-confirm-save',
            template: __webpack_require__(/*! ./confirm-save.component.html */ "./src/app/dialogs/confirm-save/confirm-save.component.html"),
            styles: [__webpack_require__(/*! ./confirm-save.component.css */ "./src/app/dialogs/confirm-save/confirm-save.component.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"],
            HTMLCanvasElement])
    ], ConfirmSaveComponent);
    return ConfirmSaveComponent;
}());



/***/ }),

/***/ "./src/app/dialogs/delete-dialog/delete-dialog.component.html":
/*!********************************************************************!*\
  !*** ./src/app/dialogs/delete-dialog/delete-dialog.component.html ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 mat-dialog-title>{{uiConstants.REMOVE_CARD}}</h1>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onExit()\" id=\"noCancelButton\">{{uiConstants.REMOVE_CARD_NO}}</button>\n  <button mat-button (click)=\"onConfirm()\" id=\"yesRemoveButton\" cdkFocusInitial>{{uiConstants.REMOVE_CARD_YES}}</button>\n</div>\n"

/***/ }),

/***/ "./src/app/dialogs/delete-dialog/delete-dialog.component.ts":
/*!******************************************************************!*\
  !*** ./src/app/dialogs/delete-dialog/delete-dialog.component.ts ***!
  \******************************************************************/
/*! exports provided: DeleteDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeleteDialogComponent", function() { return DeleteDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material/dialog */ "./node_modules/@angular/material/esm5/dialog.es5.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};



/**
 * Shows a dialog asking the user to confirm whether or not they wish to delete
 * the card.
 */
var DeleteDialogComponent = /** @class */ (function () {
    function DeleteDialogComponent(dialogRef, uiConstants) {
        this.dialogRef = dialogRef;
        this.uiConstants = uiConstants;
    }
    // The user does not wish to delete the card.
    DeleteDialogComponent.prototype.onExit = function () {
        this.dialogRef.close();
    };
    // The user wishes to delete the card.
    DeleteDialogComponent.prototype.onConfirm = function () {
        this.dialogRef.close({
            delete: true,
        });
    };
    DeleteDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-delete-dialog',
            template: __webpack_require__(/*! ./delete-dialog.component.html */ "./src/app/dialogs/delete-dialog/delete-dialog.component.html"),
            styles: [__webpack_require__(/*! ../../cardcontainer/cardcontainer.component.css */ "./src/app/cardcontainer/cardcontainer.component.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_2__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"], Object])
    ], DeleteDialogComponent);
    return DeleteDialogComponent;
}());



/***/ }),

/***/ "./src/app/dialogs/help-dialog/help-dialog.component.css":
/*!***************************************************************!*\
  !*** ./src/app/dialogs/help-dialog/help-dialog.component.css ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".stepContent {\n  margin-bottom: 30px;\n  margin-top: 10px;\n  font-size: 20px;\n}\n\n::ng-deep .mat-horizontal-content-container {\n  padding-bottom: 0px !important;\n}\n\n.stepperButtons {\n  float: right;\n}\n\n.stepperButtons button {\n  margin-right: 5px;\n}\n\n::ng-deep .mat-dialog-container {\n  max-height: 500px !important;\n}\n\nimg {\n  max-width: 100%;\n}\n\n.divider {\n  margin-bottom: 20px;\n  margin-top: 10px;\n  border-top-width: 5px !important;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZGlhbG9ncy9oZWxwLWRpYWxvZy9oZWxwLWRpYWxvZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsbUJBQW1CO0VBQ25CLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixnQkFBZ0I7RUFDaEIsZ0NBQWdDO0FBQ2xDIiwiZmlsZSI6InNyYy9hcHAvZGlhbG9ncy9oZWxwLWRpYWxvZy9oZWxwLWRpYWxvZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnN0ZXBDb250ZW50IHtcbiAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgZm9udC1zaXplOiAyMHB4O1xufVxuXG46Om5nLWRlZXAgLm1hdC1ob3Jpem9udGFsLWNvbnRlbnQtY29udGFpbmVyIHtcbiAgcGFkZGluZy1ib3R0b206IDBweCAhaW1wb3J0YW50O1xufVxuXG4uc3RlcHBlckJ1dHRvbnMge1xuICBmbG9hdDogcmlnaHQ7XG59XG5cbi5zdGVwcGVyQnV0dG9ucyBidXR0b24ge1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbn1cblxuOjpuZy1kZWVwIC5tYXQtZGlhbG9nLWNvbnRhaW5lciB7XG4gIG1heC1oZWlnaHQ6IDUwMHB4ICFpbXBvcnRhbnQ7XG59XG5cbmltZyB7XG4gIG1heC13aWR0aDogMTAwJTtcbn1cblxuLmRpdmlkZXIge1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBib3JkZXItdG9wLXdpZHRoOiA1cHggIWltcG9ydGFudDtcbn0iXX0= */"

/***/ }),

/***/ "./src/app/dialogs/help-dialog/help-dialog.component.html":
/*!****************************************************************!*\
  !*** ./src/app/dialogs/help-dialog/help-dialog.component.html ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div style=\"float: right;\" mat-dialog-actions>\n  <button mat-icon-button (click)=\"onExit()\">\n    <mat-icon color=\"primary\">close</mat-icon>\n  </button>\n</div>\n<mat-horizontal-stepper [linear]=\"false\" #stepper>\n  <!-- keep icons as numbers during edit-->\n  <ng-template matStepperIcon=\"edit\" let-index=\"index\">\n    {{index +1}}\n  </ng-template>\n  <mat-step label=\"Configuration\">\n    <div class=\"stepContent\">\n      <div>\n        MedTimeLine Configuration Screen\n      </div>\n      <img src=\"assets/images/configuration.png\">\n    </div>\n    <div class=\"stepperButtons\">\n      <button mat-stroked-button matStepperNext>Next</button>\n    </div>\n  </mat-step>\n\n  <mat-step label=\"Set Date Range\">\n    <div class=\"stepContent\">\n      <div>\n        <div>\n          Click on the current date range to open the datepicker.\n        </div>\n        <img src=\"assets/images/datepicker_open.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        <div>\n          Choose a patient encounter or pre-set time period on the left.\n        </div>\n        <img src=\"assets/images/datepicker_preset.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        <div>\n          Alternatively, choose a custom date range.\n        </div>\n        <img src=\"assets/images/datepicker_custom.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n    </div>\n    <div class=\"stepperButtons\">\n      <button mat-stroked-button matStepperPrevious>Back</button>\n      <button mat-stroked-button matStepperNext>Next</button>\n    </div>\n  </mat-step>\n\n  <mat-step label=\"Add Flags to Custom Timeline\">\n    <div class=\"stepContent\">\n      <div>\n        The Custom Timeline feature allows you to enter custom events.\n      </div>\n      <div>\n        <div>\n          Click the pencil icon to enter edit mode.\n        </div>\n        <img src=\"assets/images/customTimeline_edit.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        <div>\n          Click the timeline at a place where you would like to add a flag.\n        </div>\n        <img src=\"assets/images/customTimeline_click.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        <div>\n          In the dialog box, enter a title, description, and select a color for the flag.\n        </div>\n        <img src=\"assets/images/customTimeline_title.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        <div>\n          You can also manually adjust the date and/or time.\n        </div>\n        <div>\n          While in edit mode, you can edit an existing flag, which will open up the dialog box again.\n        </div>\n        <img src=\"assets/images/customTimeline_editFlag.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        <div>\n          You can also remove flags while in edit mode.\n        </div>\n        <img src=\"assets/images/customTimeline_delete.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n    </div>\n    <div class=\"stepperButtons\">\n      <button mat-stroked-button matStepperPrevious>Back</button>\n      <button mat-stroked-button matStepperNext>Next</button>\n    </div>\n  </mat-step>\n\n  <mat-step label=\"Enter Text Notes\">\n    <div class=\"stepContent\">\n      <div>\n        You can enter notes in the main timeline display area.\n      </div>\n      <div>\n        <div>\n          Click the pencil icon to enter edit mode.\n        </div>\n        <img src=\"assets/images/annotation_edit.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        <div>\n          Type in your notes, and click the save button to save the note.\n        </div>\n        <img src=\"assets/images/annotation_type.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n    </div>\n    <div class=\"stepperButtons\">\n      <button mat-stroked-button matStepperPrevious>Back</button>\n      <button mat-stroked-button matStepperNext>Next</button>\n    </div>\n  </mat-step>\n\n  <mat-step label=\"Timelines\">\n    <div class=\"stepContent\">\n      <div>\n        You can add, remove, and rearrange timelines to optimize the data view for specific patients.\n      </div>\n      <div>\n        <div>\n          To add a timeline, click the plus sign, then select Add Data Timeline.\n          Select the timeline type you want to add, then select the specific timeline.\n        </div>\n        <img src=\"assets/images/timelines_add_generic.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        You can also add another Custom Timeline or text notes. You can also search for concept through the autocomplete\n        input.\n      </div>\n      <img src=\"assets/images/timelines_autocomplete.gif\">\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        To remove a timeline, hover your cursor over the timeline you want to remove. Click the X in the upper left\n        corner of the timeline.\n      </div>\n      <img src=\"assets/images/timelines_delete.gif\">\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        You can undo a deletion of a card, as well.\n      </div>\n      <img src=\"assets/images/timelines_undo_delete.gif\">\n      <mat-divider class=\"divider\"></mat-divider>\n      <div>\n        To rearrange timelines, click the label or colored handle on the left hand side of the timeline you want to\n        move, and hold the mouse button and drag and drop the timeline to your desired location.\n      </div>\n      <img src=\"assets/images/timelines_reorder.gif\">\n      <mat-divider class=\"divider\"></mat-divider>\n    </div>\n    <div class=\"stepperButtons\">\n      <button mat-stroked-button matStepperPrevious>Back</button>\n      <button mat-stroked-button matStepperNext>Next</button>\n    </div>\n  </mat-step>\n\n  <mat-step label=\"Timeline Features\">\n    <div class=\"stepContent\">\n      <div>\n        Timelines are categorized and color-coded by a vertical bar on the leftmost side of the data timeline.\n      </div>\n      <div>\n        <div>\n          You can hover over plotted data point and additional data displays in a tooltip.\n        </div>\n        <img src=\"assets/images/chartHover.gif\">\n        <mat-divider class=\"divider\"></mat-divider>\n        <img src=\"assets/images/chartHover2.gif\">\n      </div>\n      <mat-divider class=\"divider\"></mat-divider>\n    </div>\n    <div class=\"stepperButtons\">\n      <button mat-stroked-button matStepperPrevious>Back</button>\n      <button mat-stroked-button (click)=\"onExit()\">Close</button>\n    </div>\n  </mat-step>\n</mat-horizontal-stepper>"

/***/ }),

/***/ "./src/app/dialogs/help-dialog/help-dialog.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/dialogs/help-dialog/help-dialog.component.ts ***!
  \**************************************************************/
/*! exports provided: HelpDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HelpDialogComponent", function() { return HelpDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * This class holds the logic and template for a tutorial stepper dialog.
 */
var HelpDialogComponent = /** @class */ (function () {
    function HelpDialogComponent(dialogRef) {
        this.dialogRef = dialogRef;
    }
    HelpDialogComponent.prototype.onExit = function () {
        this.dialogRef.close();
    };
    HelpDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-help-dialog',
            template: __webpack_require__(/*! ./help-dialog.component.html */ "./src/app/dialogs/help-dialog/help-dialog.component.html"),
            styles: [__webpack_require__(/*! ./help-dialog.component.css */ "./src/app/dialogs/help-dialog/help-dialog.component.css")]
        }),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"]])
    ], HelpDialogComponent);
    return HelpDialogComponent;
}());



/***/ }),

/***/ "./src/app/dialogs/ifu-dialog/ifu-dialog.component.css":
/*!*************************************************************!*\
  !*** ./src/app/dialogs/ifu-dialog/ifu-dialog.component.css ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "::ng-deep .ifuViewer {\n  height: 300px;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZGlhbG9ncy9pZnUtZGlhbG9nL2lmdS1kaWFsb2cuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7QUFDZiIsImZpbGUiOiJzcmMvYXBwL2RpYWxvZ3MvaWZ1LWRpYWxvZy9pZnUtZGlhbG9nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6Om5nLWRlZXAgLmlmdVZpZXdlciB7XG4gIGhlaWdodDogMzAwcHg7XG59XG4iXX0= */"

/***/ }),

/***/ "./src/app/dialogs/ifu-dialog/ifu-dialog.component.html":
/*!**************************************************************!*\
  !*** ./src/app/dialogs/ifu-dialog/ifu-dialog.component.html ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1>MedTimeLine Instructions For Use</h1>\n<div style=\"overflow-y:auto; height: 400px; border: 1px solid black;\">\n  <img *ngFor=\"let i of [1,2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]\" [src]=\"'assets/documents/ifu_' + i + '.gif'\"\n    style=\"display: block;\">\n</div>\n"

/***/ }),

/***/ "./src/app/dialogs/ifu-dialog/ifu-dialog.component.ts":
/*!************************************************************!*\
  !*** ./src/app/dialogs/ifu-dialog/ifu-dialog.component.ts ***!
  \************************************************************/
/*! exports provided: IfuDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IfuDialogComponent", function() { return IfuDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var IfuDialogComponent = /** @class */ (function () {
    function IfuDialogComponent(dialogRef) {
        this.dialogRef = dialogRef;
    }
    IfuDialogComponent.prototype.onExit = function () {
        this.dialogRef.close();
    };
    IfuDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-ifu-dialog',
            template: __webpack_require__(/*! ./ifu-dialog.component.html */ "./src/app/dialogs/ifu-dialog/ifu-dialog.component.html"),
            styles: [__webpack_require__(/*! ./ifu-dialog.component.css */ "./src/app/dialogs/ifu-dialog/ifu-dialog.component.css")]
        }),
        __metadata("design:paramtypes", [_angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"]])
    ], IfuDialogComponent);
    return IfuDialogComponent;
}());



/***/ }),

/***/ "./src/app/fhir-resources/annotated/annotated-diagnostic-report.ts":
/*!*************************************************************************!*\
  !*** ./src/app/fhir-resources/annotated/annotated-diagnostic-report.ts ***!
  \*************************************************************************/
/*! exports provided: AnnotatedDiagnosticReport */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnnotatedDiagnosticReport", function() { return AnnotatedDiagnosticReport; });
/* harmony import */ var _narrative__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../narrative */ "./src/app/fhir-resources/narrative.ts");
/* harmony import */ var _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * A diagnostic report with Narrative text extended.
 * Necessary because Narrative is not officially part of the
 * DSTU2 standard of FHIR, but it is an attribute on the
 * DomainResource model that DiagnosticReport is built on top of
 */
var AnnotatedDiagnosticReport = /** @class */ (function (_super) {
    __extends(AnnotatedDiagnosticReport, _super);
    function AnnotatedDiagnosticReport(report, attachmentHtml) {
        var _this = _super.call(this, report.timestamp) || this;
        // Grabbing information from the html text in json only if
        // it exists
        if (report.json.text) {
            _this.text = new _narrative__WEBPACK_IMPORTED_MODULE_0__["Narrative"](report.json.text);
        }
        if (attachmentHtml) {
            _this.attachmentHtml = attachmentHtml;
        }
        _this.report = report;
        return _this;
    }
    return AnnotatedDiagnosticReport;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__["TimestampedObject"]));



/***/ }),

/***/ "./src/app/fhir-resources/annotated/annotated-microbio-report.ts":
/*!***********************************************************************!*\
  !*** ./src/app/fhir-resources/annotated/annotated-microbio-report.ts ***!
  \***********************************************************************/
/*! exports provided: AnnotatedMicrobioReport */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnnotatedMicrobioReport", function() { return AnnotatedMicrobioReport; });
/* harmony import */ var _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

/**
 * A microbio report with the timestamp for a specific culture type extended.
 * Necessary because Cerner's implementation of the microbio data
 * does not include the timestamp with the report, but rather with
 * the object.
 */
var AnnotatedMicrobioReport = /** @class */ (function (_super) {
    __extends(AnnotatedMicrobioReport, _super);
    function AnnotatedMicrobioReport(report) {
        var _this = this;
        // Get the timestamp from the collection time of the specimen.
        var timestamp;
        var specimen = report.specimen;
        if (specimen) {
            timestamp = specimen.collectedDateTime ?
                specimen.collectedDateTime :
                (specimen.collectedPeriod ? specimen.collectedPeriod.start :
                    undefined);
        }
        _this = _super.call(this, timestamp) || this;
        _this.report = report;
        return _this;
    }
    return AnnotatedMicrobioReport;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_0__["TimestampedObject"]));



/***/ }),

/***/ "./src/app/fhir-resources/annotated/annotated-observation.ts":
/*!*******************************************************************!*\
  !*** ./src/app/fhir-resources/annotated/annotated-observation.ts ***!
  \*******************************************************************/
/*! exports provided: AnnotatedObservation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnnotatedObservation", function() { return AnnotatedObservation; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants */ "./src/constants.ts");
/* harmony import */ var _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * An Observation with additional information to display in its tooltip.
 */
var AnnotatedObservation = /** @class */ (function (_super) {
    __extends(AnnotatedObservation, _super);
    function AnnotatedObservation(observation, 
    /**
     * The items in this list are [label, value] pairs to be displayed in
     * a tooltip.
     * This array should be treated as immutable.
     */
    annotationValues) {
        if (annotationValues === void 0) { annotationValues = new Array(); }
        var _this = _super.call(this, observation.label, observation.requestId, observation.timestamp) || this;
        _this.observation = observation;
        _this.annotationValues = annotationValues;
        return _this;
    }
    /**
     * Makes an AnnotatedObservation for medication monitoring.
     * The annotations read out how long it's been since the prior medication
     * dose, and how long it was until the next medication dose was given.
     * @param observation The monitoring observation to annotate
     * @param medicationOrderSet The medication orders containing the doses of the
     *     corresponding medication
     * @throws Error if there are two medication orders in MedicationOrderSet
     *     that contain the timestamp of the observation
     */
    AnnotatedObservation.forMedicationMonitoring = function (observation, medicationOrders) {
        // Look in the medication order set's administrations and find the ones
        // closest in time to this observation.
        var timeSinceLast;
        var timeBeforeNext;
        var annotations = new Array();
        if (medicationOrders.length > 0) {
            // Flatten all medication admins within the orders into one list and sort
            var allAdmins = [].concat.apply([], medicationOrders.map(function (order) { return order.medicationAdministrationSet.resourceList; }));
            var sortedAdmins = allAdmins.sort(function (a, b) { return a.medAdministration.timestamp.toMillis() -
                b.medAdministration.timestamp.toMillis(); });
            var idx = 0;
            while (idx < sortedAdmins.length &&
                sortedAdmins[idx].medAdministration.timestamp <
                    observation.timestamp) {
                idx++;
            }
            // It's guaranteed that there's a dose before the monitoring point and a
            // dose after the monitoring point since we check to make sure
            // the observation is between the first and last administrations.
            // Here we look up those dose numbers and the time difference between
            // the doses and the monitoring point.
            var doseBeforeObs = sortedAdmins[idx - 1];
            var doseAfterObs = sortedAdmins[idx];
            timeSinceLast =
                observation.timestamp.diff(doseBeforeObs.medAdministration.timestamp);
            timeBeforeNext =
                doseAfterObs.medAdministration.timestamp.diff(observation.timestamp);
            annotations.push([
                _constants__WEBPACK_IMPORTED_MODULE_0__["UI_CONSTANTS"].TIME_SINCE_PREVIOUS_DOSE, timeSinceLast.toFormat('h:mm')
            ]);
            annotations.push([
                _constants__WEBPACK_IMPORTED_MODULE_0__["UI_CONSTANTS"].TIME_BEFORE_NEXT_DOSE, timeBeforeNext.toFormat('h:mm')
            ]);
        }
        return new AnnotatedObservation(observation, annotations);
    };
    /**
     * Makes an AnnotatedObservation for blood pressure, with information about
     * the blood pressure location.
     * @param observation The monitoring observation to annotate
     * @param locationSet The ObservationSet containing Blood Pressure location
     *     observations.
     * @throws Error if there are two observations in locationSet
     *     that contain the timestamp of the observation
     */
    AnnotatedObservation.forBloodPressure = function (observation, locationSet) {
        var annotations = new Array();
        // Find the medication order set that coincides in time with this
        // administration (if any).
        if (locationSet) {
            for (var _i = 0, _a = locationSet.resourceList; _i < _a.length; _i++) {
                var locationObs = _a[_i];
                if (locationObs.observation.timestamp.equals(observation.timestamp)) {
                    annotations.push(['Blood Pressure Location', locationObs.observation.result]);
                }
            }
        }
        return new AnnotatedObservation(observation, annotations);
    };
    return AnnotatedObservation;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__["ResultClassWithTimestamp"]));



/***/ }),

/***/ "./src/app/fhir-resources/attachment.ts":
/*!**********************************************!*\
  !*** ./src/app/fhir-resources/attachment.ts ***!
  \**********************************************/
/*! exports provided: Attachment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Attachment", function() { return Attachment; });
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
/**
 * FHIR type from the DSTU2 version of the standard. Used for containing
 * or referencing attachments (additional data content defined in other formats).
 * Fhir Documentation: https://www.hl7.org/fhir/datatypes.html#Attachment
 */
var Attachment = /** @class */ (function () {
    function Attachment(jsonPresentedForm) {
        this.contentType = jsonPresentedForm.contentType;
        this.url = jsonPresentedForm.url;
    }
    return Attachment;
}());



/***/ }),

/***/ "./src/app/fhir-resources/diagnostic-report.ts":
/*!*****************************************************!*\
  !*** ./src/app/fhir-resources/diagnostic-report.ts ***!
  \*****************************************************/
/*! exports provided: DiagnosticReportStatus, DiagnosticServiceSectionCodes, DiagnosticReport */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticReportStatus", function() { return DiagnosticReportStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticServiceSectionCodes", function() { return DiagnosticServiceSectionCodes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticReport", function() { return DiagnosticReport; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _conceptmappings_resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../conceptmappings/resource-codes/diagnostic-report-code */ "./src/app/conceptmappings/resource-codes/diagnostic-report-code.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _attachment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./attachment */ "./src/app/fhir-resources/attachment.ts");
/* harmony import */ var _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();





/**
 * FHIR element for DiagnosticReportStatus, from the DSTU2 version of the
 * standard.
 * https://www.hl7.org/fhir/valueset-diagnostic-report-status.html
 */
var DiagnosticReportStatus;
(function (DiagnosticReportStatus) {
    DiagnosticReportStatus["Registered"] = "Registered";
    DiagnosticReportStatus["Partial"] = "Partial";
    DiagnosticReportStatus["Preliminary"] = "Preliminary";
    DiagnosticReportStatus["Final"] = "Final";
    DiagnosticReportStatus["Amended"] = "Amended";
    DiagnosticReportStatus["Corrected"] = "Corrected";
    DiagnosticReportStatus["Appended"] = "Appended";
    DiagnosticReportStatus["Cancelled"] = "Cancelled";
    DiagnosticReportStatus["EnteredInError"] = "Enteredinerror";
    DiagnosticReportStatus["Unknown"] = "Unknown";
})(DiagnosticReportStatus || (DiagnosticReportStatus = {}));
var statusToEnumMap = new Map([
    ['registered', DiagnosticReportStatus.Registered],
    ['partial', DiagnosticReportStatus.Partial],
    ['preliminary', DiagnosticReportStatus.Preliminary],
    ['final', DiagnosticReportStatus.Final],
    ['amended', DiagnosticReportStatus.Amended],
    ['corrected', DiagnosticReportStatus.Corrected],
    ['appended', DiagnosticReportStatus.Appended],
    ['cancelled', DiagnosticReportStatus.Cancelled],
    ['entered-in-error', DiagnosticReportStatus.EnteredInError],
    ['unknown', DiagnosticReportStatus.Unknown],
]);
/**
 * FHIR element for DiagnosticServiceSectionCodes, from the DSTU2 version
 * of the standard. Used to represent the department/diagnostic service
 * that created the request. The section codes that we are currently
 * using are not in the FHIR documentation, but are in the examples
 * given in the Cerner sandbox environment.
 * TODO: Add more codes when we get more data. (Issue #30)
 * http://hl7.org/fhir/DSTU2/valueset-diagnostic-service-sections.html
 */
var DiagnosticServiceSectionCodes;
(function (DiagnosticServiceSectionCodes) {
    DiagnosticServiceSectionCodes["RadiologyReport"] = "RAD";
    DiagnosticServiceSectionCodes["CTReport"] = "CT";
})(DiagnosticServiceSectionCodes || (DiagnosticServiceSectionCodes = {}));
var categoryToEnumMap = new Map([
    ['RADRPT', DiagnosticServiceSectionCodes.RadiologyReport],
    ['CT Report', DiagnosticServiceSectionCodes.CTReport],
]);
/**
 * FHIR resource for DiagnosticReport, from the DSTU2 version of the standard.
 * https://www.hl7.org/fhir/DSTU2/diagnosticreport.html
 *
 * Cerner currently only supports radiology reports
 */
var DiagnosticReport = /** @class */ (function (_super) {
    __extends(DiagnosticReport, _super);
    function DiagnosticReport(json, requestId) {
        var _this = _super.call(this, DiagnosticReport.getLabel(json, requestId), requestId, DiagnosticReport.getTimestamp(json)) || this;
        /**
         * Not readonly to allow editing in fhir-service
         * Attachment representing html/pdf version of the report.
         */
        _this.presentedForm = new Array();
        _this.requestId = requestId;
        _this.json = json;
        if (json.id) {
            _this.id = json.id;
        }
        if (!json.status) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](new Set([_this.requestId]), 'The report needs a status to be useful.', json);
        }
        _this.status = statusToEnumMap.get(json.status);
        if (json.category) {
            _this.category = categoryToEnumMap.get(json.category.text);
        }
        if (json.presentedForm) {
            for (var _i = 0, _a = json.presentedForm; _i < _a.length; _i++) {
                var presented = _a[_i];
                _this.presentedForm.push(new _attachment__WEBPACK_IMPORTED_MODULE_3__["Attachment"](presented));
            }
        }
        if (json.code) {
            _this.code = _conceptmappings_resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_1__["DiagnosticReportCode"].fromCodeString(json.code.text);
        }
        return _this;
    }
    /**
     * Helper function to extract the label to satisfy the requirement
     * for labels in the ResultClassWithTimestamp.
     * Label currently just text of the code, which is 'RADRPT' in the
     * Cerner examples.
     * @param json The JSON retrieved from the server.
     */
    DiagnosticReport.getLabel = function (json, requestId) {
        var label;
        if (json.code) {
            label = json.code.text;
        }
        else {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](new Set([requestId]), 'The report needs a code to be useful.', json);
        }
        return label;
    };
    DiagnosticReport.getTimestamp = function (json) {
        return luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.effectiveDateTime);
    };
    return DiagnosticReport;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_4__["ResultClassWithTimestamp"]));



/***/ }),

/***/ "./src/app/fhir-resources/dosage.ts":
/*!******************************************!*\
  !*** ./src/app/fhir-resources/dosage.ts ***!
  \******************************************/
/*! exports provided: Dosage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dosage", function() { return Dosage; });
/* harmony import */ var _utils_unit_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/unit_utils */ "./src/app/utils/unit_utils.ts");

// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
/**
 * This object represents relevant components of dosage information, provided
 * in MedicationOrders and MedicationAdministrations.
 */
var Dosage = /** @class */ (function () {
    function Dosage(json) {
        if (json.dosage) {
            if (json.dosage.quantity) {
                this.quantity = json.dosage.quantity.value;
                this.unit = Object(_utils_unit_utils__WEBPACK_IMPORTED_MODULE_0__["fixUnitAbbreviations"])(json.dosage.quantity.unit);
            }
            if (json.dosage.route) {
                this.route = json.dosage.route.text;
            }
            /*
             * The text for the dosage usually contains information about the rate of
             * administration, however the format across different
             * MedicationAdministrations is not consistent. Ex: "500 mg IV q6hr" vs
             * "250 mg = 1 caps Oral Once"
             */
            this.text = json.dosage.text;
        }
    }
    return Dosage;
}());



/***/ }),

/***/ "./src/app/fhir-resources/encounter.ts":
/*!*********************************************!*\
  !*** ./src/app/fhir-resources/encounter.ts ***!
  \*********************************************/
/*! exports provided: Encounter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Encounter", function() { return Encounter; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.


/**
 * This object represents basic information about an Encounter: what its
 * reason and type were, when it happened, and its ID.
 */
var Encounter = /** @class */ (function () {
    function Encounter(json, requestId) {
        this.encounterId = json.id;
        this.requestId = requestId;
        if (!json.period) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'An encounter must have a time period.', json);
        }
        var startTime = Encounter.getStartTime(json, this.requestId);
        var endTime = Encounter.getEndTime(json, requestId);
        if (endTime < startTime) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'The start time comes before the end time.', json);
        }
        if (startTime > luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].local()) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'The start time is in the future.', json);
        }
        this.period = luxon__WEBPACK_IMPORTED_MODULE_0__["Interval"].fromDateTimes(startTime, endTime);
    }
    /* Extracts the start time from JSON representing an Encounter. */
    Encounter.getStartTime = function (json, requestId) {
        if (!json.period.start) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([requestId]), 'An encounter must have a start date.', json);
        }
        return luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.period.start).toLocal();
    };
    /* Extracts the end time from JSON representing an Encounter. */
    Encounter.getEndTime = function (json, requestId) {
        var endTime = json.period.end ?
            luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.period.end).toLocal() :
            undefined;
        if (endTime === undefined || (endTime > luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].local())) {
            endTime = luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].local();
        }
        return endTime;
    };
    return Encounter;
}());



/***/ }),

/***/ "./src/app/fhir-resources/medication-administration.ts":
/*!*************************************************************!*\
  !*** ./src/app/fhir-resources/medication-administration.ts ***!
  \*************************************************************/
/*! exports provided: MedicationAdministrationStatus, MedicationAdministration, MedicationAdministrationSet, AnnotatedAdministration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationAdministrationStatus", function() { return MedicationAdministrationStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationAdministration", function() { return MedicationAdministration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationAdministrationSet", function() { return MedicationAdministrationSet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnnotatedAdministration", function() { return AnnotatedAdministration; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _utils_unit_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/unit_utils */ "./src/app/utils/unit_utils.ts");
/* harmony import */ var _dosage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dosage */ "./src/app/fhir-resources/dosage.ts");
/* harmony import */ var _medication__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./medication */ "./src/app/fhir-resources/medication.ts");
/* harmony import */ var _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







/**
 * FHIR element for MedicationAdministrationStatus, from the DSTU2 version of
 * the standard. http://hl7.org/fhir/DSTU2/valueset-medication-admin-status.html
 */
var MedicationAdministrationStatus;
(function (MedicationAdministrationStatus) {
    MedicationAdministrationStatus["IN_PROGRESS"] = "In Progress";
    MedicationAdministrationStatus["ON_HOLD"] = "On Hold";
    MedicationAdministrationStatus["COMPLETED"] = "Completed";
    MedicationAdministrationStatus["ENTERED_IN_ERROR"] = "Entered in Error";
    MedicationAdministrationStatus["STOPPED"] = "Stopped";
})(MedicationAdministrationStatus || (MedicationAdministrationStatus = {}));
var statusToEnumMap = new Map([
    ['in-progress', MedicationAdministrationStatus.IN_PROGRESS],
    ['on-hold', MedicationAdministrationStatus.ON_HOLD],
    ['completed', MedicationAdministrationStatus.COMPLETED],
    ['entered-in-error', MedicationAdministrationStatus.ENTERED_IN_ERROR],
    ['stopped', MedicationAdministrationStatus.STOPPED],
]);
/**
 * This object represents a FHIR MedicationAdministration. It does not contain
 * all the information in a standard MedicationAdministration (see
 * https://www.hl7.org/fhir/DSTU2/medicationadministration.html) but instead
 * stores only the information we're interested in seeing.
 */
var MedicationAdministration = /** @class */ (function (_super) {
    __extends(MedicationAdministration, _super);
    /**
     * Makes an MedicationAdministration out of a JSON object that represents a
     * a FHIR MedicationAdministration.
     * https://www.hl7.org/fhir/DSTU2/medicationadministration.html
     * @param json A JSON object that represents a FHIR MedicationAdministration.
     * @param requestId The x-request-id of the request that acquired this
     *     medication administration's data.
     */
    function MedicationAdministration(json, requestId) {
        var _this = _super.call(this, json.medicationReference ? json.medicationReference.display :
            json.medicationCodeableConcept ?
                json.medicationCodeableConcept.text :
                null, requestId, MedicationAdministration.getTimestamp(json)) || this;
        _this.containedMedications = [];
        _this.rxNormCode = _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_6__["ResultClass"].extractMedicationEncoding(json);
        _this.medicationOrderId = json.prescription && json.prescription.reference ?
            json.prescription.reference.replace(src_constants__WEBPACK_IMPORTED_MODULE_1__["FhirResourceType"].MedicationOrder + '/', '') :
            null;
        _this.dosage = new _dosage__WEBPACK_IMPORTED_MODULE_4__["Dosage"](json);
        _this.wasNotGiven = json.wasNotGiven;
        _this.status = statusToEnumMap.get(json.status);
        if (json.contained && json.contained.length > 0) {
            // We first find the element that lists the "ingredients" of this
            // MedicationAdministration with each corresponding dosage and reference
            // id. This element of "contained" will have the same id as the overall
            // MedicationAdministration's medicationReference number.
            var referenceId_1 = json.medicationReference ? json.medicationReference.reference : null;
            var ingredientReferences = new Map();
            if (referenceId_1) {
                var index = json.contained.findIndex(function (el) {
                    return (el.resourceType ===
                        MedicationAdministration.MED_RESOURCE_TYPE &&
                        el.product && el.id === referenceId_1.replace('#', ''));
                });
                var listOfIngredients = json.contained[index];
                if (listOfIngredients && listOfIngredients.product.ingredient) {
                    for (var _i = 0, _a = listOfIngredients.product.ingredient; _i < _a.length; _i++) {
                        var el = _a[_i];
                        if (el.item && el.amount) {
                            ingredientReferences.set(el.item.reference.replace('#', ''), el);
                        }
                    }
                }
                // Remove the element similar to a "list of ingredients" from contained.
                if (index > -1) {
                    json.contained.splice(index, 1);
                }
            }
            if (ingredientReferences.size > 0 && json.contained.length > 1) {
                // We map the Medications in the list of ingredients to JSON elements
                // containing the RxNorms for each ingredient.
                for (var _b = 0, _c = json.contained; _b < _c.length; _b++) {
                    var ing = _c[_b];
                    _this.containedMedications.push(new _medication__WEBPACK_IMPORTED_MODULE_5__["ContainedMedication"](ing, ingredientReferences, _this.requestId));
                }
            }
        }
        if (!(_this.rxNormCode && _this.label)) {
            // If a MedicationAdministration has "Contained" portions of different
            // ingredients, then there might not be one single RxNorm corresponding to
            // this administration.
            // We throw an error if all contained medications do not
            // have an RxNormCode, or if there are no contained medications.
            if (_this.containedMedications.length === 0 ||
                (_this.containedMedications.length > 0 &&
                    _this.containedMedications.every(function (med) { return (med.code === undefined); }))) {
                throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](new Set([_this.requestId]), 'JSON must include RxNormCode and a label' +
                    ' to be included as a MedicationAdministration.', json);
            }
        }
        return _this;
    }
    MedicationAdministration.getTimestamp = function (json) {
        return json.effectiveTimeDateTime ?
            luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.effectiveTimeDateTime).toUTC() :
            json.effectiveTimePeriod ?
                luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.effectiveTimePeriod.start).toUTC() :
                null;
    };
    MedicationAdministration.MED_RESOURCE_TYPE = 'Medication';
    return MedicationAdministration;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_6__["ResultClassWithTimestamp"]));

/**
 * A set of MedicalAdministrations that belong together as part of the same
 * series.
 */
var MedicationAdministrationSet = /** @class */ (function (_super) {
    __extends(MedicationAdministrationSet, _super);
    /**
     * Constructor for MedicationAdministrationSet.
     * @param medicationAdministrationList The list of MedicationAdministrations
     *     belonging together.
     * @throws Error if the administrations have different labels or RxNorms,
     *      or if there is not a label, or if the administrations have different
     *      units.
     */
    function MedicationAdministrationSet(medicationAdministrationList) {
        var _this = _super.call(this, medicationAdministrationList) || this;
        var rxNorms = medicationAdministrationList.map(function (x) { return x.medAdministration.rxNormCode; });
        if (new Set(rxNorms).size > 1) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](_this.requestIds, "Different RxNorms for administrations: " + rxNorms + ".");
        }
        _this.rxNormCode = rxNorms[0];
        _this.minDose = Math.min.apply(Math, medicationAdministrationList.map(function (x) { return x.medAdministration.dosage.quantity; }));
        _this.maxDose = Math.max.apply(Math, medicationAdministrationList.map(function (x) { return x.medAdministration.dosage.quantity; }));
        var units = new Set(medicationAdministrationList.map(function (x) { return x.medAdministration.dosage.unit; }));
        if (units.size > 1) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](_this.requestIds, "Different units in the administration set: " + Array.from(units.values()) + ".");
        }
        _this.unit = Object(_utils_unit_utils__WEBPACK_IMPORTED_MODULE_3__["fixUnitAbbreviations"])(Array.from(units.values())[0]);
        return _this;
    }
    return MedicationAdministrationSet;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_6__["FhirResourceSet"]));

/**
 * A MedicationAdministration with additional information relating it to
 * the other administrations in the same order.
 */
var AnnotatedAdministration = /** @class */ (function (_super) {
    __extends(AnnotatedAdministration, _super);
    function AnnotatedAdministration(medAdmin, prevDose) {
        var _this = _super.call(this, medAdmin.label, medAdmin.requestId) || this;
        _this.medAdministration = medAdmin;
        _this.previousDose = prevDose;
        return _this;
    }
    return AnnotatedAdministration;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_6__["ResultClass"]));



/***/ }),

/***/ "./src/app/fhir-resources/medication-order.ts":
/*!****************************************************!*\
  !*** ./src/app/fhir-resources/medication-order.ts ***!
  \****************************************************/
/*! exports provided: MedicationOrderStatus, MedicationOrder, AnnotatedMedicationOrder, MedicationOrderSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationOrderStatus", function() { return MedicationOrderStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationOrder", function() { return MedicationOrder; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnnotatedMedicationOrder", function() { return AnnotatedMedicationOrder; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationOrderSet", function() { return MedicationOrderSet; });
/* harmony import */ var _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../fhir-resources/medication-administration */ "./src/app/fhir-resources/medication-administration.ts");
/* harmony import */ var _fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../fhir-resources/sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _utils_unit_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/unit_utils */ "./src/app/utils/unit_utils.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
// Disable this check because it's for IE 11 compatibility and we're not worried
// about that in our testing code.
/* tslint:disable:object-literal-shorthand*/




/**
 * FHIR element for MedicationOrderStatus, from the DSTU2 version of the
 * standard.
 * http://hl7.org/fhir/DSTU2/valueset-medication-order-status.html
 */
var MedicationOrderStatus = {
    ACTIVE: 'active',
    ON_HOLD: 'on-hold',
    COMPLETED: 'completed',
    ENTERED_IN_ERROR: 'entered-in-error',
    STOPPED: 'stopped',
    DRAFT: 'draft',
};
/**
 * This object represents a FHIR MedicationOrder. It does not contain
 * all the information in a standard MedicationOrder (see
 * https://www.hl7.org/fhir/DSTU2/medicationorder.html) but instead
 * stores only the information we're interested in seeing.
 */
var MedicationOrder = /** @class */ (function (_super) {
    __extends(MedicationOrder, _super);
    /**
     * Makes an MedicationOrder out of a list of MedicationAdministrations.
     * https://www.hl7.org/fhir/DSTU2/medicationorder.html
     * @param json The json representing this MedicationOrder.
     * @param requestId The x-request-id of the request that acquired this
     *     medication order's data.
     */
    function MedicationOrder(json, requestId) {
        var _this = 
        // A MedicationOrder's label is one of the following in order of preference:
        // 1) the medication reference's display anme
        // 2) the medication encoding's text
        // 3) the order's ID
        _super.call(this, json.medicationReference ? json.medicationReference.display :
            json.medicationCodeableConcept ?
                json.medicationCodeableConcept.text :
                json.id, requestId) || this;
        _this.json = json;
        _this.dosageRetrievalError = 'Could not retrieve dosage instructions.';
        // By default, we set the instruction message as the retrieval error message,
        // and change it if we find a valid dosage instruction.
        _this.dosageInstruction = _this.dosageRetrievalError;
        if (json.dosageInstruction && json.dosageInstruction[0]) {
            if (json.dosageInstruction.length > 1) {
                throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](new Set([_this.requestId]), 'JSON must only include one dosage instruction.', json);
            }
            _this.dosageInstruction = json.dosageInstruction[0].text;
        }
        _this.orderId = json.id;
        _this.status = json.status;
        _this.rxNormCode = _fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__["ResultClass"].extractMedicationEncoding(json);
        if (!(_this.rxNormCode && _this.label)) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](new Set([_this.requestId]), 'JSON must include RxNormCode and a label to be included as a MedicationOrder.', json);
        }
        // Check this MedicationOrder label against the RxNorm label.
        if (_this.label.toLowerCase() !== _this.rxNormCode.label.toLowerCase()) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](new Set([_this.requestId]), "The label for this MedicationOrder's RxNorm code doesn't match " +
                ("the label in the data. MedicationOrder label: " + _this.label + ". ") +
                ("RxNorm label: " + _this.rxNormCode.label + "."));
        }
        return _this;
    }
    return MedicationOrder;
}(_fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__["ResultClass"]));

/**
 * This object stores a FHIR MedicationOrder object along with additional
 * information including MedicationAdministration information.
 *
 * During initialization, it calculates first/last medication administrations
 * based on the list of medication administrations that the
 * AnnotatedMedicationOrder is initialized with. It does NOT fetch all
 * administrations for the entire order - since this is a very time consuming
 * FHIR call.
 */
var AnnotatedMedicationOrder = /** @class */ (function (_super) {
    __extends(AnnotatedMedicationOrder, _super);
    function AnnotatedMedicationOrder(order, medicationAdministrations) {
        var _this = _super.call(this, order.label, order.requestId) || this;
        _this.order = order;
        _this.setMedicationAdministrations(medicationAdministrations);
        return _this;
    }
    /**
     * Sets the MedicationAdministration info for this AnnotatedMedicationOrder.
     * @param medicationAdministrations MedicationAdministrations associated with
     *     the order.
     * @throws Error if the label for the list of administrations does not match
     *     the label for this order.
     */
    AnnotatedMedicationOrder.prototype.setMedicationAdministrations = function (medicationAdministrations) {
        if (!medicationAdministrations) {
            return;
        }
        var sortedMedAdmins = medicationAdministrations.sort(function (a, b) {
            return a.timestamp.toMillis() - b.timestamp.toMillis();
        });
        this.firstAdministration = sortedMedAdmins[0];
        this.lastAdministration =
            sortedMedAdmins[medicationAdministrations.length - 1];
        var annotatedAdmins = [];
        for (var i = 0; i < sortedMedAdmins.length; i++) {
            var admin = sortedMedAdmins[i];
            // if i = 0, this is the first dose so we set the previous
            // dose to undefined. Otherwise, the previous dose is the
            // medication administration at the previous index
            var previousDose = i > 0 ? annotatedAdmins[i - 1] : undefined;
            var annotated = new _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_0__["AnnotatedAdministration"](admin, previousDose);
            annotatedAdmins.push(annotated);
        }
        this.medicationAdministrationSet =
            new _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_0__["MedicationAdministrationSet"](annotatedAdmins);
    };
    return AnnotatedMedicationOrder;
}(_fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__["ResultClass"]));

/**
 * A set of MedicationOrders that belong together as part of the same
 * series, representing all orders for the medicine in a given time period.
 */
var MedicationOrderSet = /** @class */ (function (_super) {
    __extends(MedicationOrderSet, _super);
    /**
     * Constructor for MedicationOrderSet.
     * @param MedicationOrderList The list of MedicationOrders belonging
     *     together. This list is sorted by first MedicationAdministration for
     *     each order.
     * @throws Error if the observations have different labels/RxNormCodes, or
     *     if there is not a label/RxNormCode.
     */
    function MedicationOrderSet(medicationOrderList) {
        var _this = this;
        // Sort the list by first administration.
        medicationOrderList = medicationOrderList.sort(function (a, b) {
            return a.firstAdministration.timestamp.toMillis() -
                b.firstAdministration.timestamp.toMillis();
        });
        _this = _super.call(this, medicationOrderList) || this;
        // Set the RxNormCode and MedicationConceptGroup for this
        // MedicationOrderSet.
        if (medicationOrderList.length > 0) {
            var firstRxNorm = medicationOrderList[0].order.rxNormCode;
            if (!firstRxNorm) {
                throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](_this.requestIds, 'The first resource does not have an RxNorm code.');
            }
            for (var _i = 0, medicationOrderList_1 = medicationOrderList; _i < medicationOrderList_1.length; _i++) {
                var rs = medicationOrderList_1[_i];
                if (rs.order.rxNormCode !== firstRxNorm) {
                    throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](_this.requestIds, 'The resource list in this set has mixed RxNorm codes.');
                }
            }
            _this.rxNormCode = firstRxNorm;
            _this.medicationConcept = _this.rxNormCode.displayGrouping;
            _this.minDose = Math.min.apply(Math, medicationOrderList.map(function (x) { return x.medicationAdministrationSet.minDose; }));
            _this.maxDose = Math.max.apply(Math, medicationOrderList.map(function (x) { return x.medicationAdministrationSet.maxDose; }));
            var units = new Set(medicationOrderList.map(function (x) { return x.medicationAdministrationSet.unit; }));
            if (units.size > 1) {
                throw new _result_error__WEBPACK_IMPORTED_MODULE_2__["ResultError"](_this.requestIds, "Different units in the order set: " + Array.from(units.values()));
            }
            _this.unit = Object(_utils_unit_utils__WEBPACK_IMPORTED_MODULE_3__["fixUnitAbbreviations"])(Array.from(units.values())[0]);
        }
        return _this;
    }
    return MedicationOrderSet;
}(_fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__["FhirResourceSet"]));

/* tslint:enable:object-literal-shorthand*/


/***/ }),

/***/ "./src/app/fhir-resources/medication.ts":
/*!**********************************************!*\
  !*** ./src/app/fhir-resources/medication.ts ***!
  \**********************************************/
/*! exports provided: ContainedMedication */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContainedMedication", function() { return ContainedMedication; });
/* harmony import */ var _conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../conceptmappings/resource-codes/rx-norm */ "./src/app/conceptmappings/resource-codes/rx-norm.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _dosage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dosage */ "./src/app/fhir-resources/dosage.ts");
/* harmony import */ var _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/**
 * This object represents relevant components of a medication contained as part
 * of a MedicationAdministration.
 * This is not a FHIR resource, and differs from the defined Medication
 * documentation at http://hl7.org/fhir/dstu2/medication.html.
 */
var ContainedMedication = /** @class */ (function (_super) {
    __extends(ContainedMedication, _super);
    function ContainedMedication(json, ingredients, requestId) {
        var _this = _super.call(this, json.code ? json.code.text : null, requestId) || this;
        // We want to construct new Medications for jsons containing RxNorm codes.
        if (json.resourceType !== 'Medication') {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([_this.requestId]), 'Resource must be of type Medication', json);
        }
        if (json.code) {
            if (json.code.coding) {
                _this.code =
                    json.code.coding
                        .map(
                    // Map the codes to a boolean that is true only if the
                    // encoding is an RxNormCode encoding, and the RxNorm code
                    // appeas in our RxNormCode list that we care about.
                    function (coding) { return (!coding.system ||
                        coding.system.indexOf(_conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_0__["RxNormCode"].CODING_STRING) !== -1) &&
                        _conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_0__["RxNormCode"].fromCodeString(coding.code); })
                        // Filter out any codes that are not RxNorm codes.
                        .filter(function (code) { return !!code; })[0];
            }
        }
        if (!_this.code) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([_this.requestId]), 'Medication must have RxNorm code to be useful', json);
        }
        _this.id = json.id;
        var reference = ingredients.get(_this.id);
        if (!reference) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([_this.requestId]), 'Medication info must have been contained in ingredient list.', json);
        }
        if (_this.id) {
            //  The dosage format is different for contained
            // portions of Medications.
            var dosage = {
                dosage: {
                    quantity: {
                        value: reference.amount.numerator ?
                            reference.amount.numerator.value :
                            null,
                        unit: reference.amount.numerator ? reference.amount.numerator.unit :
                            null
                    },
                }
            };
            _this.dosage = new _dosage__WEBPACK_IMPORTED_MODULE_2__["Dosage"](dosage);
        }
        return _this;
    }
    return ContainedMedication;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_3__["ResultClass"]));



/***/ }),

/***/ "./src/app/fhir-resources/microbio-report.ts":
/*!***************************************************!*\
  !*** ./src/app/fhir-resources/microbio-report.ts ***!
  \***************************************************/
/*! exports provided: MicrobioReport */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MicrobioReport", function() { return MicrobioReport; });
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../constants */ "./src/constants.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./diagnostic-report */ "./src/app/fhir-resources/diagnostic-report.ts");
/* harmony import */ var _observation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observation */ "./src/app/fhir-resources/observation.ts");
/* harmony import */ var _specimen__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./specimen */ "./src/app/fhir-resources/specimen.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.





// TODO: Issue #31 (Update mapping for string enums)
// https://stackoverflow.com/questions/44883072/reverse-mapping-for-string-enums
var statusToEnumMap = new Map([
    ['registered', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Registered],
    ['partial', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Partial],
    ['preliminary', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Preliminary],
    ['final', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Final],
    ['amended', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Amended],
    ['corrected', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Corrected],
    ['appended', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Appended],
    ['cancelled', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Cancelled],
    ['entered-in-error', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].EnteredInError],
    ['unknown', _diagnostic_report__WEBPACK_IMPORTED_MODULE_2__["DiagnosticReportStatus"].Unknown],
]);
/**
 * Resource for MicrobioReport.
 * The parsing for this class is heavily influenced by the custom API BCH
 * built to return DiagnosticReports for microbiology data. In particular, we
 * only parse out specimens and results from the "contained" portion of the
 * resource instead of supporting retrieval by reference since the Cerner
 * implementation of the FHIR standard won't allow microbiology retrieval.
 *
 * This currently does not extend DiagnosticReport. TODO: Issue #24- maintain
 * More clearly delineate what belongs in FHIR resources and what is
 * added/derived
 */
var MicrobioReport = /** @class */ (function () {
    function MicrobioReport(json, requestId) {
        /** Results in the form of observations */
        this.results = new Array();
        this.requestId = requestId;
        if (json.id) {
            this.id = json.id;
        }
        if (!json.status) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'The report needs a status to be useful.', json);
        }
        this.status = statusToEnumMap.get(json.status);
        // Contained resources may be either specimens or observations.
        var contained = json.contained;
        var specimens = [];
        for (var _i = 0, contained_1 = contained; _i < contained_1.length; _i++) {
            var rsc = contained_1[_i];
            if (rsc.resourceType === _constants__WEBPACK_IMPORTED_MODULE_0__["FhirResourceType"].Specimen) {
                specimens.push(new _specimen__WEBPACK_IMPORTED_MODULE_4__["Specimen"](rsc, this.requestId));
            }
            else if (rsc.resourceType === _constants__WEBPACK_IMPORTED_MODULE_0__["FhirResourceType"].Observation) {
                try {
                    this.results.push(new _observation__WEBPACK_IMPORTED_MODULE_3__["Observation"](rsc, this.requestId));
                }
                catch (err) {
                    // silently ignore observations within diagnostic reports that have
                    // errors. Errors may occur because an observation may not have a
                    // LOINC code we recognize or may have an inconsistent label.
                    // Please see Observation constructor for all error cases.
                    console.log(err);
                }
            }
            // Silently ignore all other contained resource types.
        }
        if (specimens.length > 1) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'The report cannot have multiple specimens.');
        }
        this.specimen = specimens[0];
    }
    /**
     * The custom microbiology API provided does not allow for calling for
     * a specific microbio code, so this function parses the entire anticipated
     * JSON repsonse and filters by code.
     * @param json The JSON retrieved from the server.
     * @param codeGroup The CodeGroup of tests we're looking for.
     */
    MicrobioReport.parseAndFilterMicrobioData = function (json, codeGroup) {
        if (!json || !json.entry) {
            return [];
        }
        // We cannot get the request ID from the Microbiology response. Therefore
        // we hardcode the request ID to just be a constant string.
        var requestId = 'Microbiology Request';
        var diagnosticReports = json.entry.map(function (result) { return new MicrobioReport(result.resource, requestId); });
        var mapToUpdate = new Map();
        // Get all unique codes for all DiagnosticReport results.
        for (var _i = 0, diagnosticReports_1 = diagnosticReports; _i < diagnosticReports_1.length; _i++) {
            var report = diagnosticReports_1[_i];
            var codes = report.results.map(function (r) { return r.codes; })
                .reduce(function (prev, curr) {
                return prev.concat(curr);
            }, []);
            var uniqueCodes = Array.from(new Set(codes));
            for (var _a = 0, uniqueCodes_1 = uniqueCodes; _a < uniqueCodes_1.length; _a++) {
                var code = uniqueCodes_1[_a];
                var existing = mapToUpdate.get(code);
                if (!existing) {
                    existing = [];
                }
                existing.push(report);
                mapToUpdate.set(code, existing);
            }
        }
        var reports = new Array();
        for (var _b = 0, _c = codeGroup.resourceCodes; _b < _c.length; _b++) {
            var code = _c[_b];
            if (mapToUpdate.has(code)) {
                reports = reports.concat(mapToUpdate.get(code));
            }
        }
        return reports;
    };
    return MicrobioReport;
}());



/***/ }),

/***/ "./src/app/fhir-resources/narrative.ts":
/*!*********************************************!*\
  !*** ./src/app/fhir-resources/narrative.ts ***!
  \*********************************************/
/*! exports provided: Narrative */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Narrative", function() { return Narrative; });
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
/**
 * Fhir documentation: https://www.hl7.org/fhir/narrative.html
 * Exists as an attribute of DomainResource
 * (https://www.hl7.org/fhir/DSTU2/domainresource.html)
 */
var Narrative = /** @class */ (function () {
    function Narrative(jsonText) {
        if (jsonText) {
            this.div = jsonText.div;
            this.status = jsonText.status;
        }
    }
    return Narrative;
}());



/***/ }),

/***/ "./src/app/fhir-resources/observation-interpretation-valueset.ts":
/*!***********************************************************************!*\
  !*** ./src/app/fhir-resources/observation-interpretation-valueset.ts ***!
  \***********************************************************************/
/*! exports provided: OBSERVATION_INTERPRETATION_VALUESET_URL, CHECK_RESULT_CODE, NEGFLORA_CODE, NEG_CODE, NORMAL, PARTIAL, ObservationInterpretation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OBSERVATION_INTERPRETATION_VALUESET_URL", function() { return OBSERVATION_INTERPRETATION_VALUESET_URL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CHECK_RESULT_CODE", function() { return CHECK_RESULT_CODE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NEGFLORA_CODE", function() { return NEGFLORA_CODE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NEG_CODE", function() { return NEG_CODE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NORMAL", function() { return NORMAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PARTIAL", function() { return PARTIAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObservationInterpretation", function() { return ObservationInterpretation; });
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
/** This is the URL for the coding system for observation interpretations. */
var OBSERVATION_INTERPRETATION_VALUESET_URL = 'http://hl7.org/fhir/ValueSet/observation-interpretation';
/**
 * These are codes corresponding to ObservationInterpretations used in
 * MicrobioGraph.
 */
var CHECK_RESULT_CODE = 'CHECKRESULT';
var NEGFLORA_CODE = 'NEGORFLORA';
var NEG_CODE = 'NEG';
var NORMAL = 'N';
var PARTIAL = 'Partial';
/**
 * Represents the possible interpretations for observations. Each interpretation
 * has a code (usually 1-3 characters) plus a text description for display.
 * This class also keeps track of a map of codes to display text.
 */
var ObservationInterpretation = /** @class */ (function () {
    function ObservationInterpretation(code, display) {
        this.code = code;
        this.display = display;
        ObservationInterpretation.codeToObject.set(code, this);
    }
    ObservationInterpretation.codeToObject = new Map();
    return ObservationInterpretation;
}());

/**
 * These are the FHIR standard value set values.
 * http://hl7.org/fhir/valueset-observation-interpretation.html
 */
var STANDARD_FHIR_INTERPRETATIONS = [
    new ObservationInterpretation('<', 'Off scale low'),
    new ObservationInterpretation('>', 'Off scale high'),
    new ObservationInterpretation('A', 'Abnormal'),
    new ObservationInterpretation('A', 'Critically abnormal'),
    new ObservationInterpretation('AC', 'Anti-complementary substances present'),
    new ObservationInterpretation('B', 'Better'),
    new ObservationInterpretation('D', 'Significant change down'),
    new ObservationInterpretation('DET', 'Detected'),
    new ObservationInterpretation('H', 'High'),
    new ObservationInterpretation('HH', 'Critically high'),
    new ObservationInterpretation('HM', 'Hold for Medical Review'),
    new ObservationInterpretation('HU', 'Very high'),
    new ObservationInterpretation('I', 'Intermediate'),
    new ObservationInterpretation('IE', 'Insufficient evidence'),
    new ObservationInterpretation('IND', 'Indeterminate'),
    new ObservationInterpretation('L', 'Low'),
    new ObservationInterpretation('LL', 'Critically low'),
    new ObservationInterpretation('LU', 'Very low'),
    new ObservationInterpretation('MS', 'Moderately susceptible. Indicates for microbiology susceptibilities only.'),
    new ObservationInterpretation(NORMAL, 'Normal'),
    new ObservationInterpretation('ND', 'Not Detected'),
    new ObservationInterpretation(NEG_CODE, 'Negative'),
    new ObservationInterpretation('NR', 'Non-reactive'),
    new ObservationInterpretation('NS', 'Non-susceptible'),
    new ObservationInterpretation('null', 'No range defined, or normal ranges don\'t apply'),
    new ObservationInterpretation('OBX', 'Interpretation qualifiers in separate OBX segments'),
    new ObservationInterpretation('POS', 'Positive'),
    new ObservationInterpretation('QCF', 'Quality Control Failure'),
    new ObservationInterpretation('R', 'Resistant'),
    new ObservationInterpretation('RR', 'Reactive'),
    new ObservationInterpretation('S', 'Susceptible'),
    new ObservationInterpretation('SDD', 'Susceptible-dose dependent'),
    new ObservationInterpretation('SYN-R', 'Synergy - resistant'),
    new ObservationInterpretation('SYN-S', 'Synergy - susceptible'),
    new ObservationInterpretation('TOX', 'Cytotoxic substance present'),
    new ObservationInterpretation('U', 'Significant change up'),
    new ObservationInterpretation('VS', 'Very susceptible. Indicates for microbiology susceptibilities only.'),
    new ObservationInterpretation('W', 'Worse'),
    new ObservationInterpretation('WR', 'Weakly reactive')
];
/**
 * This valueset is extensible, so here are some that BCH extends it with
 * for its microbiology results.
 */
var BCH_CUSTOM_INTERPRETATIONS = [
    new ObservationInterpretation(CHECK_RESULT_CODE, 'Check result'),
    new ObservationInterpretation(NEGFLORA_CODE, 'Negative or Flora')
];
var ALL_INTERPRETATIONS = [].concat(BCH_CUSTOM_INTERPRETATIONS, STANDARD_FHIR_INTERPRETATIONS);


/***/ }),

/***/ "./src/app/fhir-resources/observation.ts":
/*!***********************************************!*\
  !*** ./src/app/fhir-resources/observation.ts ***!
  \***********************************************/
/*! exports provided: ObservationStatus, Observation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObservationStatus", function() { return ObservationStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observation", function() { return Observation; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _conceptmappings_resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../conceptmappings/resource-codes/bch-microbio-code */ "./src/app/conceptmappings/resource-codes/bch-microbio-code.ts");
/* harmony import */ var _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../conceptmappings/resource-codes/loinc-code */ "./src/app/conceptmappings/resource-codes/loinc-code.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _utils_unit_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/unit_utils */ "./src/app/utils/unit_utils.ts");
/* harmony import */ var _observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./observation-interpretation-valueset */ "./src/app/fhir-resources/observation-interpretation-valueset.ts");
/* harmony import */ var _sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();







/**
 * FHIR element for ObservationStatus, from the DSTU2 version of the
 * standard.
 * http://hl7.org/fhir/DSTU2/valueset-observation-status.html
 */
var ObservationStatus;
(function (ObservationStatus) {
    ObservationStatus["Registered"] = "Registered";
    ObservationStatus["Preliminary"] = "Preliminary";
    ObservationStatus["Final"] = "Final";
    ObservationStatus["Amended"] = "Amended";
    ObservationStatus["Cancelled"] = "Cancelled";
    ObservationStatus["EnteredInError"] = "Enteredinerror";
    ObservationStatus["Unknown"] = "Unknown";
})(ObservationStatus || (ObservationStatus = {}));
var statusToEnumMap = new Map([
    ['registered', ObservationStatus.Registered],
    ['preliminary', ObservationStatus.Preliminary],
    ['final', ObservationStatus.Final],
    ['amended', ObservationStatus.Amended],
    ['cancelled', ObservationStatus.Cancelled],
    ['entered-in-error', ObservationStatus.EnteredInError],
    ['unknown', ObservationStatus.Unknown],
]);
/**
 * This object represents a FHIR Observation. It does not contain all the
 * information in a standard Observation
 * (see https://www.hl7.org/fhir/observation.html#resource) but instead stores
 * only the information we're interested in seeing.
 *
 * In general, in terms of the MedTimeLine app, we represent an Observation
 * as a point on a line graph for a lab or a vital sign. Observations also hold
 * information about microbiology report results that show up in the
 * microbiology graph tooltips.
 */
var Observation = /** @class */ (function (_super) {
    __extends(Observation, _super);
    /**
     * Makes an Observation out of a JSON object that represents a
     * a FHIR observation.
     * @param json A JSON object that represents a FHIR observation.
     * @param requestId The x-request-id of the request that acquired this
     *     observation's data.
     */
    function Observation(json, requestId) {
        var _this = _super.call(this, Observation.getLabel(json), requestId) || this;
        _this.json = json;
        _this.codes = [];
        _this.innerComponents = [];
        _this.timestamp = Observation.getTimestamp(json);
        if (json.code) {
            if (json.code.coding) {
                if (json.code.coding[0].system === _conceptmappings_resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_1__["BCHMicrobioCode"].CODING_STRING) {
                    _this.codes =
                        json.code.coding
                            .map(function (coding) { return _conceptmappings_resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_1__["BCHMicrobioCode"].fromCodeString(coding.code); })
                            // Filter out any codes that are not in our mapping.
                            .filter(function (code) { return !!code; });
                    _this.display = json.code.coding[0].display;
                }
                else {
                    _this.codes =
                        json.code.coding
                            .map(
                        // Map the codes to a boolean that is true only if the
                        // encoding is a LOINC encoding, and the LOINC code appeas
                        // in our LOINCCode list that we care about.
                        function (coding) { return (!coding.system ||
                            coding.system.indexOf(_conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_2__["LOINCCode"].CODING_STRING) !== -1) &&
                            _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_2__["LOINCCode"].fromCodeString(coding.code); })
                            // Filter out any codes that are not LOINC codes.
                            .filter(function (code) { return !!code; });
                }
            }
        }
        if (json.interpretation) {
            if (json.interpretation.coding) {
                var coding = json.interpretation.coding[0];
                if (coding.system === _observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_5__["OBSERVATION_INTERPRETATION_VALUESET_URL"]) {
                    if (_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_5__["ObservationInterpretation"].codeToObject.has(coding.code)) {
                        _this.interpretation =
                            _observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_5__["ObservationInterpretation"].codeToObject.get(coding.code);
                    }
                    else {
                        throw new _result_error__WEBPACK_IMPORTED_MODULE_3__["ResultError"](new Set([_this.requestId]), 'Unsupported interpretation code.', coding);
                    }
                }
            }
            else if (json.interpretation.text) {
                // BCH uses a non-standard coding system so we make interpretations on
                // the fly.
                _this.interpretation = new _observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_5__["ObservationInterpretation"](json.interpretation.text, json.interpretation.text);
            }
        }
        if (json.component) {
            json.component.forEach(function (element) {
                var innerObs = new Observation(element, _this.requestId);
                if (!innerObs.timestamp) {
                    innerObs.timestamp = _this.timestamp;
                }
                _this.innerComponents.push(innerObs);
            });
        }
        if (!_this.codes || _this.codes.length === 0) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_3__["ResultError"](new Set([_this.requestId]), 'Observations have to have a LOINC code to be useful. ', json);
        }
        if (!_this.label) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_3__["ResultError"](new Set([_this.requestId]), 'Observations have to have a label to be useful.', json);
        }
        // Check the observation label against the LOINC code label.
        if (_this.label.toLowerCase() !== _this.codes[0].label.toLowerCase()) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_3__["ResultError"](new Set([_this.requestId]), "The label for this observation's LOINC code doesn't match " +
                ("the label in the data. Observation label: " + _this.label + ". ") +
                ("LOINC label: " + _this.codes[0].label + ". "), json);
        }
        _this.value = json.valueQuantity ? json.valueQuantity : null;
        if (_this.value) {
            _this.unit = Object(_utils_unit_utils__WEBPACK_IMPORTED_MODULE_4__["fixUnitAbbreviations"])(_this.value.unit);
        }
        // We must calculate precision before the value is stored as a number,
        // where precision is lost. If the value stored in the json has
        // a precision of 0 and is less than 1, then we change the precision to
        // 1 to display decimals and better UI.
        if (json.valueQuantity && json.valueQuantity.value) {
            var values = json.valueQuantity.value.toString().split('.');
            _this.precision = values.length > 1 ? values[1].length : 0;
            if (values[0] === '0' && _this.precision === 0) {
                _this.precision = 1;
            }
        }
        else {
            // If the values are not present and are instead displayed as a value
            // of 0, the precision is set to 1 to prevent duplicated display of values
            _this.precision = 1;
        }
        _this.result =
            json.valueCodeableConcept ? json.valueCodeableConcept.text : null;
        if (_this.value === null && _this.result === null && !_this.interpretation &&
            (_this.innerComponents && _this.innerComponents.length === 0)) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_3__["ResultError"](new Set([_this.requestId]), 'An Observation must have a value, result, inner components, ' +
                'or an interpretation to be useful.', json);
        }
        // The FHIR standard says that if there's only one range then it should be
        // what is "normal" for that measure. Otherwise they should be labeled.
        // We are going to err on the side of safety and not include a normal
        // range unless there's just the one, and it includes a high and low
        // field. https://www.hl7.org/fhir/DSTU2/observation.html#4.20.4.4
        if (json.referenceRange && json.referenceRange.length === 1) {
            if (json.referenceRange[0].low && json.referenceRange[0].high) {
                _this.normalRange = [
                    json.referenceRange[0].low.value, json.referenceRange[0].high.value
                ];
            }
        }
        _this.status = statusToEnumMap.get(json.status);
        return _this;
    }
    Observation.getLabel = function (json) {
        var label;
        if (json.code) {
            label = json.code.text;
            if (json.code.coding) {
                if (json.code.coding[0].system === _conceptmappings_resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_1__["BCHMicrobioCode"].CODING_STRING) {
                    label = json.code.coding[0].display;
                }
            }
        }
        return label;
    };
    Observation.getTimestamp = function (json) {
        return json.effectiveDateTime ?
            luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.effectiveDateTime).toUTC() :
            json.issued ? luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.issued).toUTC() : null;
    };
    return Observation;
}(_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_6__["ResultClass"]));



/***/ }),

/***/ "./src/app/fhir-resources/sets/fhir-resource-set.ts":
/*!**********************************************************!*\
  !*** ./src/app/fhir-resources/sets/fhir-resource-set.ts ***!
  \**********************************************************/
/*! exports provided: TimestampedObject, ResultClassWithTimestamp, RawResource, ResultClass, FhirResourceSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimestampedObject", function() { return TimestampedObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultClassWithTimestamp", function() { return ResultClassWithTimestamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RawResource", function() { return RawResource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultClass", function() { return ResultClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FhirResourceSet", function() { return FhirResourceSet; });
/* harmony import */ var _conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../conceptmappings/resource-codes/rx-norm */ "./src/app/conceptmappings/resource-codes/rx-norm.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../result-error */ "./src/app/result-error.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var TimestampedObject = /** @class */ (function () {
    function TimestampedObject(timestamp) {
        this.timestamp = timestamp;
    }
    return TimestampedObject;
}());

var ResultClassWithTimestamp = /** @class */ (function (_super) {
    __extends(ResultClassWithTimestamp, _super);
    function ResultClassWithTimestamp(label, requestId, timestamp) {
        var _this = _super.call(this, timestamp) || this;
        _this.label = label;
        _this.requestId = requestId;
        _this.timestamp = timestamp;
        return _this;
    }
    return ResultClassWithTimestamp;
}(TimestampedObject));

var RawResource = /** @class */ (function () {
    function RawResource(json, requestId) {
        this.json = json;
        this.requestId = requestId;
    }
    return RawResource;
}());

/**
 * A class that has label and requestId attributes.
 *
 * TODO: Figure out how to combine with ResultClassWithTimestamp.
 */
var ResultClass = /** @class */ (function () {
    function ResultClass(label, requestId) {
        this.label = label;
        this.requestId = requestId;
    }
    /**
     * Parses the passed-in JSON and gets out a RxNormCode.
     *
     * This function prefers to directly get the RxNorm code from the resource's
     * encoding. If it can't get that, it will get the prescription's label,
     * then try to map it back to a RxNorm code. If it can't find a suitable
     * RxNorm code, it will pass back an undefined object.
     */
    ResultClass.extractMedicationEncoding = function (json) {
        var rxNormCode;
        if (json.medicationCodeableConcept) {
            if (json.medicationCodeableConcept.coding) {
                rxNormCode =
                    (json.medicationCodeableConcept.coding
                        .map(
                    // Map the codes to a boolean that is true only if the
                    // encoding is an RxNorm encoding, and the RxNorm code
                    // appears in our RxNormCode list that we care about.
                    function (coding) { return (!coding.system ||
                        coding.system.indexOf(_conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_0__["RxNormCode"].CODING_STRING) !== -1) &&
                        _conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_0__["RxNormCode"].fromCodeString(coding.code); })
                        // Filter out any codes that are not RxNorm codes.
                        .filter(function (code) { return !!code; }))[0];
            }
            return rxNormCode;
        }
    };
    return ResultClass;
}());

/**
 * A set of FHIR resources. All resources that are a part of this set must
 * have the same label.
 */
var FhirResourceSet = /** @class */ (function () {
    /**
     * Constructor for FhirResourceSet.
     * @param resourceList The list of resources belonging together.
     * @throws Error if the resources have different labels, or if there is not
     *     a label.
     */
    function FhirResourceSet(resourceList) {
        this.requestIds = new Set(resourceList.map(function (resource) { return resource.requestId; }));
        if (!resourceList) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](this.requestIds, 'Resource list is undefined.');
        }
        if (resourceList.length > 0) {
            var firstLabel = resourceList[0].label;
            if (!firstLabel) {
                throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](this.requestIds, 'The first resource does not have a label.');
            }
            var allLabels = new Set(resourceList.map(function (rs) { return rs.label.toLowerCase(); }));
            if (allLabels.size !== 1) {
                throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](this.requestIds, "The resource list in this set has mixed labels: " + Array.from(allLabels.values()));
            }
            this.label = firstLabel;
        }
        this.resourceList = resourceList;
    }
    return FhirResourceSet;
}());



/***/ }),

/***/ "./src/app/fhir-resources/sets/observation-set.ts":
/*!********************************************************!*\
  !*** ./src/app/fhir-resources/sets/observation-set.ts ***!
  \********************************************************/
/*! exports provided: ObservationSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObservationSet", function() { return ObservationSet; });
/* harmony import */ var _utils_unit_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/unit_utils */ "./src/app/utils/unit_utils.ts");
/* harmony import */ var _fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * A set of observations that belong together as part of the same series.
 */
var ObservationSet = /** @class */ (function (_super) {
    __extends(ObservationSet, _super);
    /**
     * Constructor for ObservationSet.
     * @param observationList The list of observations belonging together.
     * @throws Error if the observations have different labels, as this indicates
     *     that they are data points from different series, or if there is not
     *     a label.
     */
    function ObservationSet(observationList) {
        var _this = _super.call(this, observationList) || this;
        /**
         * The normal ranges for this set of observations. It maps a timestamp of each
         * Observation with a normal range to the corresponding normal range.
         */
        _this.normalRanges = new Map();
        /**
         * Whether or not any Observations belonging to this ObservationSet contain
         * qualitative results rather than numerical values.
         */
        _this.anyQualitative = false;
        var firstUnit;
        if (observationList.length > 0) {
            firstUnit = observationList[0].observation.unit;
        }
        // Ensure that the labels of the data are all the same.
        var differentUnits = false;
        for (var _i = 0, observationList_1 = observationList; _i < observationList_1.length; _i++) {
            var obs = observationList_1[_i];
            // Some observations may not have a normal range.
            if (obs.observation.normalRange) {
                _this.normalRanges.set(obs.observation.timestamp, obs.observation.normalRange);
            }
            // Some observations may not have a normal range.
            if (obs.observation.unit && obs.observation.unit !== firstUnit) {
                differentUnits = true;
            }
        }
        if (!differentUnits && firstUnit) {
            _this.unit = Object(_utils_unit_utils__WEBPACK_IMPORTED_MODULE_0__["fixUnitAbbreviations"])(firstUnit);
        }
        _this.anyQualitative = observationList.some(function (obs) { return (obs.observation.result !== null && !obs.observation.value); });
        return _this;
    }
    return ObservationSet;
}(_fhir_resource_set__WEBPACK_IMPORTED_MODULE_1__["FhirResourceSet"]));



/***/ }),

/***/ "./src/app/fhir-resources/specimen.ts":
/*!********************************************!*\
  !*** ./src/app/fhir-resources/specimen.ts ***!
  \********************************************/
/*! exports provided: Specimen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Specimen", function() { return Specimen; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.


/**
 * FHIR resource for a Specimen, from the DSTU2 standard.
 * https://www.hl7.org/fhir/DSTU2/specimen.html
 */
var Specimen = /** @class */ (function () {
    function Specimen(json, requestId) {
        this.requestId = requestId;
        if (json.id) {
            this.id = json.id;
        }
        if (!json.type) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'A specimen must have a type to be useful.', json);
        }
        this.type = json.type.text;
        if (!json.collection) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'A specimen must have collection information to be useful.', json);
        }
        if (json.collection.collectedPeriod && json.collection.collectedDateTime) {
            throw new _result_error__WEBPACK_IMPORTED_MODULE_1__["ResultError"](new Set([this.requestId]), 'Only collectedPeriod or collectionDateTime should be defined.' +
                json);
        }
        if (json.collection.collectedPeriod) {
            var collectedPeriod = json.collection.collectedPeriod;
            // If only the start time is present, put it into collectedDateTime.
            if (collectedPeriod.start && !collectedPeriod.end) {
                this.collectedDateTime = luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(collectedPeriod.start);
            }
            else {
                this.collectedPeriod = luxon__WEBPACK_IMPORTED_MODULE_0__["Interval"].fromDateTimes(luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(collectedPeriod.start), luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(collectedPeriod.end));
            }
        }
        if (json.collection.collectedDateTime) {
            this.collectedDateTime =
                luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(json.collection.collectedDateTime);
        }
    }
    return Specimen;
}());



/***/ }),

/***/ "./src/app/fhir-server/fhir-cache.ts":
/*!*******************************************!*\
  !*** ./src/app/fhir-server/fhir-cache.ts ***!
  \*******************************************/
/*! exports provided: FhirCache, MedicationCache, DiagnosticReportCache, ObservationCache, EncounterCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FhirCache", function() { return FhirCache; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationCache", function() { return MedicationCache; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticReportCache", function() { return DiagnosticReportCache; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObservationCache", function() { return ObservationCache; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EncounterCache", function() { return EncounterCache; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../constants */ "./src/constants.ts");
/* harmony import */ var _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../conceptmappings/resource-codes/loinc-code */ "./src/app/conceptmappings/resource-codes/loinc-code.ts");
/* harmony import */ var _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../fhir-resources/diagnostic-report */ "./src/app/fhir-resources/diagnostic-report.ts");
/* harmony import */ var _fhir_resources_encounter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../fhir-resources/encounter */ "./src/app/fhir-resources/encounter.ts");
/* harmony import */ var _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../fhir-resources/medication-administration */ "./src/app/fhir-resources/medication-administration.ts");
/* harmony import */ var _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../fhir-resources/observation */ "./src/app/fhir-resources/observation.ts");
/* harmony import */ var _fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../fhir-resources/sets/fhir-resource-set */ "./src/app/fhir-resources/sets/fhir-resource-set.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();








var GREATER_OR_EQUAL = 'ge';
var LESS_OR_EQUAL = 'le';
var LESS_THAN = 'lt';
/**
 * Gets the next page of search results from the smart API. This function
 * assumes that the same smartApi was used to call the original search.
 *
 * @param smartApi The resolved smartOnFhirClient
 * @param response The response from the previous page of search results
 * @param results The list of all formatted results processed in previous page
 *     responses
 */
function getNextSearchResultsPage(smartApi, response, results) {
    var requestId = response.headers('x-request-id');
    var responseData = response.data.entry || [];
    results = results.concat(responseData.map(function (result) { return new _fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_7__["RawResource"](result.resource, requestId); }));
    // if there are anymore pages, get the next set of results.
    if (response.data.link.some(function (linkItem) { return linkItem.relation === 'next'; })) {
        return smartApi.patient.api.nextPage({ bundle: response.data })
            .then(function (nextResponse) {
            return getNextSearchResultsPage(smartApi, nextResponse, results);
        }, function (rejection) {
            throw rejection;
        });
    }
    return Promise.resolve(results);
}
/**
 * Gets all pages of search results for the given query params. Formats
 * the results into RawResource objects.
 *
 * @param smartApi The resolved smartOnFhirClient
 * @param queryParams the params to pass to the search function
 */
function fetchAllFromFhir(smartApi, queryParams) {
    var results = [];
    return smartApi.patient.api.search(queryParams)
        .then(function (response) {
        return getNextSearchResultsPage(smartApi, response, results)
            .then(function (res) {
            return res.filter(function (result) { return !!result; });
        });
    }, function (rejection) {
        throw rejection;
    });
}
/**
 * Abstract Class for Fetching and Caching FHIR Resources.
 */
var FhirCache = /** @class */ (function () {
    function FhirCache() {
        /**
         * Cache of Raw Resources.
         * A mapping from the timestamp as a date string to a list of RawResources
         * that have that timestamp.
         * We store the date string so that we can test whether the map has a
         * date easily because Datetime equality is not straightforward.
         * We store RawResources instead of the actual resources
         * (MedicationAdministration, Observation, etc) because we want
         * to cache all results, even if one of the resources does not pass the
         * validation done during construction. This way, we do not need to fetch
         * the invalid resource again for the same date range.
         */
        this.cache = new Map();
    }
    /**
     * Splits an Interval date range by day.
     *
     * @param dateRange: the Interval to split into days
     * @returns an array of intervals (each 1 day long) corresponding to the days
     *    in the given date range.
     */
    FhirCache.prototype.splitDateRangeByDay = function (dateRange) {
        return luxon__WEBPACK_IMPORTED_MODULE_0__["Interval"]
            .fromDateTimes(dateRange.start.startOf('day'), dateRange.end.endOf('day'))
            .splitBy({ days: 1 });
    };
    /**
     * Fetches the resources from FHIR for the given date range and updates
     * the cache with these results.
     *
     * The results are stored as RawResources
     * so that a validation error during object creation does not prevent the
     * cache from being updated.
     *
     * @param smartApi: the resolved Smart on FHIR API Client instance
     * @param dateRange: the date range to fetch from FHIR
     */
    FhirCache.prototype.fetchResourceAndAddToCache = function (smartApi, dateRange) {
        var _this = this;
        var queryParams = this.getQueryParams(dateRange);
        // fetches the results from FHIR and groups them by timestamp.
        var fetchAllPromise = fetchAllFromFhir(smartApi, queryParams).then(function (results) {
            var resultMap = new Map();
            for (var _i = 0, results_1 = results; _i < results_1.length; _i++) {
                var result = results_1[_i];
                var resultDate = _this.getTimestampFromRawResource(result).toISODate();
                if (!resultMap.has(resultDate)) {
                    resultMap.set(resultDate, new Array());
                }
                resultMap.get(resultDate).push(result);
            }
            return resultMap;
        });
        // after the data fetch resolves, updates the cache for each day that was
        // fetched with the results that were found. If no results were found for
        // a given day, we set to an empty list.
        return Promise.resolve(fetchAllPromise).then(function (resultMap) {
            var currentTime = luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].utc();
            for (var _i = 0, _a = _this.splitDateRangeByDay(dateRange); _i < _a.length; _i++) {
                var day = _a[_i];
                var dayAsString = day.start.toISODate();
                if (dayAsString === currentTime.toISODate()) {
                    _this.todaysResults = resultMap.get(dayAsString) || [];
                    _this.timeOfLastRefreshOfTodaysResults = currentTime;
                }
                else {
                    _this.cache.set(dayAsString, resultMap.get(dayAsString) || []);
                }
            }
        });
    };
    /** Gets the RawResources from the Cache for each day in the date range. */
    FhirCache.prototype.getResourceFromCache = function (dateRange) {
        var results = new Array();
        for (var _i = 0, _a = this.splitDateRangeByDay(dateRange); _i < _a.length; _i++) {
            var day = _a[_i];
            var dayString = day.start.toISODate();
            if (dayString === luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].utc().toISODate()) {
                results.push.apply(results, this.todaysResults);
            }
            else {
                results.push.apply(results, this.cache.get(dayString));
            }
        }
        return results;
    };
    /**
     * Gets the resources for the given date range.
     *
     * If any days within the date range are not in the cache already, we fetch
     * the results for that range and add them to the cache.
     *
     * Then we return all instances of the Resource that are within the given
     * date range.
     *
     * @param dateRange: the Interval to fetch data within.
     * @returns an array of Resource objects that extend ResultClassWithTimestamp
     */
    FhirCache.prototype.getResource = function (smartApi, dateRange) {
        var _this = this;
        // splits the date range by day and checks if the cache contains that day.
        // Merges days not in the cache into a list of intervals that cover those
        // days.
        var rangesToFetch = luxon__WEBPACK_IMPORTED_MODULE_0__["Interval"].merge(this.splitDateRangeByDay(dateRange).filter(function (day) {
            var currentTime = luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].utc();
            if (day.start.toISODate() === currentTime.toISODate()) {
                // we filter out today if we have refreshed today's results
                // within the last minute.
                return !(_this.timeOfLastRefreshOfTodaysResults &&
                    currentTime
                        .diff(_this.timeOfLastRefreshOfTodaysResults, 'minutes')
                        .minutes < 1);
                // sometimes due to timezone handling we end up with a date that
                // is after today. We do not need to fetch that date.
            }
            else if (day.start.toMillis() > currentTime.toMillis()) {
                return false;
            }
            return !_this.cache.has(day.start.toISODate());
        }));
        // for each date interval, fetch the resource from FHIR and add the data
        // to the cache.
        var fetchPromises = rangesToFetch.map(function (range) {
            return _this.fetchResourceAndAddToCache(smartApi, range);
        });
        // after all date ranges have been fetched from FHIR and added to the
        // cache. Get all data from the cache for the full date range.
        return Promise.all(fetchPromises)
            .then(function (_) {
            return _this.getResourceFromCache(dateRange)
                .map(function (result) { return _this.createFunction(result); })
                .filter(function (result) { return !!result; });
        }, function (rejection) {
            throw rejection;
        });
    };
    return FhirCache;
}());

/** Cache for MedicationAdministrations */
var MedicationCache = /** @class */ (function (_super) {
    __extends(MedicationCache, _super);
    function MedicationCache() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MedicationCache.prototype.getResource = function (smartApi, dateRange) {
        var _this = this;
        // if we have not alraedy loaded all the results into the cache within the
        // App Timespan, add them first. This helps with loading time for subsequent
        // calls for medications.
        if (!this.resultsLoaded) {
            this.resultsLoaded =
                this.fetchResourceAndAddToCache(smartApi, _constants__WEBPACK_IMPORTED_MODULE_1__["APP_TIMESPAN"]);
        }
        return this.resultsLoaded.then(function () {
            return _super.prototype.getResource.call(_this, smartApi, dateRange);
        });
    };
    /**
     * Creates a MedicationAdministration from a RawResource.
     * Note: will return undefined if the Medication Encoding extracted from the
     * RawResource is undefined.
     */
    MedicationCache.prototype.createFunction = function (result) {
        // In the MedicationAdministration constructor we throw an Error if the
        // rxNormCode is undefined. It will be undefined if we do not have a mapping
        // for that rxNormCode. Because we are querying for all
        // MedicationAdministrations (not just a particular code), we need to filter
        // those results out before we try to create the MedicationAdministration
        // object.
        if (_fhir_resources_sets_fhir_resource_set__WEBPACK_IMPORTED_MODULE_7__["ResultClass"].extractMedicationEncoding(result.json)) {
            return new _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_5__["MedicationAdministration"](result.json, result.requestId);
        }
    };
    MedicationCache.prototype.getQueryParams = function (dateRange) {
        return {
            type: _constants__WEBPACK_IMPORTED_MODULE_1__["FhirResourceType"].MedicationAdministration,
            query: {
                effectivetime: {
                    $and: [
                        GREATER_OR_EQUAL + dateRange.start.toISODate(),
                        LESS_OR_EQUAL + dateRange.end.toISODate()
                    ]
                },
                notgiven: 'false',
                status: 'in-progress,completed,on-hold',
                // Despite documentation, this is the number of results per page,
                // not the total number of results.
                // https://groups.google.com/d/msg/cerner-fhir-developers/iW8hXIWcRX0/Y9mA__OqAQAJ
                _count: 200
            }
        };
    };
    MedicationCache.prototype.getTimestampFromRawResource = function (result) {
        return _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_5__["MedicationAdministration"].getTimestamp(result.json);
    };
    return MedicationCache;
}(FhirCache));

/** Cache for DiagnosticReports */
var DiagnosticReportCache = /** @class */ (function (_super) {
    __extends(DiagnosticReportCache, _super);
    function DiagnosticReportCache() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DiagnosticReportCache.prototype.createFunction = function (result) {
        return new _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_3__["DiagnosticReport"](result.json, result.requestId);
    };
    DiagnosticReportCache.prototype.getQueryParams = function (dateRange) {
        return {
            type: _constants__WEBPACK_IMPORTED_MODULE_1__["FhirResourceType"].DiagnosticReport,
            query: {
                date: {
                    $and: [
                        GREATER_OR_EQUAL + dateRange.start.toISODate(),
                        // We are adding one millisecond to the end date because we want
                        // less or equal to the date range, but the spec only allows
                        // strictly less than param.
                        LESS_THAN + dateRange.end.plus({ millisecond: 1 }).toISODate()
                    ]
                }
            }
        };
    };
    DiagnosticReportCache.prototype.getTimestampFromRawResource = function (result) {
        return _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_6__["Observation"].getTimestamp(result.json);
    };
    return DiagnosticReportCache;
}(FhirCache));

/** Cache for Observations */
var ObservationCache = /** @class */ (function (_super) {
    __extends(ObservationCache, _super);
    function ObservationCache(code) {
        var _this = _super.call(this) || this;
        _this.code = code;
        return _this;
    }
    ObservationCache.prototype.createFunction = function (result) {
        return new _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_6__["Observation"](result.json, result.requestId);
    };
    ObservationCache.prototype.getQueryParams = function (dateRange) {
        return {
            type: _constants__WEBPACK_IMPORTED_MODULE_1__["FhirResourceType"].Observation,
            query: {
                code: _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_2__["LOINCCode"].CODING_STRING + '|' + this.code.codeString,
                date: {
                    $and: [
                        GREATER_OR_EQUAL + dateRange.start.toISODate(),
                        LESS_OR_EQUAL + dateRange.end.toISODate()
                    ]
                },
                // 100 is the maximum page size allowed by Cerner for observations.
                _count: 100
            }
        };
    };
    ObservationCache.prototype.getTimestampFromRawResource = function (result) {
        return _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_6__["Observation"].getTimestamp(result.json);
    };
    return ObservationCache;
}(FhirCache));

/** Cache for Encounters. */
var EncounterCache = /** @class */ (function () {
    function EncounterCache() {
    }
    /**
     * Gets all Encounters.
     * Note: Encounters cannot be searched by date, so this will return all
     * encounters.
     */
    EncounterCache.prototype.getResource = function (smartApi) {
        var _this = this;
        var currentTime = luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].utc();
        var cachePromise;
        // if the last fetch of Encounters from FHIR was within 1 minute, we don't
        // need to fetch them again. Since we may call this method multiple times
        // when loading the page, we want to ensure we aren't making unecessary
        // calls.
        if (this.lastFhirFetchTime &&
            currentTime.diff(this.lastFhirFetchTime, 'minutes').minutes < 1) {
            cachePromise = Promise.resolve(this.cache);
        }
        else {
            this.lastFhirFetchTime = currentTime;
            var queryParams = {
                type: _constants__WEBPACK_IMPORTED_MODULE_1__["FhirResourceType"].Encounter,
            };
            cachePromise = fetchAllFromFhir(smartApi, queryParams).then(function (results) {
                _this.cache = results;
                _this.lastFhirFetchTime = currentTime;
                return results;
            });
        }
        return Promise.resolve(cachePromise)
            .then(function (results) {
            return results
                .filter(function (result) {
                var status = result.json.status;
                // Lots of encounters have errors where start times come
                // after end times. To reduce those errors surfacing, we
                // pre-parse start and end times, as well as statuses, and
                // only return those encounters that are in the application
                // timespan and aren't cancelled or in the future.
                var startTime = _fhir_resources_encounter__WEBPACK_IMPORTED_MODULE_4__["Encounter"].getStartTime(result.json);
                var endTime = _fhir_resources_encounter__WEBPACK_IMPORTED_MODULE_4__["Encounter"].getEndTime(result.json);
                var inTimeSpan = (startTime && _constants__WEBPACK_IMPORTED_MODULE_1__["APP_TIMESPAN"].contains(startTime)) ||
                    (endTime && _constants__WEBPACK_IMPORTED_MODULE_1__["APP_TIMESPAN"].contains(endTime));
                return status !== 'cancelled' && status !== 'planned' &&
                    inTimeSpan;
            })
                .map(function (result) { return new _fhir_resources_encounter__WEBPACK_IMPORTED_MODULE_4__["Encounter"](result.json, result.requestId); });
        }, function (rejection) {
            throw rejection;
        });
    };
    return EncounterCache;
}());



/***/ }),

/***/ "./src/app/fhir-server/fhir-http.service.ts":
/*!**************************************************!*\
  !*** ./src/app/fhir-server/fhir-http.service.ts ***!
  \**************************************************/
/*! exports provided: FhirHttpService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FhirHttpService", function() { return FhirHttpService; });
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../constants */ "./src/constants.ts");
/* harmony import */ var _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../conceptmappings/resource-code-creator */ "./src/app/conceptmappings/resource-code-creator.ts");
/* harmony import */ var _conceptmappings_resource_code_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../conceptmappings/resource-code-manager */ "./src/app/conceptmappings/resource-code-manager.ts");
/* harmony import */ var _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../conceptmappings/resource-codes/loinc-code */ "./src/app/conceptmappings/resource-codes/loinc-code.ts");
/* harmony import */ var _debugger_debugger_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../debugger/debugger.service */ "./src/app/debugger/debugger.service.ts");
/* harmony import */ var _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../fhir-resources/diagnostic-report */ "./src/app/fhir-resources/diagnostic-report.ts");
/* harmony import */ var _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../fhir-resources/medication-administration */ "./src/app/fhir-resources/medication-administration.ts");
/* harmony import */ var _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../fhir-resources/medication-order */ "./src/app/fhir-resources/medication-order.ts");
/* harmony import */ var _fhir_resources_microbio_report__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../fhir-resources/microbio-report */ "./src/app/fhir-resources/microbio-report.ts");
/* harmony import */ var _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../fhir-resources/observation */ "./src/app/fhir-resources/observation.ts");
/* harmony import */ var _fhir_config__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../fhir_config */ "./src/app/fhir_config.js");
/* harmony import */ var _fhir_config__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_fhir_config__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _fhir_cache__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./fhir-cache */ "./src/app/fhir-server/fhir-cache.ts");
/* harmony import */ var _fhir_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./fhir.service */ "./src/app/fhir-server/fhir.service.ts");
/* harmony import */ var _smart_on_fhir_client__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./smart-on-fhir-client */ "./src/app/fhir-server/smart-on-fhir-client.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};

















var FhirHttpService = /** @class */ (function (_super) {
    __extends(FhirHttpService, _super);
    function FhirHttpService(debugService, smartOnFhirClient, http, resourceCodeCreator) {
        var _this = _super.call(this, resourceCodeCreator) || this;
        _this.debugService = debugService;
        _this.http = http;
        // Create a promise which resolves to the smart API when the smart API is
        // ready. This allows clients of this service to call service methods
        // which depend on the API, regardless of whether the API is ready or not.
        _this.smartApiPromise = new Promise(function (resolve, reject) { return smartOnFhirClient.oauth2.ready(function (smart) { return resolve(smart); }, function (err) { return reject(err); }); });
        return _this;
    }
    FhirHttpService_1 = FhirHttpService;
    /**
     * Gets observations from a specified date range with a specific LOINC code.
     * @param code The LOINC code for which to get observations.
     * @param dateRange The time interval observations should fall between.
     */
    FhirHttpService.prototype.getObservationsWithCode = function (code, dateRange) {
        var cacheForCode = FhirHttpService_1.observationCache.get(code);
        if (!cacheForCode) {
            cacheForCode = new _fhir_cache__WEBPACK_IMPORTED_MODULE_14__["ObservationCache"](code);
            FhirHttpService_1.observationCache.set(code, cacheForCode);
        }
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], _ = _a[1];
            return cacheForCode.getResource(smartApi, dateRange)
                .then(function (results) {
                return results.filter(function (result) {
                    return result.status !== _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_12__["ObservationStatus"].EnteredInError;
                });
            });
        });
    };
    /**
     * Checks if there are any observations with the given LOINC Code within the
     * given date range.
     *
     * Note: Only fetches single page of results from FHIR server to enhance
     * performance.
     *
     * @param code LOINC code to check if there are any observations for
     * @param dateRange the time interval the observations should fall between
     */
    FhirHttpService.prototype.observationsPresentWithCode = function (code, dateRange) {
        var queryParams = new _fhir_cache__WEBPACK_IMPORTED_MODULE_14__["ObservationCache"](code).getQueryParams(dateRange);
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], codes = _a[1];
            return smartApi.patient.api.search(queryParams)
                .then(function (response) { return !!response.data.entry; });
        });
    };
    /**
     * Checks which RxNormCodes are present within the App Timespan.
     *
     * As a result, the MedicationCache is populated with all data within the
     * App Timespan.
     *
     * @returns A Promise that resolves to the Set of RxNormCodes with data
     *     available.
     */
    FhirHttpService.prototype.dataAvailableForMedications = function () {
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], _ = _a[1];
            return FhirHttpService_1.medicationCache
                .getResource(smartApi, _constants__WEBPACK_IMPORTED_MODULE_3__["APP_TIMESPAN"])
                .then(function (results) {
                var codesPresent = new Set();
                results.forEach(function (med) { return codesPresent.add(med.rxNormCode); });
                return codesPresent;
            });
        });
    };
    /**
     * Gets medication data from a specified date range with a specific Rx code
     * @param code The RxNormCode codes for which to get observations.
     * @param dateRange The time interval observations should fall between.
     */
    FhirHttpService.prototype.getMedicationAdministrationsWithCodes = function (codes, dateRange) {
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], _ = _a[1];
            return FhirHttpService_1.medicationCache
                .getResource(smartApi, dateRange)
                .then(function (results) { return results.filter(function (result) { return codes.includes(result.rxNormCode) &&
                result.status !==
                    _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_9__["MedicationAdministrationStatus"].ENTERED_IN_ERROR; }); });
        });
    };
    /**
     * Determines whether their is a medication present with the given code
     * during the given date range
     * @param code The RxNormCode to get medications for
     * @param dateRange The date range to get medications for
     */
    FhirHttpService.prototype.medicationsPresentWithCode = function (code, dateRange) {
        return this.getMedicationAdministrationsWithCodes([code], dateRange)
            .then(function (medAdmins) {
            return medAdmins.length > 0 ? true : false;
        });
    };
    /**
     * Gets order for specified external id.
     * @param id The id to pull the order from.
     */
    FhirHttpService.prototype.getMedicationOrderWithId = function (id) {
        var _this = this;
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], codes = _a[1];
            return smartApi.patient.api
                .read({ type: _constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].MedicationOrder, 'id': id })
                .then(function (result) {
                var requestId = result.headers('x-request-id');
                return new _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_10__["MedicationOrder"](result.data, requestId);
            }, 
            // Do not return any MedicationOrders for
            // this code if one of the MedicationOrder
            // constructions throws an error.
            function (rejection) {
                _this.debugService.logError(rejection);
                throw rejection;
            });
        });
    };
    /**
     * Gets the encounters for the patient for any encounter that falls in the
     * given date range.
     * @param dateRange Return all encounters that covered any time in this
     *   date range.
     */
    FhirHttpService.prototype.getEncountersForPatient = function (dateRange) {
        if (!dateRange) {
            dateRange = _constants__WEBPACK_IMPORTED_MODULE_3__["APP_TIMESPAN"];
        }
        // The Cerner implementation of the Encounter search does not offer any
        // filtering by date at this point, so we grab all the encounters
        // then filter them down to those which intersect with the date range
        // we query, and those that have a start date no earlier than a year
        // prior to now.
        return this.smartApiPromise.then(function (smartApi) {
            return FhirHttpService_1.encounterCache.getResource(smartApi).then(function (results) {
                return results
                    .filter(function (result) {
                    return dateRange.intersection(result.period) !== null;
                })
                    .filter(function (result) { return result.period.start >=
                    _constants__WEBPACK_IMPORTED_MODULE_3__["EARLIEST_ENCOUNTER_START_DATE"]; });
            });
        });
    };
    /**
     * Saves the current image of the graphs rendered as a DocumentReference
     * (static save).
     * @param html The inner HTML to keep in the Document.
     * @param date The date the note was written on.
     */
    FhirHttpService.prototype.saveStaticNote = function (image, date) {
        return Promise.all([this.smartApiPromise, this.loadAllCodes]).then(function (_a) {
            var smartApi = _a[0], codes = _a[1];
            var postBody = {
                resourceType: _constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].DocumentReference,
                subject: {
                    reference: [_constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].Patient, smartApi.patient.id].join('/')
                },
                type: {
                    coding: [{
                            system: _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_6__["LOINCCode"].CODING_STRING,
                            code: _conceptmappings_resource_code_manager__WEBPACK_IMPORTED_MODULE_5__["documentReferenceLoinc"].codeString,
                        }],
                },
                indexed: luxon__WEBPACK_IMPORTED_MODULE_2__["DateTime"].utc().toISO(),
                status: 'current',
                // https://fhir.cerner.com/millennium/dstu2/infrastructure/document-reference/#body-fields
                content: [{
                        attachment: {
                            contentType: 'application/xhtml+xml;charset=utf-8',
                            data: btoa('<img src="' + image.toDataURL() + '">')
                        }
                    }],
                context: {
                    encounter: {
                        reference: [
                            _constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].Encounter, smartApi.tokenResponse.encounter
                        ].join('/')
                    }
                }
            };
            return smartApi.patient.api.create({ resource: postBody })
                .then(function (resolve) {
                return true;
            }, function (reject) {
                return false;
            });
        });
    };
    /**
     * Gets the MicrobioReports for the patient for any report that falls in
     * the given date range.
     * @param codeGroup The CodeGroup to retrieve MicrobioReports for.
     * @param dateRange Return all MicrobioReports that covered any time in this
     *   date range.
     */
    FhirHttpService.prototype.getMicrobioReports = function (codeGroup, dateRange) {
        var _this = this;
        if (!_fhir_config__WEBPACK_IMPORTED_MODULE_13__["microbiology"]) {
            console.warn('No microbiology parameters available in the configuration.');
            return Promise.resolve([]);
        }
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], codes = _a[1];
            // YYYY-MM-DD format for dates
            var callParams = new _angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpParams"]();
            callParams = callParams.append('patient', smartApi.patient.id);
            callParams = callParams.append('category', 'microbiology'),
                callParams = callParams.append('item-date', 'ge' + dateRange.start.toFormat('yyyy-MM-dd'));
            callParams = callParams.append('item-date', 'le' + dateRange.end.toFormat('yyyy-MM-dd'));
            callParams = callParams.append('_format', 'json');
            var authString = btoa(_fhir_config__WEBPACK_IMPORTED_MODULE_13__["microbiology"].username + ':' +
                _fhir_config__WEBPACK_IMPORTED_MODULE_13__["microbiology"].password);
            var httpHeaders = new _angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpHeaders"]({
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                'Authorization': 'Basic ' + authString,
            });
            return _this.http
                .get([
                _fhir_config__WEBPACK_IMPORTED_MODULE_13__["microbiology"].url,
                _constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].DiagnosticReport
            ].join('/'), { headers: httpHeaders, params: callParams })
                .toPromise()
                .then(function (res) {
                return _fhir_resources_microbio_report__WEBPACK_IMPORTED_MODULE_11__["MicrobioReport"].parseAndFilterMicrobioData(res, codeGroup);
            });
        }, function (rejection) {
            _this.debugService.logError(rejection);
            throw rejection;
        });
    };
    /**
     * Returns AnnotateDiagnosticReport from a specified date range with a
     * specific DiagnosticReportCodeGroup code.
     *
     * @param code The DiagnosticReportCodeGroup for which to get observations.
     * @param dateRange The time interval observations should fall between.
     */
    FhirHttpService.prototype.getAnnotatedDiagnosticReports = function (codeGroup, dateRange) {
        var _this = this;
        var codes = codeGroup.resourceCodes;
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], _ = _a[1];
            return FhirHttpService_1.diagnosticReportCache
                .getResource(smartApi, dateRange)
                .then(function (results) {
                var annotatedReportsArr = results
                    .filter(function (result) {
                    return codes.includes(result.code) &&
                        result.status !==
                            _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_8__["DiagnosticReportStatus"].EnteredInError;
                })
                    .map(function (report) { return _this.addAttachment(report); });
                return Promise.all(annotatedReportsArr);
            });
        });
    };
    /**
     * Helper function that makes the HTTP call to get the html attachment.
     * The responseType will always be text, and not the default json.
     * If any error exists, it will catch the http error and return the message
     * @param url Fhir link to location of data
     */
    FhirHttpService.prototype.getAttachment = function (url) {
        var _this = this;
        return Promise.all([this.smartApiPromise, this.loadAllCodes])
            .then(function (_a) {
            var smartApi = _a[0], codes = _a[1];
            var httpHeaders = new _angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpHeaders"]({
                'Accept': 'text/html',
                'Authorization': 'Bearer ' + smartApi.tokenResponse.access_token
            });
            return _this.http
                .get(url, { headers: httpHeaders, responseType: 'text' })
                .toPromise()
                .then(function (res) { return res; })
                .catch(function (err) { return err.message; });
        });
    };
    var FhirHttpService_1;
    /** Cache for all MedicationAdministrations. */
    FhirHttpService.medicationCache = new _fhir_cache__WEBPACK_IMPORTED_MODULE_14__["MedicationCache"]();
    /** Cache for all DiagnosticReports. */
    FhirHttpService.diagnosticReportCache = new _fhir_cache__WEBPACK_IMPORTED_MODULE_14__["DiagnosticReportCache"]();
    /**
     * Cache for all Observations. Map from LOINCCode to the ObservationCache
     * for that LOINCCode.
     */
    FhirHttpService.observationCache = new Map();
    /** Cache for all Encounters. */
    FhirHttpService.encounterCache = new _fhir_cache__WEBPACK_IMPORTED_MODULE_14__["EncounterCache"]();
    FhirHttpService = FhirHttpService_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])(),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Inject"])(_smart_on_fhir_client__WEBPACK_IMPORTED_MODULE_16__["SMART_ON_FHIR_CLIENT"])),
        __metadata("design:paramtypes", [_debugger_debugger_service__WEBPACK_IMPORTED_MODULE_7__["DebuggerService"], Object, _angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpClient"], _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_4__["ResourceCodeCreator"]])
    ], FhirHttpService);
    return FhirHttpService;
}(_fhir_service__WEBPACK_IMPORTED_MODULE_15__["FhirService"]));



/***/ }),

/***/ "./src/app/fhir-server/fhir-launch/fhir-launch.component.css":
/*!*******************************************************************!*\
  !*** ./src/app/fhir-server/fhir-launch/fhir-launch.component.css ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ZoaXItc2VydmVyL2ZoaXItbGF1bmNoL2ZoaXItbGF1bmNoLmNvbXBvbmVudC5jc3MifQ== */"

/***/ }),

/***/ "./src/app/fhir-server/fhir-launch/fhir-launch.component.html":
/*!********************************************************************!*\
  !*** ./src/app/fhir-server/fhir-launch/fhir-launch.component.html ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<span *ngIf=\"!error\">Launching authentication...</span>\n<div *ngIf=\"useDebugger\" style=\"background-color: white\">\n  Authentication Information<br />\n  Base URI: {{this.baseURL}}<br />\n  Redirect URI : {{this.redirectURL}}<br />\n  Scopes: {{this.scope}};<br />\n  URL parameters: {{this.parameters}} <br />\n  <button (click)=\"beginAuthenticationFlow()\">Click here to continue authentication.</button>\n</div>\n<span *ngIf=\"error\">Error: This app is not configured for this EHR.</span>\n"

/***/ }),

/***/ "./src/app/fhir-server/fhir-launch/fhir-launch.component.ts":
/*!******************************************************************!*\
  !*** ./src/app/fhir-server/fhir-launch/fhir-launch.component.ts ***!
  \******************************************************************/
/*! exports provided: FhirLaunchComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FhirLaunchComponent", function() { return FhirLaunchComponent; });
/* harmony import */ var fhirclient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fhirclient */ "./node_modules/fhirclient/fhir-client.js");
/* harmony import */ var fhirclient__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fhirclient__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var _fhir_config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../fhir_config */ "./src/app/fhir_config.js");
/* harmony import */ var _fhir_config__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_fhir_config__WEBPACK_IMPORTED_MODULE_4__);
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var FhirLaunchComponent = /** @class */ (function () {
    function FhirLaunchComponent(router, route) {
        this.router = router;
        this.route = route;
        this.error = false;
        this.scope = [
            'launch', 'patient/Observation.read', 'patient/Patient.read',
            'patient/MedicationOrder.read', 'patient/MedicationAdministration.read',
            'patient/DocumentReference.read', 'patient/DocumentReference.write',
            'patient/Encounter.read', 'patient/DiagnosticReport.read',
            'patient/Binary.read'
        ].join(' ');
        this.parameters = new Array();
    }
    FhirLaunchComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (_environments_environment__WEBPACK_IMPORTED_MODULE_3__["environment"].useMockServer) {
            this.router.navigate(['setup']);
        }
        else {
            this.useDebugger = _environments_environment__WEBPACK_IMPORTED_MODULE_3__["environment"].useDebugger;
            this.route.queryParams.subscribe(function (params) {
                var state = params['state'];
                var code = params['code'];
                if (state && code) {
                    // Navigate to the setup page, passing the code & state parameters
                    // along with the URL.
                    _this.router.navigateByUrl('/setup?code=' + code + '&state=' + state);
                }
                else {
                    if (_this.useDebugger) {
                        _this.clientId = _fhir_config__WEBPACK_IMPORTED_MODULE_4__["credentials"].client_id;
                        _this.baseURL = _fhir_config__WEBPACK_IMPORTED_MODULE_4__["url"].baseURL;
                        _this.redirectURL = _fhir_config__WEBPACK_IMPORTED_MODULE_4__["url"].redirectURL;
                        _this.route.queryParams.subscribe(function (pms) {
                            _this.parameters.push(JSON.stringify(pms));
                        });
                        return;
                    }
                    _this.beginAuthenticationFlow();
                }
            });
        }
    };
    FhirLaunchComponent.prototype.beginAuthenticationFlow = function () {
        var clientId = _fhir_config__WEBPACK_IMPORTED_MODULE_4__["credentials"].client_id;
        if (!clientId) {
            this.error = true;
        }
        else {
            FHIR.oauth2.authorize({
                'client_id': clientId,
                'scope': this.scope,
                'redirect_uri': _fhir_config__WEBPACK_IMPORTED_MODULE_4__["url"].redirectURL
            });
        }
    };
    FhirLaunchComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'app-fhir-launch',
            template: __webpack_require__(/*! ./fhir-launch.component.html */ "./src/app/fhir-server/fhir-launch/fhir-launch.component.html"),
            styles: [__webpack_require__(/*! ./fhir-launch.component.css */ "./src/app/fhir-server/fhir-launch/fhir-launch.component.css")]
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"], _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]])
    ], FhirLaunchComponent);
    return FhirLaunchComponent;
}());



/***/ }),

/***/ "./src/app/fhir-server/fhir.service.ts":
/*!*********************************************!*\
  !*** ./src/app/fhir-server/fhir.service.ts ***!
  \*********************************************/
/*! exports provided: FhirService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FhirService", function() { return FhirService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../conceptmappings/resource-code-creator */ "./src/app/conceptmappings/resource-code-creator.ts");
/* harmony import */ var _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../conceptmappings/resource-codes/loinc-code */ "./src/app/conceptmappings/resource-codes/loinc-code.ts");
/* harmony import */ var _fhir_resources_annotated_annotated_diagnostic_report__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../fhir-resources/annotated/annotated-diagnostic-report */ "./src/app/fhir-resources/annotated/annotated-diagnostic-report.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var FhirService = /** @class */ (function () {
    function FhirService(resourceCodeCreator) {
        this.resourceCodeCreator = resourceCodeCreator;
        this.loadAllCodes = this.resourceCodeCreator.loadAllConcepts;
    }
    /**
     * Returns whether there are any microbio Reports with this code in the given
     * time range.
     * @param code The BCHMicrobio code for which to get observations.
     * @param dateRange The time interval observations should fall between.
     */
    FhirService.prototype.microbioReportsPresentWithCodes = function (codeGroup, dateRange) {
        // Just ask for one result to reduce the call time.
        return this.getMicrobioReports(codeGroup, dateRange, 1)
            .then(function (reports) { return reports.length > 0; }, function (rejection) {
            // If any MicrobioReports for this code results in an error, do not
            // show any MicrobioReports at all.
            throw rejection;
        });
    };
    /**
     * Returns whether there are any annotated diagnosticreports with this code in
     * the given time range.
     * @param code The resource code (for diagnostic reports) for which to get
     *     observations.
     * @param dateRange The time interval observations should fall between.
     */
    FhirService.prototype.diagnosticReportsPresentWithCodes = function (codeGroup, dateRange) {
        // Just ask for one result to reduce the call time.
        return this.getAnnotatedDiagnosticReports(codeGroup, dateRange, 1)
            .then(function (reports) { return reports.length > 0; }, function (rejection) {
            // If any AnnotatedDiagnosticReports for this code results in an
            // error, do not show any AnnotatedDiagnosticReports at all.
            throw rejection;
        });
    };
    /**
     * Gets observations from a specified date range with a specific code group.
     * @param codeGroup The LOINCCodeGroup code for which to get observations.
     * @param dateRange The time interval observations should fall between.
     * @returns The observations if there's a valid code group or date range.
     */
    FhirService.prototype.getObservationsForCodeGroup = function (codeGroup, dateRange) {
        if (!codeGroup || !dateRange) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])([]).toPromise();
        }
        var observationPromises = new Array();
        for (var _i = 0, _a = codeGroup.resourceCodes; _i < _a.length; _i++) {
            var c = _a[_i];
            if (c instanceof _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_3__["LOINCCode"]) {
                observationPromises.push(this.getObservationsWithCode(c, dateRange));
            }
        }
        return Promise.all(observationPromises);
    };
    /**
     * Gets medication data from a specified date range with specific Rx codes,
     * since multiple medications are displayed on a single chart.
     * @param codes The RxNormCode codes for which to get observations.
     * @param dateRanges The time interval observations should fall between.
     */
    FhirService.prototype.getMedicationAdministrationsWithCodeGroup = function (group, dateRange) {
        if (!group || !dateRange) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["of"])([]).toPromise();
        }
        return this.getMedicationAdministrationsWithCodes(group.resourceCodes, dateRange);
    };
    /**
     * Helper function to getAnnotatedDiagnosticReports() that makes the http
     * calls to get the corresponding html attachments. Creates a new
     * AnnotatedDiagnosticReport that includes the html attachment.
     *
     * @param report DiagnosticReport that will be edited to include the
     * html attachment in string format
     */
    FhirService.prototype.addAttachment = function (report) {
        if (report.presentedForm) {
            for (var _i = 0, _a = report.presentedForm; _i < _a.length; _i++) {
                var presented = _a[_i];
                // Currently Cerner only supports text/html files and not pdf
                if (presented.contentType === 'text/html') {
                    return this.getAttachment(presented.url).then(function (html) {
                        return new _fhir_resources_annotated_annotated_diagnostic_report__WEBPACK_IMPORTED_MODULE_4__["AnnotatedDiagnosticReport"](report, html);
                    });
                }
            }
        }
        // If there is no presentedForm section in the report or none of the
        // presentedForm contentTypes are 'text/html', return the annotated
        // diagnostic report without the attachment.
        return Promise.resolve(new _fhir_resources_annotated_annotated_diagnostic_report__WEBPACK_IMPORTED_MODULE_4__["AnnotatedDiagnosticReport"](report));
    };
    FhirService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_2__["ResourceCodeCreator"]])
    ], FhirService);
    return FhirService;
}());



/***/ }),

/***/ "./src/app/fhir-server/mock-fhir.service.ts":
/*!**************************************************!*\
  !*** ./src/app/fhir-server/mock-fhir.service.ts ***!
  \**************************************************/
/*! exports provided: MockFhirService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MockFhirService", function() { return MockFhirService; });
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../conceptmappings/resource-code-creator */ "./src/app/conceptmappings/resource-code-creator.ts");
/* harmony import */ var _fhir_resources_annotated_annotated_microbio_report__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../fhir-resources/annotated/annotated-microbio-report */ "./src/app/fhir-resources/annotated/annotated-microbio-report.ts");
/* harmony import */ var _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../fhir-resources/diagnostic-report */ "./src/app/fhir-resources/diagnostic-report.ts");
/* harmony import */ var _fhir_resources_encounter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../fhir-resources/encounter */ "./src/app/fhir-resources/encounter.ts");
/* harmony import */ var _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../fhir-resources/medication-administration */ "./src/app/fhir-resources/medication-administration.ts");
/* harmony import */ var _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../fhir-resources/medication-order */ "./src/app/fhir-resources/medication-order.ts");
/* harmony import */ var _fhir_resources_microbio_report__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../fhir-resources/microbio-report */ "./src/app/fhir-resources/microbio-report.ts");
/* harmony import */ var _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../fhir-resources/observation */ "./src/app/fhir-resources/observation.ts");
/* harmony import */ var _fhir_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./fhir.service */ "./src/app/fhir-server/fhir.service.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var MockFhirService = /** @class */ (function (_super) {
    __extends(MockFhirService, _super);
    function MockFhirService(http, resourceCodeCreator) {
        var _this = _super.call(this, resourceCodeCreator) || this;
        _this.http = http;
        _this.assetPath = './assets/' + _environments_environment__WEBPACK_IMPORTED_MODULE_5__["environment"].mockDataFolder + '/';
        _this.allFilePaths = _environments_environment__WEBPACK_IMPORTED_MODULE_5__["environment"].mockDataFiles.map(function (x) { return _this.assetPath + x + '.json'; });
        _this.loincMap = new Map();
        _this.medicationAdministrationMapByCode = new Map();
        _this.medicationAdministrationMapByOrderId = new Map();
        _this.medicationOrderMap = new Map();
        _this.diagnosticReportMap = new Map();
        _this.encounters = new Array();
        _this.loadAllData = _this.loadAllCodes.then(function () { return Promise.all(_this.allFilePaths.map(function (filePath) {
            return _this.http.get(filePath).toPromise().then(function (data) {
                if (filePath.includes('_MB_data')) {
                    _this.microbioJson = data;
                }
                try {
                    var entry = data.entry;
                    // Sometimes data comes to us in bundles, and then we want to
                    // flatten it into a series of resources.
                    if (data.length > 0) {
                        entry = data.map(function (bundle) { return bundle.entry; }).flat();
                    }
                    var _loop_1 = function (json) {
                        var mockRequestId = Object(uuid__WEBPACK_IMPORTED_MODULE_4__["v4"])();
                        var resourceType = json.resource.resourceType;
                        if (resourceType === src_constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].Observation) {
                            _this.constructResourceMap(json, _this.loincMap, function (x) { return new _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_13__["Observation"](x, mockRequestId); }, function (obs) { return obs.codes; });
                        }
                        if (resourceType === src_constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].MedicationAdministration) {
                            _this.constructResourceMap(json, _this.medicationAdministrationMapByCode, function (d) { return new _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_10__["MedicationAdministration"](d, mockRequestId); }, function (admin) { return [admin.rxNormCode]; });
                            _this.constructResourceMap(json, _this.medicationAdministrationMapByOrderId, function (d) { return new _fhir_resources_medication_administration__WEBPACK_IMPORTED_MODULE_10__["MedicationAdministration"](d, mockRequestId); }, function (admin) { return [admin.medicationOrderId]; });
                        }
                        if (resourceType === src_constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].MedicationOrder) {
                            _this.constructResourceMap(json, _this.medicationOrderMap, function (d) { return new _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_11__["MedicationOrder"](d, mockRequestId); }, function (order) { return [order.orderId]; });
                        }
                        if (resourceType === src_constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].Encounter) {
                            var encounter = new _fhir_resources_encounter__WEBPACK_IMPORTED_MODULE_9__["Encounter"](json.resource, mockRequestId);
                            _this.encounters.push(encounter);
                        }
                        // Not used for microbio data, but only for diagnosticReport data
                        if (resourceType === src_constants__WEBPACK_IMPORTED_MODULE_3__["FhirResourceType"].DiagnosticReport) {
                            _this.constructResourceMap(json, _this.diagnosticReportMap, function (d) { return new _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_8__["DiagnosticReport"](d, mockRequestId); }, function (report) { return [report.code]; });
                        }
                    };
                    for (var _i = 0, entry_1 = entry; _i < entry_1.length; _i++) {
                        var json = entry_1[_i];
                        _loop_1(json);
                    }
                }
                catch (_a) {
                    console.warn('Trouble reading file: ' + filePath +
                        '. Continuing on since this is the mock server.');
                }
            });
        })); });
        return _this;
    }
    MockFhirService.prototype.constructResourceMap = function (json, mapToUpdate, constructorFn, getCodesFn) {
        try {
            var obj = constructorFn(json.resource);
            var uniqueCodes = Array.from(new Set(getCodesFn(obj)));
            for (var _i = 0, uniqueCodes_1 = uniqueCodes; _i < uniqueCodes_1.length; _i++) {
                var code = uniqueCodes_1[_i];
                var existing = mapToUpdate.get(code);
                if (!existing) {
                    existing = [];
                }
                existing.push(obj);
                mapToUpdate.set(code, existing);
            }
        }
        catch (err) {
            // tslint:disable-next-line:no-console
            console.debug(err);
        }
    };
    /**
     * Gets observations from a specified date range with a specific LOINC code.
     * @param code The LOINC code for which to get observations.
     * @param dateRange The time interval observations should fall between.
     * @param limitCount If set, the number of observations that should be
     *     queried for
     */
    MockFhirService.prototype.getObservationsWithCode = function (code, dateRange) {
        var _this = this;
        return this.loadAllData.then(function (map) { return _this.getObservations(_this.loincMap, code, dateRange); });
    };
    MockFhirService.prototype.getObservations = function (map, code, dateRange) {
        return map.has(code) ?
            map.get(code)
                .filter(function (obs) { return dateRange.contains(obs.timestamp); })
                .filter(function (obs) { return obs.status !== _fhir_resources_observation__WEBPACK_IMPORTED_MODULE_13__["ObservationStatus"].EnteredInError; }) :
            [];
    };
    MockFhirService.prototype.observationsPresentWithCode = function (code, dateRange) {
        var _this = this;
        return this.loadAllData.then(function () { return _this.getObservationsWithCode(code, dateRange)
            .then(function (results) { return results.length > 0; }); });
    };
    /**
     * Gets medication data from a specified date range with a specific Rx code
     * @param code The RxNormCode codes for which to get observations.
     * @param dateRange The time interval observations should fall between.
     */
    MockFhirService.prototype.getMedicationAdministrationsWithCodes = function (codes, dateRange) {
        var _this = this;
        return this.loadAllData.then(function () {
            var allMedAdmins = new Array();
            _this.medicationAdministrationMapByCode.forEach(function (medAdmins, code) {
                if (codes.includes(code)) {
                    allMedAdmins.push.apply(allMedAdmins, medAdmins.filter(function (medAdmin) { return dateRange.contains(medAdmin.timestamp); }));
                }
            });
            return Promise.resolve(allMedAdmins);
        }, function (rejection) {
            throw rejection;
        });
    };
    MockFhirService.prototype.dataAvailableForMedications = function () {
        var _this = this;
        return this.loadAllData.then(function () {
            return new Set(_this.medicationAdministrationMapByCode.keys());
        });
    };
    MockFhirService.prototype.medicationsPresentWithCode = function (code, dateRange) {
        var _this = this;
        return this.loadAllData.then(function () { return _this.getMedicationAdministrationsWithCodes([code], dateRange)
            .then(function (obs) { return obs.length > 0; }, function (rejection) {
            // If any MedicationAdministration for this code results
            // in an error, do not show any MedicationAdministrations
            // at all.
            throw rejection;
        }); });
    };
    /**
     * Returns arbitrary orders for current mock medications.
     * @param id The id to pull the order from.
     */
    MockFhirService.prototype.getMedicationOrderWithId = function (id) {
        var _this = this;
        return this.loadAllData.then(function (x) { return _this.medicationOrderMap.has(id) ?
            _this.medicationOrderMap.get(id)[0] :
            undefined; });
    };
    /**
     * Gets the encounters for the patient for any encounter that falls in the
     * given date range.
     * @param dateRange Return all encounters that covered any time in this
     *   date range.
     */
    MockFhirService.prototype.getEncountersForPatient = function (dateRange) {
        var _this = this;
        return this.loadAllData.then(function (x) { return _this.encounters.filter(function (encounter) { return dateRange.intersection(encounter.period) !== null &&
            encounter.period.start >= luxon__WEBPACK_IMPORTED_MODULE_2__["DateTime"].utc().minus({ years: 1 }); }); });
    };
    /**
     * Prints the current HTML of the graphs rendered to the console.
     * @param html The inner HTML to keep in the Document.
     * @param date The date the note was written for.
     */
    MockFhirService.prototype.saveStaticNote = function (image, date) {
        console.log('Save to note button clicked for mock data for date: ' + date);
        console.log(image);
        return Promise.resolve(true);
    };
    /**
     * Gets the MicrobioReports for the patient for any report that falls in
     * the given date range, whose contained Observations are in the codeGroup
     * provided.
     * @param codeGroup The CodeGroup to retrieve MicrobioReports for.
     * @param dateRange Return all MicrobioReports that covered any time in
     *     this date range.
     */
    MockFhirService.prototype.getMicrobioReports = function (codeGroup, dateRange, limitCount) {
        var _this = this;
        return this.loadAllData.then(function (x) {
            var microbioReports = _fhir_resources_microbio_report__WEBPACK_IMPORTED_MODULE_12__["MicrobioReport"]
                .parseAndFilterMicrobioData(_this.microbioJson, codeGroup)
                .filter(function (report) { return dateRange.contains(new _fhir_resources_annotated_annotated_microbio_report__WEBPACK_IMPORTED_MODULE_7__["AnnotatedMicrobioReport"](report).timestamp); });
            return microbioReports.slice(0, limitCount ? limitCount : undefined);
        });
    };
    /**
     * Gets the AnnotatedDiagnosticReports for the patient for any report that
     * falls in the given date range, whose contained Observations are in the
     * codeGroup provided. Gets the html attachments linked in the json files as
     * well.
     *
     * We are returning AnnotatedDiagnosticReport rather than DiagnosticReport
     * because we need to access the html attachments.
     * @param codeGroup The CodeGroup to retrieve DiagnosticReports for.
     * @param dateRange Return all AnnotatedDiagnosticReports that covered any
     *     time in this date range.
     */
    MockFhirService.prototype.getAnnotatedDiagnosticReports = function (codeGroup, dateRange, limitCount) {
        var _this = this;
        return this.loadAllData.then(function (x) {
            var annotatedReportsArr = new Array();
            for (var _i = 0, _a = codeGroup.resourceCodes; _i < _a.length; _i++) {
                var code = _a[_i];
                if (_this.diagnosticReportMap.has(code)) {
                    var reports = _this.diagnosticReportMap.get(code);
                    for (var _b = 0, reports_1 = reports; _b < reports_1.length; _b++) {
                        var report = reports_1[_b];
                        annotatedReportsArr.push(_this.addAttachment(report));
                    }
                }
            }
            return Promise.all(annotatedReportsArr).then(function (annotatedReports) {
                annotatedReports = annotatedReports.filter(function (report) { return dateRange.contains(report.timestamp); });
                return annotatedReports.slice(0, limitCount ? limitCount : undefined);
            });
        });
    };
    /**
     * Helper function that makes the HTTP call to get the html attachment.
     * The responseType will always be text, and not the default json.
     * If any error exists, it will catch the http error and return the message
     * @param url Fhir link to location of data
     */
    MockFhirService.prototype.getAttachment = function (url) {
        return this.http.get(url, { responseType: 'text' })
            .toPromise()
            .then(function (res) { return res; })
            .catch((function (err) { return err.message; }));
    };
    MockFhirService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_0__["HttpClient"], _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_6__["ResourceCodeCreator"]])
    ], MockFhirService);
    return MockFhirService;
}(_fhir_service__WEBPACK_IMPORTED_MODULE_14__["FhirService"]));



/***/ }),

/***/ "./src/app/fhir-server/smart-on-fhir-client.ts":
/*!*****************************************************!*\
  !*** ./src/app/fhir-server/smart-on-fhir-client.ts ***!
  \*****************************************************/
/*! exports provided: SMART_ON_FHIR_CLIENT */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SMART_ON_FHIR_CLIENT", function() { return SMART_ON_FHIR_CLIENT; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

var SMART_ON_FHIR_CLIENT = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]('SmartOnFhirClient');


/***/ }),

/***/ "./src/app/fhir_config.js":
/*!********************************!*\
  !*** ./src/app/fhir_config.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {



/***/ }),

/***/ "./src/app/graphs/graphdatatypes/customizabledata.ts":
/*!***********************************************************!*\
  !*** ./src/app/graphs/graphdatatypes/customizabledata.ts ***!
  \***********************************************************/
/*! exports provided: CustomizableData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomizableData", function() { return CustomizableData; });
/* harmony import */ var _graphdata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./graphdata */ "./src/app/graphs/graphdatatypes/graphdata.ts");
/* harmony import */ var _labeled_series__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./labeled-series */ "./src/app/graphs/graphdatatypes/labeled-series.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


/**
 * CustomizableData holds a time-based series to which a user can add more
 * points.
 */
var CustomizableData = /** @class */ (function (_super) {
    __extends(CustomizableData, _super);
    function CustomizableData(series, 
    /**
     * The annotations for this customizable graph. If populated, holds a
     * map from a number representation of a Date to
     * CustomizableGraphAnnotation for the corresponding point.
     */
    annotations, regions) {
        var _this = _super.call(this, [series], undefined, // tooltip map
        undefined, // tooltip key function
        regions) || this;
        _this.annotations = annotations;
        _this.annotations = annotations;
        _this.yAxisDisplayBounds = [0, 10];
        return _this;
    }
    CustomizableData.defaultEmptySeries = function () {
        return new CustomizableData(_labeled_series__WEBPACK_IMPORTED_MODULE_1__["LabeledSeries"].emptySeries(), new Map());
    };
    /**
     * Adds a point to the series in this CustomizableData object.
     * @param annotation: The annotation to add in to the graph.
     */
    CustomizableData.prototype.addPointToSeries = function (annotation) {
        // This method assumes there is only 1 series.
        this.series[0].coordinates.push([annotation.timestamp, 0]);
        this.annotations.set(annotation.timestamp.toMillis(), annotation);
    };
    /**
     * Removes a point from the series in this CustomizableData object, as well as
     * the corresponding annotation.
     * @param date The date for this point to remove.
     */
    CustomizableData.prototype.removePointFromSeries = function (date) {
        var index = this.series[0].coordinates.findIndex(function (c) { return c[0].toMillis() === date.toMillis(); });
        this.series[0].coordinates.splice(index, 1);
        this.annotations.delete(date.toMillis());
    };
    return CustomizableData;
}(_graphdata__WEBPACK_IMPORTED_MODULE_0__["GraphData"]));



/***/ }),

/***/ "./src/app/graphs/graphdatatypes/diagnosticgraphdata.ts":
/*!**************************************************************!*\
  !*** ./src/app/graphs/graphdatatypes/diagnosticgraphdata.ts ***!
  \**************************************************************/
/*! exports provided: DiagnosticGraphData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticGraphData", function() { return DiagnosticGraphData; });
/* harmony import */ var _graphtypes_tooltips_diagnostic_tooltips__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../graphtypes/tooltips/diagnostic-tooltips */ "./src/app/graphs/graphtypes/tooltips/diagnostic-tooltips.ts");
/* harmony import */ var _labeled_series__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./labeled-series */ "./src/app/graphs/graphdatatypes/labeled-series.ts");
/* harmony import */ var _stepgraphdata__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stepgraphdata */ "./src/app/graphs/graphdatatypes/stepgraphdata.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



/**
 * DiagnosticGraphData holds configurations for a diagnosticReport graph. The
 * format of a diagnostic graph is simliar to a step graph in that each y-axis
 * position represents a report category, and points plotted along
 * that position represent results for that test.
 */
var DiagnosticGraphData = /** @class */ (function (_super) {
    __extends(DiagnosticGraphData, _super);
    function DiagnosticGraphData(endpointSeries, tooltipMap) {
        return _super.call(this, endpointSeries, tooltipMap, undefined) || this;
    }
    /**
     * Converts a list of DiagnosticReports to a StepGraphData object
     * @param diagnosticReports A list of DiagnosticReports to display.
     * @returns a new DiagnosticGraphData for this set.
     */
    DiagnosticGraphData.fromDiagnosticReports = function (annotatedDiagnosticReports, sanitizer) {
        var points = [];
        // The key of the map is the DateTime timestamp while the values
        // of the map is an array contains AnnotatedTooltip (the innerhtml
        // of the tooltip chart, optional html of the attachment, and optional id).
        var tooltipMap = new Map();
        // Iterate through diagnosticReports to generate tooltips and
        // values for the DiagnosticGraphData
        for (var _i = 0, annotatedDiagnosticReports_1 = annotatedDiagnosticReports; _i < annotatedDiagnosticReports_1.length; _i++) {
            var annotatedReport = annotatedDiagnosticReports_1[_i];
            // Adding a new DiagnosticTooltip to the tooltipMap.
            // If there is already a tooltip at the timestamp, we do not
            // overwrite the existing tooltip but rather add to it.
            if (tooltipMap.has(annotatedReport.timestamp.toMillis().toString())) {
                var existingTT = tooltipMap.get(annotatedReport.timestamp.toMillis().toString());
                var newTT = new _graphtypes_tooltips_diagnostic_tooltips__WEBPACK_IMPORTED_MODULE_0__["DiagnosticTooltip"](false).getTooltip(annotatedReport, sanitizer);
                existingTT.push(newTT);
            }
            else {
                // If there is no existing tooltip, we create a new tooltip.
                tooltipMap.set(annotatedReport.timestamp.toMillis().toString(), [new _graphtypes_tooltips_diagnostic_tooltips__WEBPACK_IMPORTED_MODULE_0__["DiagnosticTooltip"]().getTooltip(annotatedReport, sanitizer)]);
            }
            // Pushing the LabeledSeries generated from the Diagnostic
            // Report to generate a new DiagnosticGraphData
            for (var _a = 0, _b = _labeled_series__WEBPACK_IMPORTED_MODULE_1__["LabeledSeries"].fromDiagnosticReport(annotatedReport, annotatedReport.timestamp); _a < _b.length; _a++) {
                var series = _b[_a];
                points.push(series);
            }
        }
        return new DiagnosticGraphData(points, tooltipMap);
    };
    return DiagnosticGraphData;
}(_stepgraphdata__WEBPACK_IMPORTED_MODULE_2__["StepGraphData"]));



/***/ }),

/***/ "./src/app/graphs/graphdatatypes/graphdata.ts":
/*!****************************************************!*\
  !*** ./src/app/graphs/graphdatatypes/graphdata.ts ***!
  \****************************************************/
/*! exports provided: GraphData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GraphData", function() { return GraphData; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

/**
 * The base class for holding data pertaining to one graph.
 */
var GraphData = /** @class */ (function () {
    function GraphData(
    /** A list of the series to be displayed on the graph. */
    series, 
    /**
     * A map to provide tooltips.
     * This is a bit complicated. c3's API lets you specify a function call
     * that will provide the HTML content for any given point's tooltip.
     * As a parameter, it passes in one or more data points:
     * https://c3js.org/reference.html#tooltip-contents
     * so when the tooltip is rendered, all you have is the plotted
     * information. As far as I can tell, that data structure is undocumented.
     * Upon inspection, the data point includes which series it belongs to,
     * the x value, and the y value, so if you want to render a custom
     * tooltip, you have to be able to derive all the information you need
     * from those values.
     * tooltipMap, alongside tooltipKeyFn, helps with this process.
     * If you call tooltipKeyFn on the data object passed into the c3 contents
     * function, it should yield the key into tooltipMap that will let you
     * look up the appropriate tooltip for that data point. If tooltipKeyFn
     * is unset, then we fall back to the default lookup, which is by x-value.
     *
     * The value of the map is an AnnotatedTooltip[] that contains additional
     * values that need more processing before it can be displayed, an
     * optional id, and a string representing the innerhtml that we want to
     * display as the tooltip
     */
    tooltipMap, 
    /**
     * See documentation on tooltipMap for more detail. tooltipKeyFn
     * takes in a graph data point and returns the key into tooltipMap that
     * provides the tooltip for that data point.
     */
    tooltipKeyFn, 
    /**
     * A list of x-axis regions to display on the graph.
     */
    xRegions) {
        if (series === void 0) { series = []; }
        if (xRegions === void 0) { xRegions = new Array(); }
        this.series = series;
        this.tooltipMap = tooltipMap;
        this.tooltipKeyFn = tooltipKeyFn;
        this.xRegions = xRegions;
        // The number of decimal places to show for any value associated with this
        // GraphData. The default is 0, to minimize errors caused by unnecessary
        // trailing zeros.
        this.precision = 0;
    }
    /*
     * Returns whether or not there are any data points in the series that fall
     * inside the date range provided.
     * @param series The LabeledSeries to find data points in the date range.
     * @param dateRange The date range in which to see if there are any data
     *     points.
     */
    GraphData.prototype.dataPointsInRange = function (dateRange) {
        var entireRange = luxon__WEBPACK_IMPORTED_MODULE_0__["Interval"].fromDateTimes(dateRange.start.toLocal().startOf('day'), dateRange.end.toLocal().endOf('day'));
        for (var _i = 0, _a = this.series; _i < _a.length; _i++) {
            var s = _a[_i];
            if (s.hasPointInRange(entireRange)) {
                return true;
            }
        }
        return false;
    };
    return GraphData;
}());



/***/ }),

/***/ "./src/app/graphs/graphdatatypes/labeled-series.ts":
/*!*********************************************************!*\
  !*** ./src/app/graphs/graphdatatypes/labeled-series.ts ***!
  \*********************************************************/
/*! exports provided: LabeledSeries */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LabeledSeries", function() { return LabeledSeries; });
/* harmony import */ var _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../fhir-resources/diagnostic-report */ "./src/app/fhir-resources/diagnostic-report.ts");
/* harmony import */ var _fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../fhir-resources/observation-interpretation-valueset */ "./src/app/fhir-resources/observation-interpretation-valueset.ts");
/* harmony import */ var _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../conceptmappings/resource-codes/display-grouping */ "./src/app/conceptmappings/resource-codes/display-grouping.ts");
/* harmony import */ var _graphtypes_legend_info__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../graphtypes/legend-info */ "./src/app/graphs/graphtypes/legend-info.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.


// tslint:disable-next-line:max-line-length


/**
 * Timeseries data, represented as a list of <DateTime, number> tuples,
 * with metadata including a human-readable label, a unit, and a typical range.
 * Used for most charts to display a changing value over time. Multiple
 * LabeledSeries may appear on the same graph.
 */
var LabeledSeries = /** @class */ (function () {
    function LabeledSeries(
    /** The descriptive label of the data series. */
    label, 
    /**
     * The coordinate set for the series. The y-coordinates may be strings
     * or numbers, depending on whether this is a categorical or numerical
     * graph.
     */
    coordinates, 
    /** The y-axis unit for this series. */
    unit, 
    /**
     * Holds information about how this series should be displayed.
     */
    legendInfo, 
    /**
     * The x-coordinate values in the labeled series that should be marked as
     * abnormal because of their interpretation results.
     */
    abnormalCoordinates, 
    /**
     * A map of DateTimes to corresponding tuples representing the low and
     * high bounds of what should be considered "normal" along the y-axis.
     */
    normalRanges, 
    /**
     * The DisplayGrouping associated with this LabeledSeries.
     */
    concept) {
        if (abnormalCoordinates === void 0) { abnormalCoordinates = new Set(); }
        this.label = label;
        this.coordinates = coordinates;
        this.legendInfo = legendInfo;
        this.abnormalCoordinates = abnormalCoordinates;
        /**
         * A map of DateTimes to corresponding tuples representing the low and high
         * bounds of what should be considered "normal" along the y-axis.
         */
        this.normalRanges = new Map();
        // Sort the coordinates by x-value.
        this.coordinates = coordinates.sort(function (a, b) {
            return a[0].toMillis() - b[0].toMillis();
        });
        this.unit = unit;
        // If a specific legend wasn't passed through then we generate one for the
        // series.
        this.legendInfo = legendInfo || new _graphtypes_legend_info__WEBPACK_IMPORTED_MODULE_3__["LegendInfo"](label);
        this.concept = concept;
        this.normalRanges = normalRanges;
        /**
         * Calculate the y axis display bounds by finding the outer boundaries of
         * the data and the normal range.
         */
        var yValues = this.coordinates.map(function (c) { return c[1]; }).filter(function (x) { return x !== null; });
        if (yValues.map(function (val) { return typeof val === 'number'; }).some(function (x) { return x === false; })) {
            return;
        }
        this.yDisplayBounds =
            [Math.min.apply(Math, yValues), Math.max.apply(Math, yValues)];
    }
    /**
     * Generates an empty LabeledSeries.
     */
    LabeledSeries.emptySeries = function () {
        return new LabeledSeries('', []);
    };
    /**
     * Generates a LabeledSeries from the given ObservationSet.
     * @param observationSet The ObservationSet to chart.
     * @param encounters A list of Encounters to use while determining line breaks
     *     in series.
     */
    LabeledSeries.fromObservationSet = function (observationSet, encounters) {
        var coordinates = [];
        var observations = observationSet.resourceList;
        var abnormal = new Set();
        for (var _i = 0, observations_1 = observations; _i < observations_1.length; _i++) {
            var obs = observations_1[_i];
            coordinates.push([
                obs.observation.timestamp,
                obs.observation.value ? obs.observation.value.value : null
            ]);
            var outsideNormalRange = obs.observation.normalRange &&
                (obs.observation.value.value < obs.observation.normalRange[0] ||
                    obs.observation.value.value > obs.observation.normalRange[1]);
            if ((obs.observation.interpretation &&
                obs.observation.interpretation.code !== _fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_1__["NORMAL"]) ||
                outsideNormalRange) {
                abnormal.add(obs.observation.timestamp.toISO());
            }
        }
        coordinates = this.addEncounterEndpoints(coordinates, encounters);
        return new LabeledSeries(observationSet.label, coordinates, observationSet.unit, undefined, // legendInfo,
        abnormal, observationSet.normalRanges);
    };
    /**
     * Generates a LabeledSeries from the given list of discrete resulted-
     * ObservationSets.
     * For Observations with discrete values, such as "yellow"
     * for the color of urine, we group all ObservationSets into one
     * LabeledSeries, at a specific yValue.
     * @param observationSets The discrete ObservationSets to chart.
     * @param yValue The numerical y-value to map to this ObservationSet with
     *     discrete results.
     * @param label The label for this LabeledSeries.
     * @param encounters A list of Encounters to use while determining line breaks
     *     in series.
     */
    LabeledSeries.fromObservationSetsDiscrete = function (observationSets, yValue, label, encounters) {
        var coordinates = [];
        var abnormal = new Set();
        for (var _i = 0, observationSets_1 = observationSets; _i < observationSets_1.length; _i++) {
            var obsSet = observationSets_1[_i];
            var observations = obsSet.resourceList;
            for (var _a = 0, observations_2 = observations; _a < observations_2.length; _a++) {
                var obs = observations_2[_a];
                coordinates.push([obs.observation.timestamp, yValue]);
                if (obs.observation.interpretation &&
                    obs.observation.interpretation.code !== _fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_1__["NORMAL"]) {
                    abnormal.add(obs.observation.timestamp.toISO());
                }
                var outsideNormalRange = obs.observation.normalRange &&
                    (obs.observation.value.value < obs.observation.normalRange[0] ||
                        obs.observation.value.value > obs.observation.normalRange[1]);
                if (obs.observation.value && obs.observation.value.value &&
                    outsideNormalRange) {
                    abnormal.add(obs.observation.timestamp.toISO());
                }
            }
        }
        coordinates = this.addEncounterEndpoints(coordinates, encounters);
        return new LabeledSeries(label, coordinates, undefined, // unit
        undefined, // legend info,
        abnormal // abnormal points
        );
    };
    /**
     * Generates a set of LabeledSeries from the given MedicationOrderSet. It will
     * return one series for all the orders together since the order set
     * represents all orders for the same medication.
     * @param medOrderSet The MedicationOrderSet to chart.
     * @param dateRange The date range displayed on the chart.
     * @param encounters A list of Encounters to use while determining line breaks
     *     in series.
     * @param categoricalYPosition If set, we use this y-position for all the
     *    datapoints in both returned series. If unset, we use the dosage
     *    quantity for each administration as the y-value.
     */
    LabeledSeries.fromMedicationOrderSet = function (medOrderSet, dateRange, encounters, categoricalYPosition) {
        var data = [];
        for (var _i = 0, _a = medOrderSet.resourceList; _i < _a.length; _i++) {
            var medOrder = _a[_i];
            // The first series in fromMedicationOrder is all the administrations.
            // The second series (unused in this function) is the end points only.
            data.push(LabeledSeries.fromMedicationOrder(medOrder, dateRange, categoricalYPosition)[0]);
        }
        // Combine all the series into a single series so that it shows up with
        // the same color.
        var coords = [];
        for (var _b = 0, data_1 = data; _b < data_1.length; _b++) {
            var series = data_1[_b];
            for (var _c = 0, _d = series.coordinates; _c < _d.length; _c++) {
                var coord = _d[_c];
                coords.push(coord);
            }
        }
        coords = this.addEncounterEndpoints(coords, encounters);
        return new LabeledSeries(medOrderSet.label, coords, medOrderSet.unit, undefined, // legendInfo
        undefined, // abnormal points
        // Always keep normalRanges undefined for MedicationOrder-based
        // LabeledSeries, as we only show normal ranges for Observations with a
        // normal range given in the data.
        undefined, // normalRanges
        medOrderSet.rxNormCode ? medOrderSet.rxNormCode.displayGrouping :
            undefined);
    };
    /**
     * Generates a set of LabeledSeries from the given MedicationOrder. For each
     * order, there are two LabeledSeries -- one for the corresponding
     * MedicationAdministrations, and one for the endpoints displayed for the
     * order.
     * @param annotatedOrder The AnnotatedMedicationOrder to chart.
     * @param dateRange The date range displayed on the chart.
     * @param categoricalYPosition If set, we use this categorical y-position
     *    for all the datapoints in both returned series. If unset, we use the
     *    dosage quantity for each administration as the numerical y-value.
     */
    LabeledSeries.fromMedicationOrder = function (annotatedOrder, dateRange, categoricalYPosition) {
        var coordinates = new Array();
        var endpointCoordinates = new Array();
        var medAdminsForOrder = annotatedOrder.medicationAdministrationSet;
        var label = annotatedOrder.label + annotatedOrder.order.orderId;
        var legend = annotatedOrder.order.rxNormCode.displayGrouping;
        if (medAdminsForOrder) {
            for (var _i = 0, _a = medAdminsForOrder.resourceList; _i < _a.length; _i++) {
                var annotatedAdmin = _a[_i];
                coordinates.push([
                    annotatedAdmin.medAdministration.timestamp,
                    this.getYPositionForMed(annotatedAdmin.medAdministration, categoricalYPosition)
                ]);
            }
            // We add the beginning and end time stamp if the order is not fully
            // displayed-- so that no dashes are displayed when an order is being
            // carried over from before the time window displayed.
            // We only display an endpoint for a MedicationOrder if the
            // endpoint is visible -- that is, if the time of the first
            // Administration of the order is during or after the beginning of the
            // time range of the chart, and if the time of the last Administration
            // of the order is before the end of the chart's time range.
            var firstAdministrationIsAfterStartTime = annotatedOrder.firstAdministration.timestamp.toMillis() >=
                dateRange.start.toMillis();
            var lastAdministrationIsBeforeEndTime = annotatedOrder.lastAdministration.timestamp.toMillis() <=
                dateRange.end.toMillis();
            if (firstAdministrationIsAfterStartTime) {
                endpointCoordinates.push([
                    annotatedOrder.firstAdministration.timestamp,
                    this.getYPositionForMed(annotatedOrder.firstAdministration, categoricalYPosition)
                ]);
            }
            else if (categoricalYPosition &&
                (annotatedOrder.lastAdministration.timestamp.toMillis() >
                    dateRange.start.toMillis())) {
                // Only add a point for continuity if we have a fixed y position.
                coordinates.push([dateRange.start, categoricalYPosition]);
            }
            if (lastAdministrationIsBeforeEndTime) {
                endpointCoordinates.push([
                    annotatedOrder.lastAdministration.timestamp,
                    this.getYPositionForMed(annotatedOrder.lastAdministration, categoricalYPosition)
                ]);
            }
            else if (categoricalYPosition &&
                annotatedOrder.firstAdministration.timestamp.toMillis() <
                    dateRange.end.toMillis()) {
                // Only add a point for continuity if we have a fixed y position.
                coordinates.push([dateRange.end, categoricalYPosition]);
            }
        }
        return [
            new LabeledSeries(label, coordinates, medAdminsForOrder.unit, legend, undefined, // abnormal points
            // Always keep normalRanges undefined for MedicationOrder-based
            // LabeledSeries, as we only show normal ranges for Observations with
            // a normal range given in the data.
            undefined, // normalRanges
            annotatedOrder.order.rxNormCode.displayGrouping),
            new LabeledSeries('endpoint' + label, endpointCoordinates, medAdminsForOrder.unit, legend)
        ];
    };
    /**
     * Generates a LabeledSeries from the given initial date and y-value.
     * @param date The DateTime corresponding to the initial point to chart.
     * @param yValue The y-value for the initial point to chart.
     */
    LabeledSeries.fromInitialPoint = function (date, yValue) {
        return new LabeledSeries('', [[date, yValue]]);
    };
    /**
     * Generates LabeledSeries from the given MicrobioReport.
     * @param report The MicrobioReport to chart.
     * @param date the DateTime corresponding to the Observations in the
     *     MicrobioReport.
     */
    LabeledSeries.fromMicrobioReport = function (report, date) {
        var series = [];
        var interpretationMap = new Map();
        // Sort results by interpretation, and make a LabeledSeries for each.
        for (var _i = 0, _a = report.results; _i < _a.length; _i++) {
            var observation = _a[_i];
            var categoricalYValue = observation.display;
            var interpretation = observation.interpretation.code;
            if (interpretationMap.get(interpretation)) {
                var existing = interpretationMap.get(interpretation);
                existing.push([date, categoricalYValue]);
                interpretationMap.set(interpretation, existing);
            }
            else {
                interpretationMap.set(interpretation, [[date, categoricalYValue]]);
            }
        }
        // Make a LabeledSeries for each interpretation.
        for (var _b = 0, _c = Array.from(interpretationMap.keys()); _b < _c.length; _b++) {
            var interpretation = _c[_b];
            var seriesLabel = report.id + '-' + interpretation + '-' + report.status;
            var isPositive = seriesLabel.includes(_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_1__["CHECK_RESULT_CODE"]);
            series.push(new LabeledSeries(
            // Encode the status and interpretation into the series name so that
            // we can use d3 later on to filter the data points and display them
            // with the correct styling.
            seriesLabel, interpretationMap.get(interpretation), undefined, // unit
            LabeledSeries.getLegendInfoFromResult(report.status, isPositive)));
        }
        return series;
    };
    /**
     * Returns the correct legend info for a microbio report.
     * @param status The MicrobioReport's status.
     * @param isPositive Whether the report appears to be positive.
     * @returns The correct legend info for the report.
     */
    LabeledSeries.getLegendInfoFromResult = function (status, isPositive) {
        if (isPositive) {
            if (status === _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_0__["DiagnosticReportStatus"].Preliminary) {
                return _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__["posPrelimMB"];
            }
            else if (status === _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_0__["DiagnosticReportStatus"].Final) {
                return _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__["posFinalMB"];
            }
            return _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__["posOtherNB"];
        }
        else {
            if (status === _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_0__["DiagnosticReportStatus"].Preliminary) {
                return _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__["negPrelimMB"];
            }
            else if (status === _fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_0__["DiagnosticReportStatus"].Final) {
                return _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__["negFinalMB"];
            }
            return _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__["negOtherMB"];
        }
    };
    /**
     * Generates LabeledSeries from the given DiagnosticReport.
     * @param report The DiagnosticReport to chart.
     * @param date the DateTime corresponding to the Observations in the
     *     DiagnosticReport.
     */
    LabeledSeries.fromDiagnosticReport = function (annotatedReport, date) {
        var report = annotatedReport.report;
        var seriesLabel = report.id + '-' +
            (annotatedReport.report ? annotatedReport.report.category :
                'unnamedReport');
        var coordinates = [];
        // We are setting the coordinates to the category of the document (RADRPT,
        // CT Report, etc.)
        coordinates = [[report.timestamp, report.category]];
        var series = [new LabeledSeries(seriesLabel, coordinates, undefined, // unit
            _conceptmappings_resource_codes_display_grouping__WEBPACK_IMPORTED_MODULE_2__["radiology"])];
        return series;
    };
    LabeledSeries.getYPositionForMed = function (medAdmin, categoricalYPosition) {
        return categoricalYPosition !== undefined && categoricalYPosition !== null ?
            categoricalYPosition :
            medAdmin.dosage.quantity;
    };
    LabeledSeries.addEncounterEndpoints = function (coordinates, encounters) {
        if (coordinates.length > 0) {
            // If any encounters are set for this MedicationOrderSet, add null values
            // to the endpoints of encounters to ensure line breakage between points
            // of different encounters.
            // We assume that encounter endpoints correspond to correct line breaks,
            // and do not cross-check encounter id's of MedicationOrders or
            // MedicationAdministrations.
            coordinates = coordinates.sort(function (a, b) { return a[0] - b[0]; });
            for (var _i = 0, encounters_1 = encounters; _i < encounters_1.length; _i++) {
                var encounter = encounters_1[_i];
                coordinates.unshift([encounter.period.start.toUTC(), null]);
                coordinates.push([encounter.period.end.toUTC(), null]);
            }
        }
        return coordinates;
    };
    LabeledSeries.prototype.hasPointInRange = function (dateRange) {
        for (var _i = 0, _a = this.coordinates.map(function (c) { return c[0]; }); _i < _a.length; _i++) {
            var x = _a[_i];
            if (dateRange.contains(x)) {
                return true;
            }
        }
        return false;
    };
    return LabeledSeries;
}());



/***/ }),

/***/ "./src/app/graphs/graphdatatypes/linegraphdata.ts":
/*!********************************************************!*\
  !*** ./src/app/graphs/graphdatatypes/linegraphdata.ts ***!
  \********************************************************/
/*! exports provided: LineGraphData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineGraphData", function() { return LineGraphData; });
/* harmony import */ var _fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../fhir-resources/observation-interpretation-valueset */ "./src/app/fhir-resources/observation-interpretation-valueset.ts");
/* harmony import */ var _graphtypes_tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../graphtypes/tooltips/annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
/* harmony import */ var _graphtypes_tooltips_medication_tooltips__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../graphtypes/tooltips/medication-tooltips */ "./src/app/graphs/graphtypes/tooltips/medication-tooltips.ts");
/* harmony import */ var _graphtypes_tooltips_observation_tooltips__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../graphtypes/tooltips/observation-tooltips */ "./src/app/graphs/graphtypes/tooltips/observation-tooltips.ts");
/* harmony import */ var _graphdata__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./graphdata */ "./src/app/graphs/graphdatatypes/graphdata.ts");
/* harmony import */ var _labeled_series__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./labeled-series */ "./src/app/graphs/graphdatatypes/labeled-series.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



// tslint:disable-next-line:max-line-length



/**
 * LineGraphData holds configurations for a line graph. A line graph may display
 * one or more LabeledSeries.
 */
var LineGraphData = /** @class */ (function (_super) {
    __extends(LineGraphData, _super);
    function LineGraphData(
    /** The label for the graph. */
    label, 
    /** The LabeledSeries that are a part of this line graph. */
    series, 
    /** The minimum and maximum y-values for this data. */
    yAxisDataBounds, 
    /** The unit for the y-axis of the graph. */
    unit, tooltipMap, tooltipKeyFn, regions, precision, resourceCodeGroup) {
        var _this = _super.call(this, series, tooltipMap, tooltipKeyFn, regions) || this;
        _this.label = label;
        _this.yAxisDataBounds = yAxisDataBounds;
        _this.unit = unit;
        _this.precision = precision ? precision : 0;
        _this.yTicks =
            LineGraphData.getYTicks(yAxisDataBounds[0], yAxisDataBounds[1]);
        _this.resourceGroup = resourceCodeGroup;
        return _this;
    }
    LineGraphData.emptyData = function () {
        return new LineGraphData('', [], [0, 0], '');
    };
    /**
     * Converts a list of ObservationSets to a LineGraphData object.
     * @param label The label for this set of observations.
     * @param observationGroup A list of ObservationSets to display.
     * @param resourceCodeGroup The ResourceCodeGroup these ObservationSets belong
     *   to
     * @param sanitizer A DOM sanitizer for use in tooltip construction
     * @param encounters A list of Encounters to use while determining line breaks
     *     in series.
     * @returns a new LineGraphData for this observation set.
     * @throws Error if the observations in observationGroup have different units.
     */
    LineGraphData.fromObservationSetList = function (label, observationGroup, resourceCodeGroup, sanitizer, encounters) {
        var minY = Number.MAX_VALUE;
        var maxY = Number.MIN_VALUE;
        var allSeries = [];
        var obsGroupToSeries = new Map();
        for (var _i = 0, observationGroup_1 = observationGroup; _i < observationGroup_1.length; _i++) {
            var obsSet = observationGroup_1[_i];
            var lblSeries = _labeled_series__WEBPACK_IMPORTED_MODULE_5__["LabeledSeries"].fromObservationSet(obsSet, encounters);
            obsGroupToSeries.set(obsSet, lblSeries);
            allSeries.push(lblSeries);
            /* Find the minimum and maximum y values for all the series. */
            if (lblSeries.yDisplayBounds) {
                minY = Math.min(minY, lblSeries.yDisplayBounds[0]);
                maxY = Math.max(maxY, lblSeries.yDisplayBounds[1]);
            }
        }
        var tooltipMap = LineGraphData.makeTooltipMap(obsGroupToSeries, sanitizer);
        tooltipMap = LineGraphData.addAbnormalValueTooltips(tooltipMap, sanitizer, allSeries);
        var allUnits = new Set(observationGroup.map(function (x) { return x.unit; }).filter(function (x) { return x !== undefined; }));
        var data = new LineGraphData(label, allSeries, [minY, maxY], allUnits.values().next().value, tooltipMap && tooltipMap.size > 0 ? tooltipMap : undefined, undefined, // tooltipMap
        undefined, // regions
        resourceCodeGroup.precision, resourceCodeGroup);
        return data;
    };
    /**
     * Manually find y axis tick values based on the min and max display bounds.
     */
    LineGraphData.getYTicks = function (min, max, tickCount) {
        if (tickCount === void 0) { tickCount = 4; }
        // Evenly space out 5 numbers between the min and max (display bounds).
        var difference = max - min;
        var spacing = difference / tickCount;
        var values = [];
        // If there is no difference between the min and max, simply return the
        // min.
        if (spacing === 0) {
            return [min];
        }
        for (var curr = min; curr <= max; curr += spacing) {
            values.push(curr);
        }
        return values;
    };
    LineGraphData.makeTooltipMap = function (obsGroupToSeries, sanitizer) {
        var tooltipMap = new Map();
        for (var _i = 0, _a = Array.from(obsGroupToSeries.entries()); _i < _a.length; _i++) {
            var entry = _a[_i];
            var obsGroup = entry[0];
            var series = entry[1];
            for (var _b = 0, _c = obsGroup.resourceList; _b < _c.length; _b++) {
                var obs = _c[_b];
                var isAbnormal = series.abnormalCoordinates.has(obs.observation.timestamp.toISO());
                var timestamp = obs.observation.timestamp.toMillis().toString();
                // The key for this tooltip is the administration's timestamp.
                // There may be multiple data points associated with the timestamp
                // so we stack the administrations on top of one another in that case.
                if (tooltipMap.get(timestamp)) {
                    // Blood pressure is read into the ObservationSet differently,
                    // causing an edge case in the presentation of the values in the
                    // tooltips. We only want to display 'Blood pressure' once
                    if (obs.observation.codes[0].label === 'Blood pressure') {
                        // We are combining the array into one AnnotatedTooltip in
                        // order to check to see if "Blood pressure" has already been added
                        // to any of the previous tooltips
                        var annotatedTT = _graphtypes_tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_1__["AnnotatedTooltip"].combineAnnotatedTooltipArr(tooltipMap.get(timestamp));
                        if (annotatedTT.tooltipChart.includes('Blood pressure')) {
                            continue;
                        }
                    }
                    tooltipMap.get(timestamp).push(new _graphtypes_tooltips_observation_tooltips__WEBPACK_IMPORTED_MODULE_3__["GenericAnnotatedObservationTooltip"](false, series.legendInfo.fill)
                        .getTooltip(obs, sanitizer, isAbnormal));
                }
                else {
                    tooltipMap.set(timestamp, [new _graphtypes_tooltips_observation_tooltips__WEBPACK_IMPORTED_MODULE_3__["GenericAnnotatedObservationTooltip"](true, series.legendInfo.fill)
                            .getTooltip(obs, sanitizer, isAbnormal)]);
                }
            }
        }
        return tooltipMap;
    };
    /**
     * Constructs a map of timestamps to GenericAbnormalTooltips for any point
     * with an "abnormal" value. Currently, we only use the normal range as
     * reference.
     * @param series The series to construct the tooltip map for.
     * @param tooltipMap The existing tooltips for the series.
     * @param obsLabelToColor A map of Observation label to corresponding color.
     * @param sanitizer A DOM sanitizer for use in tooltip construction
     * @returns a map of timstamp strings to tooltips, with GenericObservation
     *     tooltips replaced with GenericAbnormal tooltip if the value is
     *     abnormal.
     */
    LineGraphData.addAbnormalValueTooltips = function (tooltipMap, sanitizer, labeledSeries) {
        var alreadyMarked = new Set();
        for (var _i = 0, labeledSeries_1 = labeledSeries; _i < labeledSeries_1.length; _i++) {
            var series = labeledSeries_1[_i];
            // Add a tooltip for any value with an abnormal value.
            for (var _a = 0, _b = series.coordinates; _a < _b.length; _a++) {
                var coords = _b[_a];
                var timestamp = coords[0].toMillis().toString();
                if (series.abnormalCoordinates.has(coords[0].toISO())) {
                    var params = {};
                    params['timestamp'] = coords[0].toMillis();
                    params['value'] = coords[1];
                    params['label'] = series.label;
                    params['unit'] = series.unit;
                    // The key for this tooltip is the timestamp.
                    // There may be multiple data points associated with the
                    // timestamp so we stack the administrations on top of one
                    // another in that case.
                    if (tooltipMap.get(timestamp) && !alreadyMarked.has(timestamp)) {
                        tooltipMap.get(timestamp).push(new _graphtypes_tooltips_observation_tooltips__WEBPACK_IMPORTED_MODULE_3__["GenericAbnormalTooltip"](false, series.legendInfo.fill)
                            .getTooltip(params, sanitizer));
                        alreadyMarked.add(timestamp);
                    }
                    else if (!tooltipMap.get(timestamp)) {
                        tooltipMap.set(timestamp, [new _graphtypes_tooltips_observation_tooltips__WEBPACK_IMPORTED_MODULE_3__["GenericAbnormalTooltip"](true, series.legendInfo.fill)
                                .getTooltip(params, sanitizer)]);
                    }
                }
            }
            return tooltipMap;
        }
    };
    /**
     * Converts a list of MedicationOrderSets to a LineGraphData object.
     * @param medicationOrderListGroup A list of MedicationOrderSets to
     *     display.
     * @param encounters A list of Encounters to use while determining line
     *     breaks in series.
     * @returns a new LineGraphData for this observation set.
     * @throws Error if the medication administrations in medicationOrderSet
     *     have different units.
     */
    LineGraphData.fromMedicationOrderSet = function (medicationOrderSet, dateRange, sanitizer, encounters) {
        var tooltipMap = new Map();
        var precision = 0;
        for (var _i = 0, _a = medicationOrderSet.resourceList; _i < _a.length; _i++) {
            var order = _a[_i];
            for (var _b = 0, _c = order.medicationAdministrationSet.resourceList; _b < _c.length; _b++) {
                var admin = _c[_b];
                var timestamp = admin.medAdministration.timestamp.toMillis().toString();
                // The key for this tooltip is the administration's timestamp.
                // There may be multiple data points associated with the timestamp
                // so we stack the administrations on top of one another in that
                // case.
                var newTT = new _graphtypes_tooltips_medication_tooltips__WEBPACK_IMPORTED_MODULE_2__["MedicationAdministrationTooltip"]().getTooltip([admin], sanitizer);
                if (tooltipMap.get(timestamp)) {
                    tooltipMap.get(timestamp).push(newTT);
                }
                else {
                    tooltipMap.set(timestamp, [newTT]);
                }
            }
        }
        return new LineGraphData(medicationOrderSet.label, [_labeled_series__WEBPACK_IMPORTED_MODULE_5__["LabeledSeries"].fromMedicationOrderSet(medicationOrderSet, dateRange, encounters)], [medicationOrderSet.minDose, medicationOrderSet.maxDose], medicationOrderSet.unit, tooltipMap, undefined, undefined, precision);
    };
    /**
     * Converts a list of ObservationSets with discrete y-values (results) to
     * a LineGraphData object. If we are graphing Observations with discrete
     * values, such as "yellow" for the color of urine, we group all
     * ObservationSets into one LabeledSeries, and display textual information
     * in the tooltip.
     * @param label The label for this set of observations.
     * @param observationGroup A list of ObservationSets to display.
     * @param encounters A list of Encounters to use while determining line
     *     breaks in series.
     * @returns a new LineGraphData for this observation set.
     * @throws Error if the observations in observationGroup have different
     *     units.
     */
    LineGraphData.fromObservationSetListDiscrete = function (label, observationGroup, sanitizer, encounters) {
        // For ObservationSets with discrete categories, we display a
        // scatterplot with one series, with most information in the tooltip.
        var yValue = 10;
        var lblSeries = _labeled_series__WEBPACK_IMPORTED_MODULE_5__["LabeledSeries"].fromObservationSetsDiscrete(observationGroup, yValue, label, encounters);
        var tooltipMap = new Map();
        for (var _i = 0, observationGroup_2 = observationGroup; _i < observationGroup_2.length; _i++) {
            var observationSet = observationGroup_2[_i];
            for (var _a = 0, _b = observationSet.resourceList; _a < _b.length; _a++) {
                var obs = _b[_a];
                var isAbnormal = (obs.observation.interpretation &&
                    obs.observation.interpretation.code !== _fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_0__["NORMAL"]) ?
                    true :
                    false;
                var tsString = obs.observation.timestamp.toMillis().toString();
                // Only add the timestamp to the tooltip for the first entry.
                var newTT = void 0;
                if (obs.observation.value) {
                    newTT = new _graphtypes_tooltips_observation_tooltips__WEBPACK_IMPORTED_MODULE_3__["GenericAnnotatedObservationTooltip"](!tooltipMap.has(tsString), lblSeries.legendInfo.fill)
                        .getTooltip(obs, sanitizer, isAbnormal);
                }
                else {
                    newTT = new _graphtypes_tooltips_observation_tooltips__WEBPACK_IMPORTED_MODULE_3__["DiscreteObservationTooltip"](!tooltipMap.has(tsString))
                        .getTooltip([obs.observation], sanitizer);
                }
                // The key for this tooltip is the observation's timestamp.
                // There may be multiple data points associated with the timestamp
                // so we stack the tooltips on top of one another in that case.
                if (tooltipMap.has(tsString)) {
                    tooltipMap.get(tsString).push(newTT);
                }
                else {
                    tooltipMap.set(tsString, [newTT]);
                }
            }
        }
        tooltipMap = LineGraphData.addAbnormalValueTooltips(tooltipMap, sanitizer, [lblSeries]);
        return new LineGraphData(label, [lblSeries], [0, yValue * 2], undefined, // Units
        tooltipMap);
    };
    return LineGraphData;
}(_graphdata__WEBPACK_IMPORTED_MODULE_4__["GraphData"]));



/***/ }),

/***/ "./src/app/graphs/graphdatatypes/microbiographdata.ts":
/*!************************************************************!*\
  !*** ./src/app/graphs/graphdatatypes/microbiographdata.ts ***!
  \************************************************************/
/*! exports provided: MicrobioGraphData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MicrobioGraphData", function() { return MicrobioGraphData; });
/* harmony import */ var src_app_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/app/fhir-resources/observation-interpretation-valueset */ "./src/app/fhir-resources/observation-interpretation-valueset.ts");
/* harmony import */ var _fhir_resources_annotated_annotated_microbio_report__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../fhir-resources/annotated/annotated-microbio-report */ "./src/app/fhir-resources/annotated/annotated-microbio-report.ts");
/* harmony import */ var _graphtypes_tooltips_microbio_tooltips__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../graphtypes/tooltips/microbio-tooltips */ "./src/app/graphs/graphtypes/tooltips/microbio-tooltips.ts");
/* harmony import */ var _labeled_series__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./labeled-series */ "./src/app/graphs/graphdatatypes/labeled-series.ts");
/* harmony import */ var _stepgraphdata__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./stepgraphdata */ "./src/app/graphs/graphdatatypes/stepgraphdata.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();





/**
 * MicrobioGraphData holds configurations for a microbiology graph. The format
 * of a microbiology graph is simliar to a step graph in that each y-axis
 * position represents a single microbiology test, and points plotted along
 * that position represent results for that test.
 */
var MicrobioGraphData = /** @class */ (function (_super) {
    __extends(MicrobioGraphData, _super);
    function MicrobioGraphData(endpointSeries, tooltipMap) {
        return _super.call(this, endpointSeries, tooltipMap, undefined) || this;
    }
    /**
     * Converts a list of MicrobioReports to a StepGraphData object.
     * All MicrobioReports in the list should belong to the same culture type.
     * @param microbioReports A list of MicrobioReports to display.
     * @returns a new StepGraphData for this set.
     */
    MicrobioGraphData.fromMicrobioReports = function (microbioReports, sanitizer) {
        var points = [];
        var tooltipMap = new Map();
        for (var _i = 0, microbioReports_1 = microbioReports; _i < microbioReports_1.length; _i++) {
            var report = microbioReports_1[_i];
            // Get the timestamp from the collection time of the specimen.
            var specimen = report.specimen;
            if (specimen) {
                var annotatedReport = new _fhir_resources_annotated_annotated_microbio_report__WEBPACK_IMPORTED_MODULE_1__["AnnotatedMicrobioReport"](report);
                for (var _a = 0, _b = _labeled_series__WEBPACK_IMPORTED_MODULE_3__["LabeledSeries"].fromMicrobioReport(report, annotatedReport.timestamp); _a < _b.length; _a++) {
                    var series = _b[_a];
                    points.push(series);
                    var isAbnormal = series.label.includes(src_app_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_0__["CHECK_RESULT_CODE"]);
                    var color = series.legendInfo.fill;
                    // For this tooltip, the keys are timestamps.
                    if (tooltipMap.has(annotatedReport.timestamp.toMillis().toString())) {
                        tooltipMap.get(annotatedReport.timestamp.toMillis().toString())
                            .push(new _graphtypes_tooltips_microbio_tooltips__WEBPACK_IMPORTED_MODULE_2__["MicrobioTooltip"](false, color)
                            .getTooltip(annotatedReport, sanitizer, isAbnormal));
                    }
                    else {
                        tooltipMap.set(annotatedReport.timestamp.toMillis().toString(), [new _graphtypes_tooltips_microbio_tooltips__WEBPACK_IMPORTED_MODULE_2__["MicrobioTooltip"](true, color)
                                .getTooltip(annotatedReport, sanitizer, isAbnormal)]);
                    }
                }
            }
        }
        return new MicrobioGraphData(points, tooltipMap);
    };
    return MicrobioGraphData;
}(_stepgraphdata__WEBPACK_IMPORTED_MODULE_4__["StepGraphData"]));



/***/ }),

/***/ "./src/app/graphs/graphdatatypes/stepgraphdata.ts":
/*!********************************************************!*\
  !*** ./src/app/graphs/graphdatatypes/stepgraphdata.ts ***!
  \********************************************************/
/*! exports provided: StepGraphData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StepGraphData", function() { return StepGraphData; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _graphtypes_tooltips_medication_tooltips__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../graphtypes/tooltips/medication-tooltips */ "./src/app/graphs/graphtypes/tooltips/medication-tooltips.ts");
/* harmony import */ var _graphdata__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphdata */ "./src/app/graphs/graphdatatypes/graphdata.ts");
/* harmony import */ var _labeled_series__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./labeled-series */ "./src/app/graphs/graphdatatypes/labeled-series.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/**
 * StepGraphData holds configurations for a step graph. A step graph displays
 * one or more LabeledSeries.
 */
var StepGraphData = /** @class */ (function (_super) {
    __extends(StepGraphData, _super);
    function StepGraphData(
    /** A list of the LabeledSeries data to plot. */
    dataSeries, 
    /** A list of the LabeledSeries representing end points. */
    // readonly endpointSeries: LabeledSeries[],
    /** A map of tooltips for the data points. */
    tooltipMap, 
    /**
     *  The function to call to get the key for the tooltip map for a point.
     */
    keyFn) {
        return _super.call(this, dataSeries, tooltipMap, keyFn) || this;
    }
    /**
     * Converts a list of MedicationOrderSets to a StepGraphData object.
     * @param medicationOrderListGroup A list of MedicationOrderSets to display.
     * @returns a new StepGraphData for this observation set.
     * @throws Error if the observations in observationGroup have different units.
     */
    StepGraphData.fromMedicationOrderSetList = function (medicationOrderListGroup, dateRange, sanitizer) {
        var data = [];
        var endpoints = [];
        medicationOrderListGroup = medicationOrderListGroup.sort(function (a, b) {
            return a.resourceList[a.resourceList.length - 1]
                .lastAdministration.timestamp.toMillis() -
                b.resourceList[b.resourceList.length - 1]
                    .lastAdministration.timestamp.toMillis();
        });
        var tooltipMap = new Map();
        for (var _i = 0, medicationOrderListGroup_1 = medicationOrderListGroup; _i < medicationOrderListGroup_1.length; _i++) {
            var medOrderSet = medicationOrderListGroup_1[_i];
            // Each MedicationOrderSet represents multiple MedicationOrders
            // for the same medicine.
            for (var _a = 0, _b = medOrderSet.resourceList; _a < _b.length; _a++) {
                var medOrder = _b[_a];
                var labeledSeries = _labeled_series__WEBPACK_IMPORTED_MODULE_3__["LabeledSeries"].fromMedicationOrder(medOrder, dateRange, medOrder.medicationAdministrationSet.label);
                var administrationSeries = labeledSeries[0];
                var endpointSeries = labeledSeries[1];
                data.push(administrationSeries);
                endpoints.push(endpointSeries);
                // For this custom tooltip, the key is the series ID, and the value is
                // the medication tooltip that shows the first and last doses for the
                // medication.
                tooltipMap.set(medOrderSet.rxNormCode.label.toLowerCase() +
                    medOrder.firstAdministration.timestamp, [new _graphtypes_tooltips_medication_tooltips__WEBPACK_IMPORTED_MODULE_1__["MedicationTooltip"]().getTooltip(medOrder, sanitizer)]);
                tooltipMap.set(medOrderSet.rxNormCode.label.toLowerCase() +
                    medOrder.lastAdministration.timestamp, [new _graphtypes_tooltips_medication_tooltips__WEBPACK_IMPORTED_MODULE_1__["MedicationTooltip"]().getTooltip(medOrder, sanitizer)]);
            }
        }
        // Do not display the units for Medication administration values on the card
        // for MedicationSummary.
        for (var _c = 0, data_1 = data; _c < data_1.length; _c++) {
            var series = data_1[_c];
            series.unit = undefined;
        }
        for (var _d = 0, endpoints_1 = endpoints; _d < endpoints_1.length; _d++) {
            var series = endpoints_1[_d];
            series.unit = undefined;
        }
        return new StepGraphData(endpoints, // do not render medication administrations, only endpoints
        tooltipMap, 
        // Our tooltip key here is the drug name plus the timestamp.
        function (tooltipContext) {
            var xValue = tooltipContext.dataPoints[0].label;
            var yValue = tooltipContext.dataPoints[0].value;
            return yValue.toLowerCase() +
                luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromISO(xValue).toMillis().toString();
        });
    };
    return StepGraphData;
}(_graphdata__WEBPACK_IMPORTED_MODULE_2__["GraphData"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/axis-group.ts":
/*!*************************************************!*\
  !*** ./src/app/graphs/graphtypes/axis-group.ts ***!
  \*************************************************/
/*! exports provided: AxisGroup */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AxisGroup", function() { return AxisGroup; });
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
/**
 * An AxisGroup is a set of Axes that should be rendered on a single card
 * together.
 *
 * Upon construction, the AxisGroup kicks off a FHIR call to determine whether
 * there is data available for the AxisGroup within the time span of the
 * application. When the promise returns, its result is stored in the
 * dataAvailable class variable.
 *
 * None of the information in AxisGroup changes over the application's
 * lifecycle.
 */
var AxisGroup = /** @class */ (function () {
    /**
     * Constructs an AxisGroup.
     *
     * If label is unset in the constructor, then every axis in axes must have
     * the same label for the constructor to succeed. Similarly, if displayGroup
     * is unset, every axis must have the same resourceGroup.displayGrouping.
     */
    function AxisGroup(
    /**
     * The set of axes to be displayed in the same grouping.
     */
    axes, 
    /**
     * The label for this axis group. If it isn't set here, we'll set it
     * using the label of the contained axes.
     */
    label, 
    /**
     * The display grouping for this axis group. If it isn't set here, we'll
     * set it using the display grouping of the contained axes.
     */
    displayGroup) {
        this.axes = axes;
        this.label = label;
        this.displayGroup = displayGroup;
        /**
         * Whether there is data available in the app timescope for this axis group.
         * Marked as public because Angular templates need to get to it, and marked
         * as mutable since it's changed by a promise result, but its value is only
         * set once.
         */
        this.dataAvailable = undefined;
        if (!label) {
            var labelSet = new Set(axes.map(function (axis) { return axis.label; }));
            if (labelSet.size !== 1) {
                throw Error('The axis group has multiple labels, so we can\'t pick just one: ' +
                    Array.from(labelSet.entries()));
            }
            this.label = axes[0].label;
        }
        if (!displayGroup) {
            var allDisplayGroups = new Set(axes.map(function (axis) { return axis.resourceGroup.displayGrouping.label; }));
            if (allDisplayGroups.size !== 1) {
                throw Error('All axes on the same card need to have the same display grouping. Groups:' +
                    Array.from(new Set(axes.map(function (axis) { return axis.resourceGroup.displayGrouping.label; }))));
            }
            this.displayGroup = axes[0].resourceGroup.displayGrouping;
        }
    }
    /**
     * Returns whether there is any data available for any axes in this group
     * within the time scope of the app.
     */
    AxisGroup.prototype.dataAvailableInAppTimeScope = function () {
        var _this = this;
        if (this.dataAvailable !== undefined) {
            return Promise.resolve(this.dataAvailable);
        }
        return Promise
            .all(this.axes.map(function (axis) { return axis.axisDataAvailableInAppTimeScope(); }))
            .then(function (rsc) {
            _this.dataAvailable = rsc.some(function (r) { return r === true; });
            return _this.dataAvailable;
        });
    };
    return AxisGroup;
}());



/***/ }),

/***/ "./src/app/graphs/graphtypes/axis.ts":
/*!*******************************************!*\
  !*** ./src/app/graphs/graphtypes/axis.ts ***!
  \*******************************************/
/*! exports provided: Axis */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Axis", function() { return Axis; });
/* harmony import */ var _conceptmappings_resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../conceptmappings/resource-codes/bch-microbio-code */ "./src/app/conceptmappings/resource-codes/bch-microbio-code.ts");
/* harmony import */ var _conceptmappings_resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../conceptmappings/resource-codes/diagnostic-report-code */ "./src/app/conceptmappings/resource-codes/diagnostic-report-code.ts");
/* harmony import */ var _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../conceptmappings/resource-codes/loinc-code */ "./src/app/conceptmappings/resource-codes/loinc-code.ts");
/* harmony import */ var _conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../conceptmappings/resource-codes/rx-norm */ "./src/app/conceptmappings/resource-codes/rx-norm.ts");
/* harmony import */ var _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../fhir-resources/medication-order */ "./src/app/fhir-resources/medication-order.ts");
/* harmony import */ var _graphdatatypes_diagnosticgraphdata__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../graphdatatypes/diagnosticgraphdata */ "./src/app/graphs/graphdatatypes/diagnosticgraphdata.ts");
/* harmony import */ var _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../graphdatatypes/linegraphdata */ "./src/app/graphs/graphdatatypes/linegraphdata.ts");
/* harmony import */ var _graphdatatypes_microbiographdata__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../graphdatatypes/microbiographdata */ "./src/app/graphs/graphdatatypes/microbiographdata.ts");
/* harmony import */ var _graphdatatypes_stepgraphdata__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../graphdatatypes/stepgraphdata */ "./src/app/graphs/graphdatatypes/stepgraphdata.ts");
/* harmony import */ var _graph_graph_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.










/**
 * An axis represents one graph to be rendered. It
 * holds values for the type of graph (step, scatter, line, etc) as well as the
 * actual graph data.
 *
 * One axis might have multiple ResourceCodes associated with it, but all of
 * the same type.
 *
 * This class makes the FHIR calls to grab the associated data for the chart.
 */
var Axis = /** @class */ (function () {
    /**
     * The constructor for this axis.
     * @param fhirService The FhirService used to make the FHIR calls.
     * @param resourceGroup The ResourceGroup to request data for.
     * @param dateRange: The date range to display on the axis.
     * @param label?: The optional y-axis label for this axis.
     */
    function Axis(fhirService, sanitizer, 
    /**
     * The ResourceCodeGroup for this axis.
     */
    resourceGroup, 
    /*
     * The label for this axis.
     */
    label) {
        this.fhirService = fhirService;
        this.sanitizer = sanitizer;
        this.resourceGroup = resourceGroup;
        /*
         * Whether to show tick marks for this axis (only changed when results are all
         * qualitative).
         */
        this.showTicks = true;
        // The encounters for the date range.
        this.encounters = [];
        /** Whether there is data available for this axis in the app time scope. */
        this.axisDataAvailable = true;
        this.chartType = resourceGroup.chartType;
        this.displayConcept = resourceGroup.displayGrouping;
        this.label = label;
        var resourceCodeList = this.resourceGroup.resourceCodes;
        // Check that all elements of the resourceCodeList are of the same type.
        this.allLoinc = resourceCodeList.every(function (code) { return code instanceof _conceptmappings_resource_codes_loinc_code__WEBPACK_IMPORTED_MODULE_2__["LOINCCode"]; });
        this.allRx = resourceCodeList.every(function (code) { return code instanceof _conceptmappings_resource_codes_rx_norm__WEBPACK_IMPORTED_MODULE_3__["RxNormCode"]; });
        this.allBCHMicrobio =
            resourceCodeList.every(function (code) { return code instanceof _conceptmappings_resource_codes_bch_microbio_code__WEBPACK_IMPORTED_MODULE_0__["BCHMicrobioCode"]; });
        this.allDiagnosticReport =
            resourceCodeList.every(function (code) { return code instanceof _conceptmappings_resource_codes_diagnostic_report_code__WEBPACK_IMPORTED_MODULE_1__["DiagnosticReportCode"]; });
        if (!this.allLoinc && !this.allRx && !this.allBCHMicrobio &&
            !this.allDiagnosticReport) {
            throw Error('All resource codes must be of the same type.');
        }
    }
    /**
     * Changes this axis' date range and loads in the new graph data accordingly.
     */
    Axis.prototype.updateDateRange = function (dateRange) {
        var _this = this;
        if (dateRange === this.dateRange) {
            return Promise.resolve(this.alreadyResolvedData);
        }
        // Invalidate the already-resolved data so that the graph data promise
        // has to be re-evaluated.
        this.dateRange = dateRange;
        this.alreadyResolvedData = undefined;
        this.errorMessage = undefined;
        return this.getDataFromFhir(dateRange).then(function (data) {
            _this.alreadyResolvedData = data;
            return data;
        }, function (rejection) {
            if (rejection instanceof Error) {
                _this.errorMessage = rejection.message;
            }
            else {
                _this.errorMessage = JSON.stringify(rejection, null, 4);
            }
            return _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__["LineGraphData"].emptyData();
        });
    };
    /**
     * Returns whether there is data available for this axis within the
     * application's time scope.
     */
    Axis.prototype.axisDataAvailableInAppTimeScope = function () {
        var _this = this;
        return this.resourceGroup.dataAvailableInAppTimeScope().then(function (res) {
            _this.axisDataAvailable = res;
            return _this.axisDataAvailable;
        });
    };
    /**
     * Gets the appropriate GraphData by classifying the resource codes and
     * making the appropriate FHIR calls for data and transformations. If
     * the data is already set in this class, it just returns that data.
     *
     * @returns A GraphData promise that will resolve to the GraphData for
     *    this axis's resourceGroup.
     */
    Axis.prototype.getDataFromFhir = function (dateRange) {
        var _this = this;
        if (this.alreadyResolvedData) {
            return Promise.resolve(this.alreadyResolvedData);
        }
        // Set the encounters for this date range. If the promise fails, the list of
        // encounters is empty.
        this.fhirService.getEncountersForPatient(dateRange).then(function (e) {
            if (!e) {
                e = [];
            }
            e = e.sort(function (a, b) { return a.period.start.toMillis() - b.period.start.toMillis(); });
            _this.encounters = e;
        }, function (reject) { return _this.encounters = []; });
        if (this.allRx) {
            // Prescriptions can be plotted as a step chart or as a line chart.
            if (this.chartType === _graph_graph_component__WEBPACK_IMPORTED_MODULE_9__["ChartType"].STEP) {
                return this.getStepGraphDataForMedicationSummary(this.resourceGroup, dateRange);
            }
            else {
                return this.getLineGraphDataForMedicationDetail(this.resourceGroup, dateRange);
            }
        }
        if (this.allBCHMicrobio) {
            // Microbiology always shows up as a step chart.
            return this.getStepGraphDataForMB(this.resourceGroup, dateRange);
        }
        if (this.allDiagnosticReport) {
            return this.getStepGraphDataForDiagnosticReport(this.resourceGroup, dateRange);
        }
        else {
            // In this case it is all LOINC codes.
            // We use LineGraphData for both ChartType.Scatter and
            // ChartType.Line, for plotting LOINC Codes.
            return this.resourceGroup
                .getResourceSet(dateRange)
                .then(function (obsSetList) {
                if (obsSetList) {
                    var allUnits = new Set(obsSetList.map(function (x) { return x.unit; }).filter(function (x) { return x !== undefined; }));
                    // If the observation set contains any qualitative
                    // values, even if it's mixed in with quantitative values,
                    // we display the discrete linegraph. Similarly, if the
                    // observations have different units we display it as a discrete
                    // line graph.
                    if (obsSetList.some(function (obsSet) { return obsSet.anyQualitative; }) ||
                        allUnits.size > 1) {
                        _this.showTicks = false;
                        return _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__["LineGraphData"].fromObservationSetListDiscrete(_this.displayConcept.label, obsSetList, _this.sanitizer, _this.encounters);
                    }
                    return _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__["LineGraphData"].fromObservationSetList(_this.displayConcept.label, obsSetList, _this.resourceGroup, _this.sanitizer, _this.encounters);
                }
                return _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__["LineGraphData"].emptyData();
            });
        }
    };
    /**
     * Get the data needed for the medication summary.
     * We first get the MedicationAdministrations corresponding to the RxNorms to
     * display on the page, and group them by order id (representing a
     * prescription). We then get the MedicationOrder for each order id, and group
     * those into MedicationOrderSets, where each MedicationOrderSet represents a
     * set of MedicationOrders for a particular medication.
     * @param rxNorms The RxNorms to be displayed in the StepGraphCard.
     */
    Axis.prototype.getStepGraphDataForMedicationSummary = function (rxNorms, dateRange) {
        var _this = this;
        return rxNorms.getResourceSet(dateRange).then(function (medOrderSets) {
            return _graphdatatypes_stepgraphdata__WEBPACK_IMPORTED_MODULE_8__["StepGraphData"].fromMedicationOrderSetList(medOrderSets.map(function (x) { return x.orders; }), dateRange, _this.sanitizer);
        });
    };
    Axis.prototype.getStepGraphDataForMB = function (bchCodes, dateRange) {
        var _this = this;
        return bchCodes.getResourceSet(dateRange).then(function (microbioReports) {
            return _graphdatatypes_microbiographdata__WEBPACK_IMPORTED_MODULE_7__["MicrobioGraphData"].fromMicrobioReports(microbioReports, _this.sanitizer);
        });
    };
    Axis.prototype.getStepGraphDataForDiagnosticReport = function (diagCodes, dateRange) {
        var _this = this;
        return diagCodes.getResourceSet(dateRange).then(function (diagReports) {
            return _graphdatatypes_diagnosticgraphdata__WEBPACK_IMPORTED_MODULE_5__["DiagnosticGraphData"].fromDiagnosticReports(diagReports, _this.sanitizer);
        });
    };
    /**
     * Issues a FHIR request to get all the meds data for a list of
     * RxNorm codes (medications).
     */
    Axis.prototype.getLineGraphDataForMedicationDetail = function (rxNorms, dateRange) {
        var _this = this;
        return rxNorms.getResourceSet(dateRange)
            .then(function (rxNs) {
            return [].concat.apply([], rxNs.map(function (rx) { return rx.orders.resourceList; }));
        })
            .then(function (orders) {
            return _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__["LineGraphData"].fromMedicationOrderSet(new _fhir_resources_medication_order__WEBPACK_IMPORTED_MODULE_4__["MedicationOrderSet"](orders), dateRange, _this.sanitizer, _this.encounters);
        });
    };
    /**
     * Gets the x regions from the data for this axis.
     */
    Axis.prototype.getXRegions = function () {
        return this.getDataFromFhir(this.dateRange).then(function (data) {
            return data.xRegions ? data.xRegions : [];
        });
    };
    /**
     * Returns whether there's resolved data for this axis.
     */
    Axis.prototype.dataResolved = function () {
        return this.alreadyResolvedData && this.axisDataAvailable ? true : false;
    };
    return Axis;
}());



/***/ }),

/***/ "./src/app/graphs/graphtypes/customizable-graph/customizable-graph-annotation.ts":
/*!***************************************************************************************!*\
  !*** ./src/app/graphs/graphtypes/customizable-graph/customizable-graph-annotation.ts ***!
  \***************************************************************************************/
/*! exports provided: CustomizableGraphAnnotation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomizableGraphAnnotation", function() { return CustomizableGraphAnnotation; });
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

/*
 * This class makes an annotation for a particular timestamp with custom notes.
 */
var CustomizableGraphAnnotation = /** @class */ (function () {
    function CustomizableGraphAnnotation(timestamp, 
    /** The title that will show up in the annotation. */
    title, 
    /** The description that will show up in the annotation. */
    description, 
    /** The color for this annotation and associated point. */
    color) {
        if (title === void 0) { title = ''; }
        if (description === void 0) { description = ''; }
        if (color === void 0) { color = color__WEBPACK_IMPORTED_MODULE_0__["rgb"]('black'); }
        this.title = title;
        this.description = description;
        this.color = color;
        // The width of the annotation.
        this.annotationWidth = 100;
        // The default height of the annotation.
        this.annotationHeight = 25;
        // The default y position of the annotation.
        this.annotationDefaultY = 20;
        this.timestamp = timestamp;
    }
    CustomizableGraphAnnotation.prototype.addAnnotation = function (chartDivId, differenceInHeight) {
        var _this = this;
        var self = this;
        this.showDetails = false;
        var millis = this.timestamp.toMillis();
        var tooltipContainer = document.createElement('div');
        tooltipContainer.setAttribute('class', 'tooltip-custom-' + chartDivId + millis);
        tooltipContainer.style.left = '0px';
        tooltipContainer.style.borderColor = 'grey';
        tooltipContainer.style.backgroundColor = this.color.toString();
        tooltipContainer.style.bottom =
            (this.annotationDefaultY + differenceInHeight) + 'px';
        var tooltipTitleContainer = document.createElement('div');
        tooltipContainer.appendChild(tooltipTitleContainer);
        this.expandIcon =
            this.makeIcon('expand-' + chartDivId + millis, 'expand_more');
        this.expandIcon.style.cursor = 'pointer';
        tooltipTitleContainer.appendChild(this.expandIcon);
        var tooltipTitle = document.createElement('h6');
        tooltipTitle.setAttribute('class', 'tooltip-title-custom-' + chartDivId + millis);
        tooltipTitle.innerText = this.title;
        tooltipTitleContainer.appendChild(tooltipTitle);
        this.deleteIcon = this.makeIcon('delete-' + chartDivId + millis, 'clear');
        this.deleteIcon.style.cursor = 'pointer';
        tooltipTitleContainer.appendChild(this.deleteIcon);
        var tooltipDetails = document.createElement('div');
        tooltipDetails.setAttribute('class', 'tooltip-details-custom-' + chartDivId + millis);
        tooltipContainer.appendChild(tooltipDetails);
        var tooltipDetailsText = document.createElement('div');
        tooltipDetailsText.innerText = this.description;
        tooltipDetailsText.setAttribute('class', 'tooltip-details-text-' + chartDivId + millis);
        tooltipDetails.appendChild(tooltipDetailsText);
        this.editIcon = this.makeIcon('edit-' + chartDivId + millis, 'edit');
        this.editIcon.style.cursor = 'pointer';
        tooltipDetails.appendChild(this.editIcon);
        /**
         * Add action handlers.
         */
        tooltipTitle.onclick = (function (e) {
            // Toggle whether or not the details are shown.
            self.showDetails = !self.showDetails;
            self.showDetailsToggle(millis, self.showDetails, tooltipContainer, chartDivId);
        });
        this.expandIcon.onclick = (function (e) {
            // Toggle whether or not the details are shown.
            self.showDetails = !self.showDetails;
            self.showDetailsToggle(millis, self.showDetails, tooltipContainer, chartDivId);
        });
        tooltipContainer.onmouseover = function (e) {
            _this.expandIcon.style.visibility = 'visible';
            _this.deleteIcon.classList.add('showIcon');
            _this.editIcon.classList.add('showIcon');
        };
        tooltipContainer.onmouseout = function (e) {
            _this.expandIcon.style.visibility = 'hidden';
            _this.deleteIcon.classList.remove('showIcon');
            _this.editIcon.classList.remove('showIcon');
        };
        return tooltipContainer;
    };
    CustomizableGraphAnnotation.prototype.removeAnnotation = function (chartDivId) {
        var annotation = document.getElementsByClassName('tooltip-whole-' + chartDivId + this.timestamp.toMillis())[0];
        var parent = annotation.parentNode;
        if (parent) {
            parent.removeChild(annotation);
        }
    };
    CustomizableGraphAnnotation.prototype.makeIcon = function (id, iconName) {
        var icon = document.createElement('i');
        icon.setAttribute('class', 'material-icons');
        icon.setAttribute('id', id);
        icon.style.fontSize = '18px';
        icon.innerHTML = iconName;
        return icon;
    };
    // Toggles whether or not the full annotation is shown.
    CustomizableGraphAnnotation.prototype.showDetailsToggle = function (millis, toggle, element, chartDivId) {
        var detailsElement = document.getElementsByClassName('tooltip-details-custom-' + chartDivId + millis)[0];
        var expandElement = document.getElementById('expand-' + chartDivId + millis);
        if (toggle) {
            detailsElement.style.display = 'inline-block';
            expandElement.innerHTML = 'expand_less';
        }
        else {
            detailsElement.style.display = 'none';
            expandElement.innerHTML = 'expand_more';
        }
    };
    return CustomizableGraphAnnotation;
}());



/***/ }),

/***/ "./src/app/graphs/graphtypes/customizable-graph/customizable-graph.component.ts":
/*!**************************************************************************************!*\
  !*** ./src/app/graphs/graphtypes/customizable-graph/customizable-graph.component.ts ***!
  \**************************************************************************************/
/*! exports provided: CustomizableGraphComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomizableGraphComponent", function() { return CustomizableGraphComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material/dialog */ "./node_modules/@angular/material/esm5/dialog.es5.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _cardtypes_customizable_timeline_customizable_timeline_dialog_customizable_timeline_dialog_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component */ "./src/app/cardtypes/customizable-timeline/customizable-timeline-dialog/customizable-timeline-dialog.component.ts");
/* harmony import */ var _graph_graph_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};






// tslint:disable-next-line:max-line-length


var CustomizableGraphComponent = /** @class */ (function (_super) {
    __extends(CustomizableGraphComponent, _super);
    function CustomizableGraphComponent(sanitizer, dialog, uiConstants) {
        var _this = _super.call(this, sanitizer, uiConstants) || this;
        _this.sanitizer = sanitizer;
        _this.dialog = dialog;
        _this.uiConstants = uiConstants;
        /**
         * An event indicating that the points on the CustomizableGraph have changed.
         */
        _this.pointsChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        _this.chartTypeString = 'scatter';
        return _this;
    }
    CustomizableGraphComponent_1 = CustomizableGraphComponent;
    CustomizableGraphComponent.prototype.ngOnDestroy = function () {
        if (this.dialogRef && this.dialogRef.unsubscribe) {
            // Destroy the dialog ref to prevent memory leaks.
            this.dialogRef.unsubscribe();
        }
    };
    CustomizableGraphComponent.prototype.ngOnChanges = function (changes) {
        _super.prototype.ngOnChanges.call(this, changes);
        if (changes.dateRange) {
            // CustomizableGraph needs to update annotations in the case that the date
            // range is changed.
            this.dateRangeChanged();
        }
    };
    CustomizableGraphComponent.prototype.adjustGeneratedChartConfiguration = function () {
        var self = this;
        this.chartOptions.scales.yAxes[0].display = false;
        this.chartOptions.scales.yAxes[0].ticks.beginAtZero = true;
        this.chartOptions.tooltips = { enabled: false };
        this.chartOptions.hover = { mode: null };
        this.chartOptions.onClick = function (event) {
            if (!self.inEditMode) {
                return;
            }
            var xValueMoment = this.scales[_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].X_AXIS_ID].getValueForPixel(event.offsetX);
            var dateClicked = luxon__WEBPACK_IMPORTED_MODULE_3__["DateTime"].fromJSDate(xValueMoment.toDate());
            var currentInterval = luxon__WEBPACK_IMPORTED_MODULE_3__["Interval"].fromDateTimes(self.dateRange.start.toLocal().startOf('day'), self.dateRange.end.toLocal().endOf('day'));
            if (currentInterval.contains(dateClicked)) {
                self.openDialog(dateClicked);
            }
        };
        this.chartOptions.onHover = function (event) {
            if (!self.inEditMode) {
                return;
            }
            var chart = this;
            var yScale = chart.scales[_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].Y_AXIS_ID];
            var xScale = chart.scales[_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].X_AXIS_ID];
            var currentDate = luxon__WEBPACK_IMPORTED_MODULE_3__["DateTime"].fromJSDate(xScale.getValueForPixel(event.offsetX).toDate());
            var currentDateString = currentDate.toLocaleString() + ' ' +
                currentDate.toLocal().toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_3__["DateTime"].TIME_24_SIMPLE);
            var currentInterval = luxon__WEBPACK_IMPORTED_MODULE_3__["Interval"].fromDateTimes(self.dateRange.start.toLocal().startOf('day'), self.dateRange.end.toLocal().endOf('day'));
            // Remove all other ctx lines drawn, to only show one hover line.
            chart.clear();
            chart.draw();
            // Only display the hover line if the date it represents is within the
            // current date range. This is because the chart is slightly larger than
            // the area contained within the axes, and a line could potentially be
            // shown before the x-axis starts, or after it ends.
            if (currentInterval.contains(currentDate)) {
                chart.ctx.beginPath();
                chart.ctx.moveTo(event.offsetX, 0);
                chart.ctx.strokeStyle = '#A0A0A0';
                chart.ctx.lineTo(event.offsetX, yScale.bottom);
                chart.ctx.stroke();
                chart.ctx.fillText(currentDateString, event.offsetX, yScale.bottom / 2);
            }
        };
        this.chartOptions.animation = {
            onComplete: function (chart) {
                self.removeAnnotations();
                self.addAnnotations();
            }
        };
    };
    CustomizableGraphComponent.prototype.dateRangeChanged = function () {
        this.reloadChart();
        this.adjustGeneratedChartConfiguration();
    };
    CustomizableGraphComponent.prototype.addAnnotations = function () {
        var _loop_1 = function (dataPt) {
            var canvas = document.getElementById(this_1.chartDivId);
            var millis = luxon__WEBPACK_IMPORTED_MODULE_3__["DateTime"].fromISO(dataPt['x']).toMillis();
            var annotation = this_1.data.annotations.get(millis);
            var color = annotation.color ? annotation.color : '#000000';
            // We need to cast this.chart.chart as any so we can access the 'scales'
            // property.
            var xOffset = this_1.chart.chart
                .scales[_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].X_AXIS_ID]
                .getPixelForValue(annotation.timestamp.toJSDate());
            var yOffset = this_1.chart.chart
                .scales[_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].Y_AXIS_ID]
                .margins['bottom'];
            var yAxisHeight = this_1.chart.chart.scales[_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].Y_AXIS_ID].height;
            var heightToUse = this_1.findBestYCoordinate(xOffset, yAxisHeight, yOffset);
            var difference = heightToUse - yOffset;
            // Only display the flag if the date it represents is within the
            // current date range. This is so that the flag is not added to a location
            // on the DOM that is not within the chart.
            if (this_1.entireInterval.contains(luxon__WEBPACK_IMPORTED_MODULE_3__["DateTime"].fromMillis(millis).toLocal())) {
                var tooltip_1 = this_1.findOrCreateTooltipElement(canvas, 'annotation-' + this_1.chartDivId + millis);
                tooltip_1.setAttribute('class', 'tooltip-whole-' + this_1.chartDivId + millis);
                tooltip_1.style.borderLeftColor = color;
                tooltip_1.style.bottom = yOffset + 'px';
                tooltip_1.style.left = xOffset + 'px';
                tooltip_1.style.height = heightToUse + 'px';
                while (tooltip_1.firstChild) {
                    tooltip_1.removeChild(tooltip_1.firstChild);
                }
                tooltip_1.onclick = function (e) {
                    var parent = tooltip_1.parentNode;
                    try {
                        parent.appendChild(tooltip_1);
                    }
                    catch (e) {
                        console.log(e);
                    }
                };
                tooltip_1.appendChild(annotation.addAnnotation(this_1.chartDivId, difference));
                this_1.addDeleteEvent(annotation);
                this_1.addEditListener(annotation);
            }
        };
        var this_1 = this;
        for (var _i = 0, _a = this.chartData[0].data; _i < _a.length; _i++) {
            var dataPt = _a[_i];
            _loop_1(dataPt);
        }
    };
    CustomizableGraphComponent.prototype.removeAnnotations = function () {
        var selector = 'tooltip-whole-' + this.chartDivId;
        for (var _i = 0, _a = Array.from(document.querySelectorAll('[class*=' + selector + ']')); _i < _a.length; _i++) {
            var annotation = _a[_i];
            var parent_1 = annotation.parentNode;
            if (parent_1) {
                parent_1.removeChild(annotation);
            }
        }
    };
    CustomizableGraphComponent.prototype.findBestYCoordinate = function (xOffset, yAxisHeight, yOffset) {
        var annotationWidth = 100;
        var verticalOverlap = 10;
        var horizontalOverlap = 20;
        var selector = 'tooltip-whole-' + this.chartDivId;
        var allFlags = Array.from(document.querySelectorAll('[class*=' + selector + ']'));
        var positions = allFlags.map(function (flag) {
            var htmlFlag = flag;
            return {
                left: Number(htmlFlag.style.left.replace('px', '')),
                height: Number(htmlFlag.style.height.replace('px', '')),
            };
        });
        var overlappingYs = [];
        // Check if there are any annotations with horizontal overlap.
        for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {
            var position = positions_1[_i];
            var leftPosition = position.left + annotationWidth;
            if (xOffset <= leftPosition &&
                (xOffset + annotationWidth >= position.left)) {
                overlappingYs.push(position.height);
            }
        }
        // Figure out the new y-coordinate for the annotation.
        var heightToUse = yOffset;
        // Sort all heights in increasing order.
        overlappingYs.sort(function (a, b) {
            return a - b;
        });
        // By default, try putting the new box above all other annotations with
        // horizontal overlap.
        if (overlappingYs.length > 0) {
            var currentMaxHeight = overlappingYs[overlappingYs.length - 1];
            // Only add height if the annotation does not go past the y axis height.
            if (currentMaxHeight + verticalOverlap <= yAxisHeight) {
                heightToUse = currentMaxHeight + verticalOverlap;
            }
            else {
                heightToUse = currentMaxHeight;
            }
        }
        // Check if there is any position with space available between existing
        // annotations.
        for (var i = 0; i < overlappingYs.length; i++) {
            // Check if there is enough space.
            if (overlappingYs[i + 1] - (overlappingYs[i] + annotationWidth) >=
                horizontalOverlap) {
                heightToUse = overlappingYs[i];
            }
        }
        return heightToUse;
    };
    // If the selected date already has an annotation, modify the time
    // by + 1 millisecond.
    CustomizableGraphComponent.prototype.updateTime = function (millis) {
        if (this.data.annotations.has(millis)) {
            return this.updateTime(millis + 1);
        }
        return millis;
    };
    /**
     * Allow for the addition of a point to the CustomizableGraph, via a
     * CustomizableTimelineDialog.
     * (Visible only for testing.)
     */
    CustomizableGraphComponent.prototype.addPoint = function (timestamp) {
        if (this.inEditMode) {
            this.dialogRef = this.openDialog(timestamp);
        }
    };
    CustomizableGraphComponent.prototype.openDialog = function (timestamp, editedAnnotation) {
        var _this = this;
        // Make the dialog show up near where the user clicked.
        var data = editedAnnotation ? {
            title: editedAnnotation.title,
            date: new Date(editedAnnotation.timestamp.toMillis()),
            description: editedAnnotation.description,
            color: editedAnnotation.color,
            dateRange: this.dateRange,
        } :
            {
                date: timestamp,
                dateRange: this.dateRange,
            };
        this.dialogRef =
            this.dialog.open(_cardtypes_customizable_timeline_customizable_timeline_dialog_customizable_timeline_dialog_component__WEBPACK_IMPORTED_MODULE_5__["CustomizableTimelineDialogComponent"], { data: data });
        this.dialogRef.afterClosed().subscribe(function (r) {
            if (r) {
                if (editedAnnotation) {
                    _this.data.removePointFromSeries(luxon__WEBPACK_IMPORTED_MODULE_3__["DateTime"].fromMillis(editedAnnotation.timestamp.toMillis()));
                    editedAnnotation.removeAnnotation(_this.chartDivId);
                }
                var result = r;
                // By default, the user selected date is the original date
                // corresponding to where the user chose to add the point.
                var userSelectedDate = result.timestamp;
                userSelectedDate =
                    luxon__WEBPACK_IMPORTED_MODULE_3__["DateTime"].fromMillis(_this.updateTime(userSelectedDate.toMillis()));
                result.timestamp = userSelectedDate;
                _this.data.addPointToSeries(result);
                _this.pointsChanged.emit(_this.data);
                _this.generateChart();
                Object(src_constants__WEBPACK_IMPORTED_MODULE_4__["recordGoogleAnalyticsEvent"])('addEventCustomTimeline', 'customTimeline', new Date().toDateString());
            }
        });
    };
    /**
     * Add a listener for a click event on the delete button of the annotation at
     * the given time.
     * @param annotation The annotation for this point to remove.
     */
    CustomizableGraphComponent.prototype.addDeleteEvent = function (annotation) {
        var _this = this;
        annotation.deleteIcon.onclick = (function (e) {
            _this.data.removePointFromSeries(annotation.timestamp);
            annotation.removeAnnotation(_this.chartDivId);
            _this.pointsChanged.emit(_this.data);
            _this.generateChart();
        });
    };
    /**
     * Add a listener for a click event on the edit button of the annotation at
     * the given time.
     * Visible only for testing.
     * @param annotation The annotation for the point to edit.
     */
    CustomizableGraphComponent.prototype.addEditListener = function (annotation) {
        var _this = this;
        annotation.editIcon.onclick = (function (e) {
            _this.dialogRef = _this.openDialog(annotation.timestamp, annotation);
            Object(src_constants__WEBPACK_IMPORTED_MODULE_4__["recordGoogleAnalyticsEvent"])('editEventCustomTimeline', 'customTimeline', new Date().toDateString());
        });
    };
    var CustomizableGraphComponent_1;
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], CustomizableGraphComponent.prototype, "pointsChanged", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], CustomizableGraphComponent.prototype, "inEditMode", void 0);
    CustomizableGraphComponent = CustomizableGraphComponent_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-customizable-graph',
            template: __webpack_require__(/*! ../graph/graph.component.html */ "./src/app/graphs/graphtypes/graph/graph.component.html"),
            providers: [{
                    provide: _graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"],
                    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function () { return CustomizableGraphComponent_1; })
                }],
            styles: [__webpack_require__(/*! ../../../cardtypes/customizable-timeline/customizable-timeline.component.css */ "./src/app/cardtypes/customizable-timeline/customizable-timeline.component.css")]
        }),
        __param(2, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_4__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["DomSanitizer"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__["MatDialog"], Object])
    ], CustomizableGraphComponent);
    return CustomizableGraphComponent;
}(_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.component.ts":
/*!**********************************************************************************!*\
  !*** ./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.component.ts ***!
  \**********************************************************************************/
/*! exports provided: DiagnosticGraphComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticGraphComponent", function() { return DiagnosticGraphComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material/dialog */ "./node_modules/@angular/material/esm5/dialog.es5.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _diagnostic_graph_diagnostic_graph_dialog_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../diagnostic-graph/diagnostic-graph.dialog.component */ "./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component.ts");
/* harmony import */ var _graph_graph_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var _stepgraph_stepgraph_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../stepgraph/stepgraph.component */ "./src/app/graphs/graphtypes/stepgraph/stepgraph.component.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







var DiagnosticGraphComponent = /** @class */ (function (_super) {
    __extends(DiagnosticGraphComponent, _super);
    function DiagnosticGraphComponent(sanitizer, diagnosticGraphDialog, uiConstants) {
        var _this = _super.call(this, sanitizer, uiConstants) || this;
        _this.uiConstants = uiConstants;
        _this.clickableTooltip = true;
        _this.diagnosticGraphDialog = diagnosticGraphDialog;
        return _this;
    }
    DiagnosticGraphComponent_1 = DiagnosticGraphComponent;
    /**
     * Called to open the diagnosticGraph Dialog.
     * @param htmlAttachment string that reflects the html to be presented on the
     *     dialog
     */
    DiagnosticGraphComponent.prototype.openDiagnosticGraphDialog = function (htmlAttachment) {
        var sanitizedHTMLAttachment = this.sanitizer.sanitize(_angular_core__WEBPACK_IMPORTED_MODULE_0__["SecurityContext"].HTML, htmlAttachment);
        var dialogRef = this.diagnosticGraphDialog.open(_diagnostic_graph_diagnostic_graph_dialog_component__WEBPACK_IMPORTED_MODULE_4__["DiagnosticGraphDialogComponent"], { data: { htmlAttachment: sanitizedHTMLAttachment } });
    };
    /**
     * This is public because we want to be able to test it.
     *
     * Creates the binding between the buttons in the tooltip and the function
     * that we wish to call through onClick. We need to overwrite the super class
     * with specific information relevant to the Diagnostic Graph.
     *
     * We need to bind the onClick here as opposed to when the button was
     * originally created due to scoping and binding issues with the tooltip- the
     * button was not previously created.
     *
     * @param tooltipArray AnnotatedTooltip[] containing the attachment we wish
     *                     to display in the matDialog.
     */
    DiagnosticGraphComponent.prototype.addAdditionalElementTooltip = function (tooltipArray) {
        for (var _i = 0, tooltipArray_1 = tooltipArray; _i < tooltipArray_1.length; _i++) {
            var annotatedTT = tooltipArray_1[_i];
            var uniqueID = annotatedTT.id;
            if (uniqueID === undefined) {
                throw Error('AnnotatedTooltip has undefined id');
            }
            // Extracts the button in the tooltip.
            var button = document.getElementById(uniqueID);
            if (button === null) {
                throw Error("The AnnotatedTooltip does not correspond to " +
                    ("any buttons on the tooltip. ID: " + uniqueID));
            }
            var htmlAttachment = annotatedTT.additionalAttachment;
            button.onclick =
                this.openDiagnosticGraphDialog.bind(this, htmlAttachment[0]);
        }
    };
    /***************************
     * Legend interactions
     * Because of the unique nature of the series in the DiagnosticGraph, we do
     * not allow legend interactions for diagnostic graphs. This prevents errors
     * that occur when the user hovers over a legend element that might correspond
     * to many series on the chart.
     */
    /**
     * @override
     */
    DiagnosticGraphComponent.prototype.resetChart = function () { };
    /**
     * @override
     */
    DiagnosticGraphComponent.prototype.focusOnSeries = function (labeledSeries) { };
    var DiagnosticGraphComponent_1;
    DiagnosticGraphComponent = DiagnosticGraphComponent_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-diagnostic-graph',
            template: __webpack_require__(/*! ../graph/graph.component.html */ "./src/app/graphs/graphtypes/graph/graph.component.html"),
            providers: [{
                    provide: _graph_graph_component__WEBPACK_IMPORTED_MODULE_5__["GraphComponent"],
                    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function () { return DiagnosticGraphComponent_1; })
                }],
            styles: [__webpack_require__(/*! ../graph.css */ "./src/app/graphs/graphtypes/graph.css")]
        }),
        __param(2, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_3__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["DomSanitizer"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__["MatDialog"], Object])
    ], DiagnosticGraphComponent);
    return DiagnosticGraphComponent;
}(_stepgraph_stepgraph_component__WEBPACK_IMPORTED_MODULE_6__["StepGraphComponent"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component.html":
/*!*******************************************************************************************!*\
  !*** ./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component.html ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div style=\"float: right;\" mat-dialog-actions>\n  <!-- mat-dialog-close isn't thoroughly supported by IE-->\n  <button mat-icon-button (click)=\"onExit()\">\n    <mat-icon color=\"primary\">close</mat-icon>\n  </button>\n</div>\n<h1>Diagnostic Report Attachment</h1>\n<div style=\"overflow-y:auto; height: 400px;\">\n  <div *ngIf=\"data\" mat-dialog-content [innerHtml] = \"data.htmlAttachment\"></div>\n</div>"

/***/ }),

/***/ "./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component.ts":
/*!*****************************************************************************************!*\
  !*** ./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component.ts ***!
  \*****************************************************************************************/
/*! exports provided: DiagnosticGraphDialogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticGraphDialogComponent", function() { return DiagnosticGraphDialogComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};


var DiagnosticGraphDialogComponent = /** @class */ (function () {
    /**
     * @param data Information to be displayed on the diagnosticGraph Dialog
     * @param dialogRef Reference to the dialog; used to open and close
     */
    function DiagnosticGraphDialogComponent(data, dialogRef) {
        this.data = data;
        this.dialogRef = dialogRef;
        // data.htmlAttachment has already been sanitized
        if (data) {
            this.htmlAttachment = data.htmlAttachment;
        }
    }
    /**
     * When the close icon is pressed, the dialog closes
    */
    DiagnosticGraphDialogComponent.prototype.onExit = function () {
        this.dialogRef.close();
    };
    DiagnosticGraphDialogComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-diagnostic-graph-dialog',
            template: __webpack_require__(/*! ./diagnostic-graph.dialog.component.html */ "./src/app/graphs/graphtypes/diagnostic-graph/diagnostic-graph.dialog.component.html")
        })
        /**
         * Dialog pop-up to display html attachment from the tooltip.
        */
        ,
        __param(0, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_angular_material__WEBPACK_IMPORTED_MODULE_1__["MAT_DIALOG_DATA"])),
        __metadata("design:paramtypes", [Object, _angular_material__WEBPACK_IMPORTED_MODULE_1__["MatDialogRef"]])
    ], DiagnosticGraphDialogComponent);
    return DiagnosticGraphDialogComponent;
}());



/***/ }),

/***/ "./src/app/graphs/graphtypes/graph.css":
/*!*********************************************!*\
  !*** ./src/app/graphs/graphtypes/graph.css ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "::ng-deep canvas {\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  cursor: pointer;\n}\n::ng-deep .chartjs-tooltip {\n  opacity: 1;\n  position: absolute;\n  /* Disables interactions with the tooltip. Used here to remove\n  odd behavior where the tooltip does not immediately show up\n  despite hovering over the point */\n  pointer-events: none;\n  /* Show the tooltip above everything else. */\n  z-index: 1000;\n}\n::ng-deep .chartjs-tooltip-key {\n  display: inline-block;\n  width: 10px;\n  height: 10px;\n  margin-right: 10px;\n}\n/* All the below styles apply to elements within the graphs. Because these\nare nested inside the components, we have to prefix the\nstyle names with ::ng-deep.  */\n::ng-deep .tooltip {\n  font-size: 13px;\n  border-collapse: collapse;\n  border-spacing: 0;\n  background-color: #fff;\n  empty-cells: show;\n  box-shadow: 7px 7px 12px -9px #777777;\n  opacity: 0.9;\n}\n::ng-deep table {\n  background: #fff;\n  border: solid 1px #ddd;\n}\n::ng-deep .tooltip tr {\n  border: 1px solid #CCC;\n}\n::ng-deep .tooltip > tbody > tr > th {\n  width: 100%;\n  word-wrap: break-word;\n  background-color: #aaa;\n  font-size: 14px;\n  padding: 2px 5px;\n  text-align: left;\n  color: #FFF;\n}\n::ng-deep .tooltip td {\n  width: 125px;\n  font-size: 13px;\n  padding: 3px 6px;\n  background-color: #fff;\n  border-left: 1px dotted #999;\n}\n::ng-deep .order-region {\n  fill: rgb(179, 157, 219); /* Secondary color */\n  stroke:  rgb(179, 157, 219); /* Secondary color */\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ3JhcGhzL2dyYXBodHlwZXMvZ3JhcGguY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usc0JBQXNCO0VBQ3RCLHlCQUF5QjtFQUN6QixxQkFBcUI7RUFDckIsZUFBZTtBQUNqQjtBQUNBO0VBQ0UsVUFBVTtFQUNWLGtCQUFrQjtFQUNsQjs7bUNBRWlDO0VBQ2pDLG9CQUFvQjtFQUNwQiw0Q0FBNEM7RUFDNUMsYUFBYTtBQUNmO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsV0FBVztFQUNYLFlBQVk7RUFDWixrQkFBa0I7QUFDcEI7QUFFQTs7OEJBRThCO0FBRTlCO0VBQ0UsZUFBZTtFQUNmLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsc0JBQXNCO0VBQ3RCLGlCQUFpQjtFQUdqQixxQ0FBcUM7RUFDckMsWUFBWTtBQUNkO0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLFdBQVc7RUFDWCxxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUVBO0VBQ0UsWUFBWTtFQUNaLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsc0JBQXNCO0VBQ3RCLDRCQUE0QjtBQUM5QjtBQUVBO0VBQ0Usd0JBQXdCLEVBQUUsb0JBQW9CO0VBQzlDLDJCQUEyQixFQUFFLG9CQUFvQjtBQUNuRCIsImZpbGUiOiJzcmMvYXBwL2dyYXBocy9ncmFwaHR5cGVzL2dyYXBoLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIjo6bmctZGVlcCBjYW52YXMge1xuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbjo6bmctZGVlcCAuY2hhcnRqcy10b29sdGlwIHtcbiAgb3BhY2l0eTogMTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICAvKiBEaXNhYmxlcyBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgdG9vbHRpcC4gVXNlZCBoZXJlIHRvIHJlbW92ZVxuICBvZGQgYmVoYXZpb3Igd2hlcmUgdGhlIHRvb2x0aXAgZG9lcyBub3QgaW1tZWRpYXRlbHkgc2hvdyB1cFxuICBkZXNwaXRlIGhvdmVyaW5nIG92ZXIgdGhlIHBvaW50ICovXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAvKiBTaG93IHRoZSB0b29sdGlwIGFib3ZlIGV2ZXJ5dGhpbmcgZWxzZS4gKi9cbiAgei1pbmRleDogMTAwMDtcbn1cblxuOjpuZy1kZWVwIC5jaGFydGpzLXRvb2x0aXAta2V5IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB3aWR0aDogMTBweDtcbiAgaGVpZ2h0OiAxMHB4O1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG59XG5cbi8qIEFsbCB0aGUgYmVsb3cgc3R5bGVzIGFwcGx5IHRvIGVsZW1lbnRzIHdpdGhpbiB0aGUgZ3JhcGhzLiBCZWNhdXNlIHRoZXNlXG5hcmUgbmVzdGVkIGluc2lkZSB0aGUgY29tcG9uZW50cywgd2UgaGF2ZSB0byBwcmVmaXggdGhlXG5zdHlsZSBuYW1lcyB3aXRoIDo6bmctZGVlcC4gICovXG5cbjo6bmctZGVlcCAudG9vbHRpcCB7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIGVtcHR5LWNlbGxzOiBzaG93O1xuICAtd2Via2l0LWJveC1zaGFkb3c6IDdweCA3cHggMTJweCAtOXB4ICM3Nzc3Nzc7XG4gIC1tb3otYm94LXNoYWRvdzogN3B4IDdweCAxMnB4IC05cHggIzc3Nzc3NztcbiAgYm94LXNoYWRvdzogN3B4IDdweCAxMnB4IC05cHggIzc3Nzc3NztcbiAgb3BhY2l0eTogMC45O1xufVxuXG46Om5nLWRlZXAgdGFibGUge1xuICBiYWNrZ3JvdW5kOiAjZmZmO1xuICBib3JkZXI6IHNvbGlkIDFweCAjZGRkO1xufVxuXG46Om5nLWRlZXAgLnRvb2x0aXAgdHIge1xuICBib3JkZXI6IDFweCBzb2xpZCAjQ0NDO1xufVxuXG46Om5nLWRlZXAgLnRvb2x0aXAgPiB0Ym9keSA+IHRyID4gdGgge1xuICB3aWR0aDogMTAwJTtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWFhO1xuICBmb250LXNpemU6IDE0cHg7XG4gIHBhZGRpbmc6IDJweCA1cHg7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIGNvbG9yOiAjRkZGO1xufVxuXG46Om5nLWRlZXAgLnRvb2x0aXAgdGQge1xuICB3aWR0aDogMTI1cHg7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgcGFkZGluZzogM3B4IDZweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgYm9yZGVyLWxlZnQ6IDFweCBkb3R0ZWQgIzk5OTtcbn1cblxuOjpuZy1kZWVwIC5vcmRlci1yZWdpb24ge1xuICBmaWxsOiByZ2IoMTc5LCAxNTcsIDIxOSk7IC8qIFNlY29uZGFyeSBjb2xvciAqL1xuICBzdHJva2U6ICByZ2IoMTc5LCAxNTcsIDIxOSk7IC8qIFNlY29uZGFyeSBjb2xvciAqL1xufVxuIl19 */"

/***/ }),

/***/ "./src/app/graphs/graphtypes/graph/graph.component.html":
/*!**************************************************************!*\
  !*** ./src/app/graphs/graphtypes/graph/graph.component.html ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!-- This top level div expands to fill the card. If we remove it, then the inner div\ninfinitely expands as the canvas tries to take up more and more space.-->\n<div>\n  <div style=\"position: relative; max-width: 95%;\">\n    <canvas baseChart [datasets]=\"chartData\" [options]=\"chartOptions\" [plugins]=\"chartPlugins\"\n      [chartType]=\"chartTypeString\" [id]=\"chartDivId\"></canvas>\n  </div>\n</div>\n"

/***/ }),

/***/ "./src/app/graphs/graphtypes/graph/graph.component.ts":
/*!************************************************************!*\
  !*** ./src/app/graphs/graphtypes/graph/graph.component.ts ***!
  \************************************************************/
/*! exports provided: ChartType, GraphComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChartType", function() { return ChartType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GraphComponent", function() { return GraphComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chart.js */ "./node_modules/chart.js/dist/Chart.js");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var chartjs_plugin_annotation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! chartjs-plugin-annotation */ "./node_modules/chartjs-plugin-annotation/src/index.js");
/* harmony import */ var chartjs_plugin_annotation__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(chartjs_plugin_annotation__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var ng2_charts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-charts */ "./node_modules/ng2-charts/fesm5/ng2-charts.js");
/* harmony import */ var src_app_graphs_graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/app/graphs/graphdatatypes/linegraphdata */ "./src/app/graphs/graphdatatypes/linegraphdata.ts");
/* harmony import */ var src_app_utils_number_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/app/utils/number_utils */ "./src/app/utils/number_utils.ts");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../constants */ "./src/constants.ts");
/* harmony import */ var _tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../tooltips/annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
/* harmony import */ var _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../tooltips/tooltip */ "./src/app/graphs/graphtypes/tooltips/tooltip.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












var ChartType;
(function (ChartType) {
    ChartType[ChartType["SCATTER"] = 0] = "SCATTER";
    ChartType[ChartType["LINE"] = 1] = "LINE";
    ChartType[ChartType["STEP"] = 2] = "STEP";
    ChartType[ChartType["MICROBIO"] = 3] = "MICROBIO";
    ChartType[ChartType["DIAGNOSTIC"] = 4] = "DIAGNOSTIC";
})(ChartType || (ChartType = {}));
/**
 * Displays a graph. T is the data type the graph is equipped to display.
 */
var GraphComponent = /** @class */ (function () {
    function GraphComponent(sanitizer, uiConstants) {
        var _this = this;
        this.sanitizer = sanitizer;
        this.uiConstants = uiConstants;
        /** Whether data is available for this graph for the current date range. */
        this.dataPointsInDateRange = false;
        /** Plugins for chart.js. */
        this.chartPlugins = [chartjs_plugin_annotation__WEBPACK_IMPORTED_MODULE_3__];
        // The bindings are unhappy when you provide an empty data array, so we
        // give it a fake series to render.
        /**
         * The chart data sets to render.
         */
        this.chartData = [
            { data: [], label: GraphComponent.DEFAULT_BLANK_DATA_LABEL },
        ];
        /**
         * Chart options to be rendered.
         */
        this.chartOptions = {
            // Draw straight lines between points instead of curves.
            elements: { line: { tension: 0 } },
            layout: { padding: { top: 5 } },
            // We make our own legend so we don't show the built-in one.
            legend: { display: false },
            scales: { xAxes: [this.generateXAxis()], yAxes: [this.generateYAxis()] },
            // Needed to grow the graph to fit the space.
            responsive: true,
            maintainAspectRatio: false,
            // Set up the custom callback for the tooltips.
            tooltips: {
                enabled: false,
                position: 'nearest',
                /**
                 * Sets the tooltip for the graph.
                 * If the class has a tooltipMap set, then we look up the tooltip from
                 * that map. If there's no tooltipMap, then we return a simple formatted
                 * tooltip of just the string representing the data plus the appropriate
                 * units for a linegraph, or just the unedited value if it's a different
                 * kind of graph.
                 */
                custom: function (tooltipContext) {
                    // Get, or construct, a tooltip element to put all the tooltip HTML
                    // into.
                    var canvas = document.getElementById(_this.chartDivId);
                    var tooltipEl = _this.findOrCreateTooltipElement(canvas, 'chartjs-tooltip' + _this.chartDivId);
                    if (_this.clickableTooltip) {
                        // We have this as a separate case rather than allowing all
                        // tooltips to be interactable to ensure that the tooltip
                        // functionality remains normal for the other graphs
                        // Allows the tooltip to be clickable.
                        tooltipEl.style.pointerEvents = 'auto';
                        // When the mouse is no longer on the tooltip, the tooltip is
                        // hidden.
                        tooltipEl.addEventListener('mouseleave', function () {
                            tooltipEl.style.opacity = '0';
                        });
                    }
                    else {
                        // Hide the element if there is no tooltip-- this function gets
                        // called back whether you're hovering over an element or not.
                        if (tooltipContext.opacity === 0) {
                            tooltipEl.style.opacity = '0';
                            return;
                        }
                    }
                    if (tooltipContext.body) {
                        var tooltipArray = _this.getTooltipValue(tooltipContext);
                        var tooltipValue = _tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_10__["AnnotatedTooltip"].combineAnnotatedTooltipArr(tooltipArray);
                        tooltipEl.innerHTML = tooltipValue.tooltipChart;
                        if (tooltipValue.additionalAttachment) {
                            _this.addAdditionalElementTooltip(tooltipArray);
                        }
                    }
                    // Display the tooltip lined up with the data point.
                    var positionY = canvas.offsetTop;
                    var positionX = canvas.offsetLeft;
                    tooltipEl.style.opacity = '1';
                    tooltipEl.style.left = positionX + tooltipContext.caretX + 'px';
                    tooltipEl.style.top = positionY + tooltipContext.caretY + 'px';
                }
            },
            annotation: {
                // Array of annotation configuration objects to be filled in.
                annotations: []
            },
            // Disable any visual changes on hovering.
            hover: { mode: null },
            /** The settings below are just for better performance. */
            animation: { duration: 0 },
            responsiveAnimationDuration: 0
        };
        /**
         * The default chart type for this chart. The Angular directive binds
         * to this string to tell chart.js which chart type to use.
         */
        this.chartTypeString = 'line';
        /**
         * Boolean representing if the tooltip needs to be interactable, allowing
         * for clicks into the tooltip links
         */
        this.clickableTooltip = false;
        // Generate a unique ID for this chart.
        var chartId = Object(uuid__WEBPACK_IMPORTED_MODULE_8__["v4"])();
        // Replace the dashes in the UUID to meet HTML requirements.
        var re = /\-/gi;
        this.chartDivId = 'chart' + chartId.replace(re, '');
    }
    GraphComponent.prototype.ngOnInit = function () {
        this.generateChart();
    };
    GraphComponent.prototype.ngOnChanges = function (changes) {
        if (changes.eventlines) {
            this.updateEventlines(changes.eventlines.currentValue);
        }
        if (changes.dateRange) {
            this.chartOptions.scales.xAxes = [this.generateXAxis()];
            this.entireInterval = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.dateRange.start.toLocal().startOf('day'), this.dateRange.end.toLocal().endOf('day'));
        }
        if (changes.xRegions) {
            this.showXRegions();
        }
    };
    /**
     * When the component gets initialized and upon updates, this series of calls
     * modifies the data-bound variables so that the correct chart gets rendered.
     *
     * 1) prepareForChartConfiguration: an overrideable function in which
     *    subclasses can get things ready for the chart to load in data
     * 2) generateBasicChart: load in the chart data and do formatting that all
     *    subclasses share in common
     * 3) adjustGeneratedChartConfiguration: make any tweaks to the chart
     *    that couldn't be made until the data got loaded in
     */
    GraphComponent.prototype.generateChart = function (focusOnSeries) {
        if (this.data && this.dateRange) {
            this.chartData =
                [{ data: [], label: GraphComponent.DEFAULT_BLANK_DATA_LABEL }];
            this.entireInterval = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.dateRange.start.toLocal().startOf('day'), this.dateRange.end.toLocal().endOf('day'));
            this.dataPointsInDateRange = this.data.dataPointsInRange(this.dateRange);
            this.prepareForChartConfiguration();
            this.generateBasicChart(focusOnSeries);
            this.adjustGeneratedChartConfiguration();
        }
    };
    GraphComponent.prototype.updateEventlines = function (eventlines) {
        var currentInterval = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.dateRange.start.toLocal().startOf('day'), this.dateRange.end.toLocal().endOf('day'));
        this.chartOptions.annotation.annotations =
            this.chartOptions.annotation.annotations.filter(function (a) { return !(a.id && a.id.includes('eventline')); });
        if (this.chart) {
            for (var _i = 0, eventlines_1 = eventlines; _i < eventlines_1.length; _i++) {
                var eventline = eventlines_1[_i];
                var currentDate = luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].fromMillis(Number(eventline.value));
                if (currentInterval.contains(currentDate)) {
                    var line = {
                        type: 'line',
                        mode: 'vertical',
                        id: 'eventline' + eventline.value,
                        scaleID: GraphComponent.X_AXIS_ID,
                        value: currentDate.toJSDate(),
                        borderColor: eventline.color,
                        borderWidth: 2,
                    };
                    this.chartOptions.annotation.annotations.push(line);
                }
            }
            this.reloadChart();
        }
    };
    GraphComponent.prototype.reloadChart = function () {
        if (this.chart !== undefined && this.chart.chart !== undefined) {
            this.chart.chart.destroy();
            this.chart.datasets = this.chartData;
            this.chart.options = this.chartOptions;
            this.chart.ngOnInit();
        }
    };
    /**
     * Lines up any extra things needed to generate the
     * chart. Override this function when you need to make changes before the data
     * is loaded into the chart or when you need to load more data into the chart.
     */
    GraphComponent.prototype.prepareForChartConfiguration = function () { };
    /**
     * Tweaks the generated chart. Override this function when you need to make
     * changes based on the data loaded into the chart.
     */
    GraphComponent.prototype.adjustGeneratedChartConfiguration = function () { };
    /**
     * Sets up a generalized c3.ChartConfig for the data passed in. See
     * the type definition at:
     * https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/c3/index.d.ts
     */
    GraphComponent.prototype.generateBasicChart = function (focusOnSeries) {
        // Transform the data into a format that chart.js can render it.
        chart_js__WEBPACK_IMPORTED_MODULE_2__["Chart"].defaults.global.defaultFontFamily = 'Work Sans';
        var data = [];
        for (var _i = 0, _a = this.data.series; _i < _a.length; _i++) {
            var series = _a[_i];
            var lineWidth = GraphComponent.THIN_LINE;
            var adjustedPointRadius = 3;
            if (focusOnSeries !== undefined && focusOnSeries.includes(series)) {
                lineWidth = GraphComponent.THICK_LINE;
                adjustedPointRadius = 4;
            }
            if (series.coordinates.length > 0) {
                data.push({
                    data: series.coordinates.map(function (pt) {
                        return { x: pt[0].toISO(), y: pt[1] };
                    }),
                    label: series.label,
                    // Do not fill the area under the line.
                    fill: false,
                    borderWidth: lineWidth,
                    pointBorderWidth: 2,
                    pointRadius: adjustedPointRadius,
                    backgroundColor: series.legendInfo.fill,
                    borderColor: series.legendInfo.fill,
                    pointBackgroundColor: series.legendInfo.fill,
                    pointBorderColor: series.legendInfo.outline,
                });
            }
        }
        // The subclasses may have already put series in lineChartData, and
        // we don't want to remove them, so we just append them to the
        // series. On the other hand, if there's a blank series in
        // lineChartData, we want to get rid of it before putting everything
        // else in.
        if (data.length > 0 && this.onlyDefaultDataPresent()) {
            this.chartData = data;
        }
        else {
            this.chartData = this.chartData.concat(data);
        }
        // Set the axis label if it's provided.
        this.chartOptions.scales.yAxes[0].scaleLabel.labelString = this.axisLabel ?
            this.axisLabel.substr(0, 10) +
                (this.axisLabel.length > 10 ? '...' : '') :
            '';
        // Add left-padding so that the y-axes are aligned with one another.
        this.chartOptions.scales.yAxes[0]['afterSetDimensions'] = function (axes) {
            axes.paddingLeft = GraphComponent.Y_AXIS_LEFT_PADDING;
            axes.chart.canvas.parentNode.style.height =
                GraphComponent.MIN_AXIS_HEIGHT + 'px';
        };
        var self = this;
        this.chartOptions.animation.onComplete = function (chart) {
            self.showNoDataLabel(this);
        };
    };
    GraphComponent.prototype.showXRegions = function () {
        if (!this.xRegions) {
            return;
        }
        for (var _i = 0, _a = this.xRegions; _i < _a.length; _i++) {
            var region = _a[_i];
            var annotation = {
                // Show the region underneath the data points.
                drawTime: 'beforeDatasetsDraw',
                type: 'box',
                xMin: region[0].toMillis(),
                xMax: region[1].toMillis(),
                xScaleID: GraphComponent.X_AXIS_ID,
                yScaleID: GraphComponent.Y_AXIS_ID,
                backgroundColor: 'rgba(179, 157, 219, 0.3)',
                borderColor: 'rgba(179, 157, 219, 0.4)',
                borderWidth: 1,
            };
            this.chartOptions.annotation.annotations.push(annotation);
        }
        this.reloadChart();
    };
    GraphComponent.prototype.showNoDataLabel = function (chart) {
        if (!this.dataPointsInDateRange) {
            // Remove all other ctx objects drawn.
            chart.clear();
            chart.draw();
            var xCoordinate = chart.width / 2;
            var yCoordinate = chart.height / 2;
            chart.ctx.textAlign = 'center';
            chart.ctx.fillText(_constants__WEBPACK_IMPORTED_MODULE_9__["UI_CONSTANTS"].NO_DATA_AVAILABLE_TMPL +
                this.entireInterval.start.toLocal().toLocaleString() + ' and ' +
                this.entireInterval.end.toLocal().toLocaleString(), xCoordinate, yCoordinate);
        }
    };
    GraphComponent.prototype.onlyDefaultDataPresent = function () {
        return this.chartData.length === 1 &&
            this.chartData[0].label === GraphComponent.DEFAULT_BLANK_DATA_LABEL;
    };
    /***************************
     * Legend interactions
     */
    GraphComponent.prototype.resetChart = function () {
        this.generateChart();
    };
    GraphComponent.prototype.focusOnSeries = function (labeledSeries) {
        this.generateChart(labeledSeries);
    };
    /******************************
     * Helper functions for tooltipping
     */
    /**
     * Finds or creates a HTML element to render the tooltip onto.
     * @param canvas The Canvas this graph is rendered on
     * @param uniqueId The unique ID to give to this element. If not provided,
     *     will use 'chartjs-tooltip' + the chart div ID.
     */
    GraphComponent.prototype.findOrCreateTooltipElement = function (canvas, uniqueId) {
        var tooltipTag = uniqueId ? uniqueId : 'chartjs-tooltip' + this.chartDivId;
        var tooltipEl = document.getElementById(tooltipTag);
        if (!tooltipEl) {
            tooltipEl = document.createElement('div');
            tooltipEl.id = tooltipTag;
            tooltipEl.classList.add('chartjs-tooltip');
            tooltipEl.innerHTML = '<table></table>';
            canvas.parentNode.appendChild(tooltipEl);
        }
        return tooltipEl;
    };
    /**
     * Adds any additional elements from AnnotatedTooltip that are not
     * in the normal tooltip. Currently logic in the children class, but
     * when we need more overarching logic, we can populate this function.
     *
     * @param tooltipArray AnnotatedTooltip[] containing the attachment we wish
     *                     to display in the matDialog.
     */
    GraphComponent.prototype.addAdditionalElementTooltip = function (tooltipArray) { };
    /**
     * Gets the tooltip for the given context.
     * @param tooltipContext The tooltip context passed into the tooltip
     *     callback
     */
    GraphComponent.prototype.getTooltipValue = function (tooltipContext) {
        // We squish together all points at the same timestamp preemptively
        // in our tooltip creation so that we just find the index of the
        // tooltip based on the first point's x-value.
        var xValue = tooltipContext.dataPoints[0].label;
        var timestampKey = luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].fromISO(xValue).toMillis().toString();
        // Our data class may provide a tooltip key function that will
        // get the correct identifier from the data point. If it does,
        // we'll use that, but by default, the key is the timestamp
        // of the data point.
        var keyToUse = this.data.tooltipKeyFn ?
            this.data.tooltipKeyFn(tooltipContext) :
            timestampKey;
        // If something bad happens and we don't have a tooltip for the
        // key, return a generic tooltip with the value.
        var newTT;
        if (!this.data.tooltipMap || !this.data.tooltipMap.has(keyToUse)) {
            newTT = [new _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_11__["StandardTooltip"]([], undefined, this.data instanceof src_app_graphs_graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_6__["LineGraphData"] ? this.data.unit : '')
                    .getTooltip(undefined, this.sanitizer)];
        }
        else {
            newTT = this.data.tooltipMap.get(keyToUse);
        }
        return newTT;
    };
    /*************************
     * Helper functions for other chart options
     */
    GraphComponent.prototype.generateXAxis = function () {
        return {
            id: GraphComponent.X_AXIS_ID,
            type: 'time',
            gridLines: { display: true, drawOnChartArea: false },
            time: {
                // This sets the bounds of the x-axis. The default values of 0 and 10
                // are nonsensical but necessary since the graph is first rendered
                // before dateRange is bound.
                min: this.dateRange ? this.dateRange.start.toISO() :
                    luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].utc().toISO(),
                max: this.dateRange ? this.dateRange.end.toISO() :
                    luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].utc().toISO(),
                // If we're showing fewer than three days, go for the hour axis labels;
                // otherwise go with by-day axis labels.
                unit: this.dateRange && (this.dateRange.length('day') > 3) ? 'day' :
                    'hour',
                displayFormats: {
                    hour: 'MM/DD H:mm',
                    day: 'MM/DD',
                }
            },
            ticks: {
                // Only show as many tick labels will fit neatly on the axis.
                autoSkip: true,
                display: true,
                fontSize: 12,
                padding: -10,
            },
            scaleLabel: { fontFamily: 'Work Sans' }
        };
    };
    GraphComponent.prototype.generateYAxis = function () {
        var _this = this;
        return {
            id: GraphComponent.Y_AXIS_ID,
            position: 'left',
            // Show tick marks but not grid lines.
            gridLines: { display: true, drawOnChartArea: false },
            scaleLabel: {
                display: true,
                labelString: '',
            },
            ticks: {
                // We explicitly set the y values to show, so we don't want to use
                // autoskip.
                autoSkip: false,
                callback: function (value, index, values) {
                    if (!_this.data || (typeof value) !== 'number') {
                        return value;
                    }
                    return Object(src_app_utils_number_utils__WEBPACK_IMPORTED_MODULE_7__["formatNumberWithPrecision"])(value, _this.data.precision);
                }
            }
        };
    };
    /** Dummy data series label. */
    GraphComponent.DEFAULT_BLANK_DATA_LABEL = 'blankdatalabel';
    /**
     * The amount of padding to add to the left of the graph. This goes hand in
     * hand with how we choose to wrap the labels in the rendered chart, so if
     * Y_AXIS_TICK_MAX changes, this probably needs to change, too.
     * Additionally, significant changes in this value might break the e2e test
     * for customizable timeline since it could cause the click registered to
     * be outside of the graph area.
     */
    GraphComponent.Y_AXIS_LEFT_PADDING = 155;
    /** Line weights for emphasized and non-emphasized line graphs. */
    GraphComponent.THICK_LINE = 3;
    GraphComponent.THIN_LINE = 1;
    /** Constants for x and y axis names. */
    GraphComponent.Y_AXIS_ID = 'y-axis-0';
    GraphComponent.X_AXIS_ID = 'x-axis-0';
    /**
     * The minimum height for a graph.
     *
     * Significant changes in this value might break the e2e test
     * for customizable timeline since it could cause the click registered to
     * be outside of the graph area.
     */
    GraphComponent.MIN_AXIS_HEIGHT = 90;
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GraphComponent.prototype, "eventlines", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"])
    ], GraphComponent.prototype, "dateRange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], GraphComponent.prototype, "axisLabel", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Object)
    ], GraphComponent.prototype, "data", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GraphComponent.prototype, "xRegions", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(ng2_charts__WEBPACK_IMPORTED_MODULE_5__["BaseChartDirective"]),
        __metadata("design:type", ng2_charts__WEBPACK_IMPORTED_MODULE_5__["BaseChartDirective"])
    ], GraphComponent.prototype, "chart", void 0);
    GraphComponent = __decorate([
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(_constants__WEBPACK_IMPORTED_MODULE_9__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"], Object])
    ], GraphComponent);
    return GraphComponent;
}());



/***/ }),

/***/ "./src/app/graphs/graphtypes/legend-info.ts":
/*!**************************************************!*\
  !*** ./src/app/graphs/graphtypes/legend-info.ts ***!
  \**************************************************/
/*! exports provided: LegendInfo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LegendInfo", function() { return LegendInfo; });
/* harmony import */ var _theme_verily_colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../theme/verily_colors */ "./src/app/theme/verily_colors.ts");

/**
 * Represents how a concept will be displayed in a legend, with a label, fill
 * color, and outline color.
 */
var LegendInfo = /** @class */ (function () {
    function LegendInfo(label, fill, outline) {
        this.label = label;
        this.fill = fill;
        this.outline = outline;
        var tempColor = fill;
        if (!fill) {
            tempColor = _theme_verily_colors__WEBPACK_IMPORTED_MODULE_0__["getDataColors"]()[LegendInfo.colorIdx];
            LegendInfo.colorIdx =
                (LegendInfo.colorIdx + 1) % _theme_verily_colors__WEBPACK_IMPORTED_MODULE_0__["getDataColors"]().length;
        }
        this.fill = tempColor;
        this.outline = outline ? outline : tempColor;
    }
    LegendInfo.colorIdx = 0;
    return LegendInfo;
}());



/***/ }),

/***/ "./src/app/graphs/graphtypes/linegraph/linegraph.component.ts":
/*!********************************************************************!*\
  !*** ./src/app/graphs/graphtypes/linegraph/linegraph.component.ts ***!
  \********************************************************************/
/*! exports provided: LineGraphComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineGraphComponent", function() { return LineGraphComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/theme/verily_colors */ "./src/app/theme/verily_colors.ts");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _graphdatatypes_labeled_series__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../graphdatatypes/labeled-series */ "./src/app/graphs/graphdatatypes/labeled-series.ts");
/* harmony import */ var _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../graphdatatypes/linegraphdata */ "./src/app/graphs/graphdatatypes/linegraphdata.ts");
/* harmony import */ var _graph_graph_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var _tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tooltips/annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};








var LineGraphComponent = /** @class */ (function (_super) {
    __extends(LineGraphComponent, _super);
    function LineGraphComponent(sanitizer, uiConstants) {
        var _this = _super.call(this, sanitizer, uiConstants) || this;
        _this.sanitizer = sanitizer;
        _this.uiConstants = uiConstants;
        _this.addedNormalBound = false;
        return _this;
    }
    LineGraphComponent_1 = LineGraphComponent;
    LineGraphComponent.prototype.ngOnChanges = function (changes) {
        _super.prototype.ngOnChanges.call(this, changes);
    };
    LineGraphComponent.prototype.adjustGeneratedChartConfiguration = function () {
        // We have to wait until after the data loads up into the graph to iterate
        // over the points and adjust their coloring based on the normal range.
        this.addedNormalBound = this.isNormalBoundAdded(this.data.series);
        this.addYNormalRange();
        var seriesLength = this.data.series.length;
        if (this.addedNormalBound) {
            // Gives the last labeledSeries in the array a different set of
            // characteristics. The last labeledSeries depicts the normal boundary.
            var chartjsSeries = this.chartData[seriesLength - 1];
            chartjsSeries.pointStyle = 'crossRot';
            chartjsSeries.pointBorderColor = 'rgba(0,0,0,0.5)'; // medium-gray color
            chartjsSeries.pointBorderWidth = 2;
            chartjsSeries.pointRadius = 4;
            chartjsSeries.borderColor = 'transparent';
        }
        // Color points that fall outside of their respective normal ranges.
        // If it hasNormalBound, then the last labeledSeries does not need to
        // be styled in this for loop.
        for (var i = 0; i < (this.addedNormalBound ? seriesLength - 1 : seriesLength); i++) {
            var chartjsSeries = this.chartData[i];
            var labeledSeries = this.data.series[i];
            this.colorAbnormalPoints(chartjsSeries, labeledSeries);
        }
        if (!this.showTicks) {
            this.chartOptions.scales.yAxes[0].display = false;
            this.chartOptions.scales.yAxes[0].ticks.beginAtZero = true;
        }
    };
    /**
     * Adds y normal ranges to the graph and colors points the designated
     * "abnormal" color if they fall outside the normal range.
     */
    LineGraphComponent.prototype.addYNormalRange = function () {
        var _this = this;
        // Only LineGraphData has y normal bounds.
        if (!(this.data instanceof _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_5__["LineGraphData"])) {
            return;
        }
        var normalRangeBounds;
        if (this.data.series.length === 1 || this.addedNormalBound) {
            // Some things are only valid if there are y-axis normal bounds. We
            // also only show normal bounds if there's one data series on the
            // axis, and all normal bounds for the current date range are the same.
            // These customizations are based on this.data, which is a type
            // specific for LineGraphData, and could not be generalized in the
            // abstract GraphCard class.
            var dateTimesInRange = [];
            var firstNormalRange = void 0;
            if (this.data.series[0].normalRanges) {
                dateTimesInRange = Array.from(this.data.series[0].normalRanges.keys())
                    .filter(function (date) { return _this.dateRange.contains(date); });
                firstNormalRange = dateTimesInRange.length > 0 ?
                    this.data.series[0].normalRanges.get(dateTimesInRange[0]) :
                    undefined;
            }
            if (firstNormalRange) {
                var differentNormalRanges = false;
                for (var _i = 0, dateTimesInRange_1 = dateTimesInRange; _i < dateTimesInRange_1.length; _i++) {
                    var time = dateTimesInRange_1[_i];
                    var currNormalRange = this.data.series[0].normalRanges.get(time);
                    if (currNormalRange[0] !== firstNormalRange[0] ||
                        currNormalRange[1] !== firstNormalRange[1]) {
                        differentNormalRanges = true;
                    }
                }
                // If all normal ranges associated with points in the current date
                // range are the same, then add the region to the chart, and adjust
                // display bounds accordingly.
                if (!differentNormalRanges) {
                    // To prevent the creation of multiple normal bound tooltips
                    if (this.addedNormalBound === false) {
                        this.createNormalBoundsTooltip(firstNormalRange);
                    }
                    this.addGreenRegion(firstNormalRange);
                    normalRangeBounds = firstNormalRange;
                    this.addedNormalBound = true;
                }
            }
        }
        this.adjustChartYScales(normalRangeBounds);
    };
    LineGraphComponent.prototype.adjustChartYScales = function (normalRangeBounds) {
        var _this = this;
        var yDisplayBounds = this.getDisplayBounds(normalRangeBounds);
        // If the display bounds are enforced and all the bounds are the
        // same, don't pad.
        var padding = (this.allBoundsAreEnforced() && this.allBoundsAreSame()) ?
            0 :
            Math.abs(yDisplayBounds[1] - yDisplayBounds[0]) *
                LineGraphComponent_1.yAxisPaddingFactor;
        this.chartOptions.scales.yAxes[0].ticks.min = yDisplayBounds[0] - padding;
        this.chartOptions.scales.yAxes[0].ticks.max = yDisplayBounds[1] + padding;
        this.chartOptions.scales.yAxes[0].afterBuildTicks = function (scale) {
            if (_this.data && _this.data.yTicks) {
                scale.ticks =
                    _graphdatatypes_linegraphdata__WEBPACK_IMPORTED_MODULE_5__["LineGraphData"].getYTicks(yDisplayBounds[0], yDisplayBounds[1]);
            }
        };
    };
    /**
     * Helper function that determines whether the LabeledSeries has
     * a normal bound or not.
     * @param series LabeledSeries[] that presents the data that is to
     * be presented in the graph.
     * @returns boolean value that reflects whether there is a normal
     * bound or not.
     */
    LineGraphComponent.prototype.isNormalBoundAdded = function (series) {
        for (var _i = 0, series_1 = series; _i < series_1.length; _i++) {
            var s = series_1[_i];
            if (s.label === LineGraphComponent_1.NORMAL_BOUND_SERIES_NAME) {
                return true;
            }
        }
        return false;
    };
    /**
     * Reconciles together several possible sources of y-axis display bounds. The
     * bounds can come from three places:
     * 1) Each ResourceCode has an expected data bound encoded.
     * 2) Each Observation point may have a normal range encoded (passed in as
     *    normalRangeBounds only if all the observation points have the same
     *    normal range; otherwise normalRangeBounds is undefined).
     * 3) LineGraphData tracks the range of data seen across all data points.
     *
     * Our goal here is to show as much data as possible without being misleading
     * or skewing the graph too much to include outlier points. So, we follow
     * these rules:
     *
     * 1) If all the ResourceCodes have the same expected data bound, and all of
     *    them are marked to enforce that bound, choose those upper and lower
     *    bounds.
     * 2) Else, consider each endpoint of the bound separately.
     *    a. For the lower bound, choose min(min data, min normal bound)
     *    b. For the upper bound, choose max(max data, max normal bound)
     */
    LineGraphComponent.prototype.getDisplayBounds = function (normalRangeBounds) {
        if (this.allBoundsAreSame() && this.allBoundsAreEnforced()) {
            return this.data.resourceGroup.resourceCodes[0].displayBounds;
        }
        if (!normalRangeBounds) {
            return (this.data.yAxisDataBounds);
        }
        return [
            Math.min(this.data.yAxisDataBounds[0], normalRangeBounds[0]),
            Math.max(this.data.yAxisDataBounds[1], normalRangeBounds[1])
        ];
    };
    LineGraphComponent.prototype.allBoundsAreSame = function () {
        if (this.data.resourceGroup) {
            return new Set(this.data.resourceGroup.resourceCodes
                .map(function (code) { return code.displayBounds; })
                .filter(function (bound) { return bound !== undefined; })
                .map(function (bound) {
                return bound.toString();
            } // cast to string for hashability
            ))
                .size === 1;
        }
        return false;
    };
    LineGraphComponent.prototype.allBoundsAreEnforced = function () {
        if (this.data.resourceGroup) {
            return this.data.resourceGroup.resourceCodes
                .map(function (x) { return x.forceDisplayBounds; })
                .every(function (x) { return x === true; });
        }
        return false;
    };
    /**
     * Adds a LabeledSeries that represents the normal bounds on the y-axis
     * to the Tooltip Map.
     * @param yNormalBounds The bounds of the y range considered normal.
     */
    LineGraphComponent.prototype.createNormalBoundsTooltip = function (yNormalBounds) {
        // TypeScript requires a separate declaration for arrays of tuples.
        var coordinatesLblSeries;
        coordinatesLblSeries = [
            [this.dateRange.start, yNormalBounds[0]],
            [this.dateRange.start, yNormalBounds[1]]
        ];
        var lblSeries = new _graphdatatypes_labeled_series__WEBPACK_IMPORTED_MODULE_4__["LabeledSeries"](LineGraphComponent_1.NORMAL_BOUND_SERIES_NAME, coordinatesLblSeries, this.data.unit);
        var coordinatesChartPoint;
        coordinatesChartPoint = [
            { x: this.dateRange.start.toISO(), y: yNormalBounds[0] },
            { x: this.dateRange.start.toISO(), y: yNormalBounds[1] }
        ];
        if (this.data) {
            this.data.series.push(lblSeries);
            // Creates an HTML table for the tooltip text, and adds it to the tooltip
            // map. This was done separately because not all line graphs have normal
            // bounds depicted.
            var tooltipText = '<table class="tooltip"><tbody><tr><th colspan="1">' +
                'Normal Boundary</th></tr>' +
                '<tr><td><div style="white-space:pre-line; text-align:center;">' +
                '<b>Upper: </b>' + yNormalBounds[1] + ' ' + this.data.unit + '\n' +
                '<b>Lower: </b>' + yNormalBounds[0] + ' ' + this.data.unit +
                '</div></td></tr></tbody></table>';
            var newTT = new _tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_7__["AnnotatedTooltip"](tooltipText);
            var mapKey = this.dateRange.start.valueOf().toString();
            if (this.data.tooltipMap.has(mapKey)) {
                this.data.tooltipMap.get(mapKey).push(newTT);
            }
            else {
                this.data.tooltipMap.set(mapKey, [newTT]);
            }
        }
        this.chartData.push({
            data: coordinatesChartPoint,
            label: LineGraphComponent_1.NORMAL_BOUND_SERIES_NAME
        });
    };
    /**
     * Draws a green box spanning the entire x-axis and covering y axis normal
     * range. Also puts descriptive labels at the top and bottom of the range.
     * @param yNormalBounds The bounds of the y range considered normal.
     */
    LineGraphComponent.prototype.addGreenRegion = function (yNormalBounds) {
        var normalRegionAnnotation = {
            // Show the y-bounds underneath the graph points.
            drawTime: 'beforeDatasetsDraw',
            type: 'box',
            yMin: yNormalBounds[0],
            yMax: yNormalBounds[1],
            // No x-axis bounds so it extends to cover the whole graph.
            xScaleID: _graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].X_AXIS_ID,
            yScaleID: _graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"].Y_AXIS_ID,
            // Color the region light green.
            backgroundColor: 'rgba(64, 191, 128, 0.15)',
        };
        this.chartOptions.annotation.annotations.push(normalRegionAnnotation);
    };
    /**
     * Colors the point the default series color if it's not abnormal, or outlines
     * with the abnormal color if marked as abnormal.
     *
     * @param series The data series to color points for.
     * @param yNormalBounds The bounds of what should be considered normal.
     * @param seriesLegend The legend info for the series we're working with.
     */
    LineGraphComponent.prototype.colorAbnormalPoints = function (chartjsSeries, labeledSeries) {
        var pointBackgroundColors = new Array();
        var pointBorderColors = new Array();
        var pointStyle = new Array();
        for (var _i = 0, _a = chartjsSeries.data; _i < _a.length; _i++) {
            var pt = _a[_i];
            // pt could also be a number here, so we constrain it to when it's a
            // ChartPoint. For some reason Typescript doesn't like it when we do a
            // test to see if pt is an instanceof ChartPoint so checking for the
            // y-attribute is a workaround.
            pt = pt;
            var inAbnormalSet = labeledSeries.abnormalCoordinates.has(pt.x);
            if (inAbnormalSet) {
                pointBackgroundColors.push(labeledSeries.legendInfo.fill.rgb().string());
                pointBorderColors.push(src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_2__["ABNORMAL"].rgb().string());
                pointStyle.push('triangle');
            }
            else {
                pointBackgroundColors.push(labeledSeries.legendInfo.fill.rgb().string());
                pointBorderColors.push(labeledSeries.legendInfo.outline.rgb().string());
                pointStyle.push('circle');
            }
            chartjsSeries.pointBackgroundColor = pointBackgroundColors;
            chartjsSeries.pointBorderColor = pointBorderColors;
            chartjsSeries.pointStyle = pointStyle;
        }
    };
    var LineGraphComponent_1;
    /**
     * The amount to pad the y-axis around the displayed data range. This gives
     * the data points a little cushion so that they don't run off the top or
     * bottom of the axis.
     */
    LineGraphComponent.yAxisPaddingFactor = 0.25;
    LineGraphComponent.NORMAL_BOUND_SERIES_NAME = 'normalBound';
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], LineGraphComponent.prototype, "showTicks", void 0);
    LineGraphComponent = LineGraphComponent_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-linegraph',
            template: __webpack_require__(/*! ../graph/graph.component.html */ "./src/app/graphs/graphtypes/graph/graph.component.html"),
            providers: [
                { provide: _graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function () { return LineGraphComponent_1; }) }
            ],
            styles: [__webpack_require__(/*! ../graph.css */ "./src/app/graphs/graphtypes/graph.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_3__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"], Object])
    ], LineGraphComponent);
    return LineGraphComponent;
}(_graph_graph_component__WEBPACK_IMPORTED_MODULE_6__["GraphComponent"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/microbio-graph/microbio-graph.component.ts":
/*!******************************************************************************!*\
  !*** ./src/app/graphs/graphtypes/microbio-graph/microbio-graph.component.ts ***!
  \******************************************************************************/
/*! exports provided: MicrobioGraphComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MicrobioGraphComponent", function() { return MicrobioGraphComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var src_app_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/fhir-resources/observation-interpretation-valueset */ "./src/app/fhir-resources/observation-interpretation-valueset.ts");
/* harmony import */ var src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/app/theme/verily_colors */ "./src/app/theme/verily_colors.ts");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _graph_graph_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var _stepgraph_stepgraph_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../stepgraph/stepgraph.component */ "./src/app/graphs/graphtypes/stepgraph/stepgraph.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







var MicrobioGraphComponent = /** @class */ (function (_super) {
    __extends(MicrobioGraphComponent, _super);
    function MicrobioGraphComponent(sanitizer, uiConstants) {
        var _this = _super.call(this, sanitizer, uiConstants) || this;
        _this.uiConstants = uiConstants;
        return _this;
    }
    MicrobioGraphComponent_1 = MicrobioGraphComponent;
    MicrobioGraphComponent.prototype.adjustGeneratedChartConfiguration = function () {
        // Color points that fall outside of their respective normal ranges.
        for (var i = 0; i < this.data.series.length; i++) {
            var chartjsSeries = this.chartData[i];
            var labeledSeries = this.data.series[i];
            var isPositive = labeledSeries.label.includes(src_app_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_2__["CHECK_RESULT_CODE"]);
            var isPartial = labeledSeries.label.includes(src_app_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_2__["PARTIAL"]);
            var pointStyle = new Array();
            var pointBackgroundColors = new Array();
            var pointBorderColors = new Array();
            for (var _i = 0, _a = chartjsSeries.data; _i < _a.length; _i++) {
                var pt = _a[_i];
                // pt could also be a number here, so we constrain it to when it's a
                // ChartPoint. For some reason Typescript doesn't like it when we do a
                // test to see if pt is an instanceof ChartPoint so checking for the
                // y-attribute is a workaround.
                pt = pt;
                // Making positive points be triangular rather than circular
                if (isPositive) {
                    pointStyle.push('triangle');
                }
                else {
                    pointStyle.push('circle');
                }
                // Making partial points have an outline rather than filled in
                if (isPartial) {
                    pointBackgroundColors.push(src_app_theme_verily_colors__WEBPACK_IMPORTED_MODULE_3__["WHITE"].rgb().string());
                    pointBorderColors.push(labeledSeries.legendInfo.outline.rgb().string());
                }
                else {
                    pointBackgroundColors.push(labeledSeries.legendInfo.fill.rgb().string());
                    pointBorderColors.push(labeledSeries.legendInfo.outline.rgb().string());
                }
                chartjsSeries.pointStyle = pointStyle;
                chartjsSeries.pointBackgroundColor = pointBackgroundColors;
                chartjsSeries.pointBorderColor = pointBorderColors;
            }
        }
    };
    /***************************
     * Legend interactions
     * Because of the unique nature of the series in the MicrobioGraph, we do not
     * allow legend interactions for microbiology graphs. This prevents errors
     * that occur when the user hovers over a legend element that might correspond
     * to many series on the chart.
     */
    /**
     * @override
     */
    MicrobioGraphComponent.prototype.resetChart = function () { };
    /**
     * @override
     */
    MicrobioGraphComponent.prototype.focusOnSeries = function (labeledSeries) { };
    var MicrobioGraphComponent_1;
    MicrobioGraphComponent = MicrobioGraphComponent_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-microbio-graph',
            template: __webpack_require__(/*! ../stepgraph/stepgraph.component.html */ "./src/app/graphs/graphtypes/stepgraph/stepgraph.component.html"),
            providers: [{
                    provide: _graph_graph_component__WEBPACK_IMPORTED_MODULE_5__["GraphComponent"],
                    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function () { return MicrobioGraphComponent_1; })
                }],
            styles: [__webpack_require__(/*! ../graph.css */ "./src/app/graphs/graphtypes/graph.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_4__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"], Object])
    ], MicrobioGraphComponent);
    return MicrobioGraphComponent;
}(_stepgraph_stepgraph_component__WEBPACK_IMPORTED_MODULE_6__["StepGraphComponent"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/scatterplot/scatterplot.component.ts":
/*!************************************************************************!*\
  !*** ./src/app/graphs/graphtypes/scatterplot/scatterplot.component.ts ***!
  \************************************************************************/
/*! exports provided: ScatterplotComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScatterplotComponent", function() { return ScatterplotComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _graph_graph_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
/* harmony import */ var _linegraph_linegraph_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../linegraph/linegraph.component */ "./src/app/graphs/graphtypes/linegraph/linegraph.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};





var ScatterplotComponent = /** @class */ (function (_super) {
    __extends(ScatterplotComponent, _super);
    function ScatterplotComponent(sanitizer, uiConstants) {
        var _this = _super.call(this, sanitizer, uiConstants) || this;
        _this.uiConstants = uiConstants;
        _this.chartTypeString = 'scatter';
        return _this;
    }
    ScatterplotComponent_1 = ScatterplotComponent;
    var ScatterplotComponent_1;
    ScatterplotComponent = ScatterplotComponent_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-scatterplot',
            template: __webpack_require__(/*! ../graph/graph.component.html */ "./src/app/graphs/graphtypes/graph/graph.component.html"),
            providers: [{
                    provide: _graph_graph_component__WEBPACK_IMPORTED_MODULE_3__["GraphComponent"],
                    useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function () { return ScatterplotComponent_1; })
                }],
            styles: [__webpack_require__(/*! ../graph.css */ "./src/app/graphs/graphtypes/graph.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_2__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"], Object])
    ], ScatterplotComponent);
    return ScatterplotComponent;
}(_linegraph_linegraph_component__WEBPACK_IMPORTED_MODULE_4__["LineGraphComponent"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/stepgraph/stepgraph.component.html":
/*!**********************************************************************!*\
  !*** ./src/app/graphs/graphtypes/stepgraph/stepgraph.component.html ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!-- This top level div expands to fill the card. If we remove it, then the inner div\ninfinitely expands as the canvas tries to take up more and more space.-->\n<div>\n  <div [ngStyle]=\"{'position': 'relative', 'max-width': '95%'}\">\n    <canvas baseChart [datasets]=\"chartData\" [options]=\"chartOptions\" [plugins]=\"chartPlugins\"\n      [chartType]=\"chartTypeString\" [id]=\"chartDivId\" width=\"500\"></canvas>\n  </div>\n</div>\n"

/***/ }),

/***/ "./src/app/graphs/graphtypes/stepgraph/stepgraph.component.ts":
/*!********************************************************************!*\
  !*** ./src/app/graphs/graphtypes/stepgraph/stepgraph.component.ts ***!
  \********************************************************************/
/*! exports provided: StepGraphComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StepGraphComponent", function() { return StepGraphComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _graph_graph_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../graph/graph.component */ "./src/app/graphs/graphtypes/graph/graph.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};




var StepGraphComponent = /** @class */ (function (_super) {
    __extends(StepGraphComponent, _super);
    function StepGraphComponent(sanitizer, uiConstants) {
        var _this = _super.call(this, sanitizer, uiConstants) || this;
        _this.sanitizer = sanitizer;
        _this.uiConstants = uiConstants;
        /**
         * The maximum characters for a y-axis tick label.
         */
        _this.Y_AXIS_TICK_MAX_LENGTH = 12;
        return _this;
    }
    StepGraphComponent_1 = StepGraphComponent;
    /**
     * Splits long tick names into multiple lines.
     *
     * To split a label into multiple lines, we turn a string into an array of
     * strings - each gets their own line when rendered.
     *
     * At most will return 2 lines so that the graph labels do not get too
     * crowded.
     *
     * @param ticks Array of current tick markings.
     */
    StepGraphComponent.prototype.adjustTickLabels = function (ticks) {
        var _this = this;
        return ticks.map(function (tick) {
            var words = tick.split(' ');
            // keeps track of the resulting array corresponding to the label.
            var resultLabel = [];
            // keeps track of the current line we are building.
            var temp = '';
            for (var _i = 0, words_1 = words; _i < words_1.length; _i++) {
                var word = words_1[_i];
                // if adding the new word makes the line go over the max line length,
                // we add the temp line to the list of results and restart the temp
                // string with the word.
                if ((temp + word).length > _this.Y_AXIS_TICK_MAX_LENGTH) {
                    if (temp.length > 0) {
                        resultLabel.push(temp);
                    }
                    temp = word;
                }
                else {
                    temp = temp.length > 0 ? temp + ' ' + word : word;
                }
            }
            // at the end, we push the remaining line to the result.
            if (temp.length > 0) {
                resultLabel.push(temp);
            }
            // in the case that the result label will be more than 2 lines, we only
            // return the first 2 lines so that the graph is not too crowded.
            if (resultLabel.length > 2) {
                resultLabel = resultLabel.splice(0, 2);
                resultLabel[1] += '...';
            }
            return resultLabel;
        });
    };
    /**
     * Adjusts the y-axis configuration for the chart.
     */
    StepGraphComponent.prototype.prepareForChartConfiguration = function () {
        var _this = this;
        this.chartOptions.scales.yAxes[0].type = 'category';
        this.chartOptions.scales.yAxes[0].gridLines = {
            display: true,
            drawOnChartArea: true
        };
        // Set up the data points.
        var allLabelsSet = new Set();
        for (var _i = 0, _a = this.data.series; _i < _a.length; _i++) {
            var series = _a[_i];
            series.coordinates.forEach(function (pt) {
                allLabelsSet.add(pt[1]);
            });
        }
        // Show the labels alphabetically along the y-axis.
        var allLabels = Array.from(allLabelsSet).sort();
        // Add blank labels to the top and bottom of the graph to add some
        // padding.
        allLabels.push('\t');
        allLabels.unshift('\t');
        this.chartOptions.scales.yAxes[0]['labels'] = allLabels;
        // the tick labels as is may be very long so we need to adjust them
        // before they turn into labels. We do this as a callback so that the
        // mapping from data points to the axis still works without adjustment.
        this.chartOptions.scales.yAxes[0].beforeTickToLabelConversion = function (scale) {
            scale.ticks = _this.adjustTickLabels(scale.ticks);
            // based on the number of ticks, update the height of the graph
            var height = Math.max(_graph_graph_component__WEBPACK_IMPORTED_MODULE_3__["GraphComponent"].MIN_AXIS_HEIGHT, (scale.ticks.length) * 35);
            scale.chart.canvas.parentNode.style.height = height + 'px';
        };
    };
    StepGraphComponent.prototype.adjustGeneratedChartConfiguration = function () { };
    var StepGraphComponent_1;
    StepGraphComponent = StepGraphComponent_1 = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-stepgraph',
            template: __webpack_require__(/*! ./stepgraph.component.html */ "./src/app/graphs/graphtypes/stepgraph/stepgraph.component.html"),
            providers: [
                { provide: _graph_graph_component__WEBPACK_IMPORTED_MODULE_3__["GraphComponent"], useExisting: Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function () { return StepGraphComponent_1; }) }
            ],
            styles: [__webpack_require__(/*! ../graph.css */ "./src/app/graphs/graphtypes/graph.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_2__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"], Object])
    ], StepGraphComponent);
    return StepGraphComponent;
}(_graph_graph_component__WEBPACK_IMPORTED_MODULE_3__["GraphComponent"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts":
/*!*****************************************************************!*\
  !*** ./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts ***!
  \*****************************************************************/
/*! exports provided: AnnotatedTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AnnotatedTooltip", function() { return AnnotatedTooltip; });
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LIC
/**
 * Class containing information to display on the tooltips
 */
var AnnotatedTooltip = /** @class */ (function () {
    function AnnotatedTooltip(tooltipChart, additionalAttachment, id) {
        this.tooltipChart = tooltipChart;
        if (additionalAttachment) {
            this.additionalAttachment = additionalAttachment;
        }
        if (id) {
            this.id = id;
        }
    }
    /**
     * Combines the AnnotatedTooltip[] into a single AnnotatedTooltip by
     * concatenating the tooltipChart strings into a single string, and
     * combining the multiple additionalAttachment arrays into a single array.
     * This combined AnnotatedTooltip will not have a uniqueID, as the id is
     * only reserved for interfacing with the "Attachment" buttons.
     * @param tooltipArray AnnotatedTooltip[] that needs to be converted into a single
     * AnnotatedTooltip
     */
    AnnotatedTooltip.combineAnnotatedTooltipArr = function (tooltipArray) {
        var _a;
        var attachmentArrays = tooltipArray.map(function (tt) { return tt.additionalAttachment; });
        // Flattens the array of arrays into one array
        var flattenedArray = (_a = []).concat.apply(_a, attachmentArrays);
        var tooltipChart = '';
        for (var _i = 0, tooltipArray_1 = tooltipArray; _i < tooltipArray_1.length; _i++) {
            var annotatedTT = tooltipArray_1[_i];
            tooltipChart += annotatedTT.tooltipChart;
        }
        return new AnnotatedTooltip(tooltipChart, flattenedArray);
    };
    return AnnotatedTooltip;
}());



/***/ }),

/***/ "./src/app/graphs/graphtypes/tooltips/diagnostic-tooltips.ts":
/*!*******************************************************************!*\
  !*** ./src/app/graphs/graphtypes/tooltips/diagnostic-tooltips.ts ***!
  \*******************************************************************/
/*! exports provided: DiagnosticTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiagnosticTooltip", function() { return DiagnosticTooltip; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ "./node_modules/uuid/index.js");
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../constants */ "./src/constants.ts");
/* harmony import */ var _tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tooltips/annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
/* harmony import */ var _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tooltips/tooltip */ "./src/app/graphs/graphtypes/tooltips/tooltip.ts");
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();





/*
 * This class makes a tooltip for a DiagnosticReport that applies to all points
 * charted from the same report. It lists the time of the report and the html
 * text attached with the report.
 */
var DiagnosticTooltip = /** @class */ (function (_super) {
    __extends(DiagnosticTooltip, _super);
    function DiagnosticTooltip(addTimestampRow) {
        if (addTimestampRow === void 0) { addTimestampRow = true; }
        var _this = _super.call(this) || this;
        _this.addTimestampRow = addTimestampRow;
        return _this;
    }
    DiagnosticTooltip.prototype.getTooltip = function (annotatedReport, sanitizer) {
        var timestamp = annotatedReport.timestamp;
        var table = _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_4__["Tooltip"].createNewTable();
        if (this.addTimestampRow) {
            _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_4__["Tooltip"].addTimeHeader(timestamp, table, sanitizer);
        }
        // The AnnotatedTooltip will have the same ID as the button that it
        // corresponds with
        var uniqueID = Object(uuid__WEBPACK_IMPORTED_MODULE_1__["v4"])();
        // Replace the dashes in the UUID to meet HTML requirements.
        var re = /\-/gi;
        var buttonID = 'button' + uniqueID.replace(re, '');
        // Attach button to the tooltip to display attachments
        this.addAttachmentButton(buttonID, _constants__WEBPACK_IMPORTED_MODULE_2__["UI_CONSTANTS"].REPORT_ATTACHMENT, table, sanitizer);
        var tooltipChart = table.outerHTML;
        var additionalAttachment = [annotatedReport.attachmentHtml];
        return new _tooltips_annotated_tooltip__WEBPACK_IMPORTED_MODULE_3__["AnnotatedTooltip"](tooltipChart, additionalAttachment, buttonID);
    };
    /**
     * Adds a button that spans the whole row in the tooltip table.
     * @param buttonID UniqueID that helps identify the button
     * @param buttonLabel String reflecting content inside the button
     * @param table HTMLTableElement on the tooltip that needs to be edited
     * @param sanitizer A DOM sanitizer
     */
    DiagnosticTooltip.prototype.addAttachmentButton = function (buttonID, buttonLabel, table, sanitizer) {
        var row = table.insertRow();
        var cell1 = row.insertCell();
        var button = document.createElement('button');
        // Styles the button
        button.setAttribute('class', 'mat-menu-item');
        // Sets unique button ID (matches the AnnotatedTooltip ID)
        button.setAttribute('id', buttonID);
        button.innerHTML = sanitizer.sanitize(_angular_core__WEBPACK_IMPORTED_MODULE_0__["SecurityContext"].HTML, buttonLabel);
        cell1.appendChild(button);
    };
    return DiagnosticTooltip;
}(_tooltips_tooltip__WEBPACK_IMPORTED_MODULE_4__["Tooltip"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/tooltips/medication-tooltips.ts":
/*!*******************************************************************!*\
  !*** ./src/app/graphs/graphtypes/tooltips/medication-tooltips.ts ***!
  \*******************************************************************/
/*! exports provided: MedicationTooltip, MedicationAdministrationTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationTooltip", function() { return MedicationTooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MedicationAdministrationTooltip", function() { return MedicationAdministrationTooltip; });
/* harmony import */ var src_app_utils_number_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/app/utils/number_utils */ "./src/app/utils/number_utils.ts");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../constants */ "./src/constants.ts");
/* harmony import */ var _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tooltips/tooltip */ "./src/app/graphs/graphtypes/tooltips/tooltip.ts");
/* harmony import */ var _annotated_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/**
 * Makes a tooltip for a medication order that lists the order's first and last
 * doses in a table.
 */
var MedicationTooltip = /** @class */ (function (_super) {
    __extends(MedicationTooltip, _super);
    function MedicationTooltip() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MedicationTooltip.prototype.getTooltip = function (annotatedOrder, sanitizer) {
        var medication = annotatedOrder.label;
        var firstDose = _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].formatTimestamp(annotatedOrder.firstAdministration.timestamp);
        var lastDose = _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].formatTimestamp(annotatedOrder.lastAdministration.timestamp);
        var dosageInstruction = annotatedOrder.order.dosageInstruction;
        var table = _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].createNewTable();
        _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addHeader(medication + ": Order #" + annotatedOrder.order.orderId, table, sanitizer);
        _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addRow(table, [_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].FIRST_DOSE, firstDose], sanitizer);
        _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addRow(table, [_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].LAST_DOSE, lastDose], sanitizer);
        _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addRow(table, [_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].DOSAGE_INSTRUCTIONS, dosageInstruction], sanitizer);
        var tooltipChart = table.outerHTML;
        return new _annotated_tooltip__WEBPACK_IMPORTED_MODULE_3__["AnnotatedTooltip"](tooltipChart);
    };
    return MedicationTooltip;
}(_tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"]));

/**
 * Makes a tooltip for a medication administration that shows its dose
 * as well as the time since the last dose.
 */
var MedicationAdministrationTooltip = /** @class */ (function (_super) {
    __extends(MedicationAdministrationTooltip, _super);
    function MedicationAdministrationTooltip() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MedicationAdministrationTooltip.prototype.getTooltip = function (administrations, sanitizer) {
        var timestamp = administrations[0].medAdministration.timestamp;
        var table = _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].createNewTable();
        for (var _i = 0, administrations_1 = administrations; _i < administrations_1.length; _i++) {
            var administration = administrations_1[_i];
            _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addHeader(_tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].formatTimestamp(timestamp) + ": " + administration.medAdministration.rxNormCode
                .label + " dose. Part of Order #" + administration.medAdministration.medicationOrderId, table, sanitizer, 3);
            _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addRow(table, ['', 'Time', 'Dose'], sanitizer);
            _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addRow(table, [
                _constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].THIS_DOSE,
                _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].formatTimestamp(administration.medAdministration.timestamp),
                this.formatDosage(administration.medAdministration)
            ], sanitizer);
            if (administration.previousDose) {
                var timestampDifference = administration.medAdministration.timestamp.diff(administration.previousDose.medAdministration.timestamp);
                var doseDiffText = _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].formatTimestamp(administration.previousDose.medAdministration.timestamp) +
                    '<br>(' + timestampDifference.toFormat('h:m') +
                    ' before this dose)';
                _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addRow(table, [
                    _constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].PREVIOUS_DOSE, doseDiffText,
                    this.formatDosage(administration.previousDose.medAdministration)
                ], sanitizer);
            }
            else {
                _tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"].addRow(table, [_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].NO_PREVIOUS_DOSE], sanitizer, undefined, false, 3);
            }
        }
        var tooltipChart = table.outerHTML;
        return new _annotated_tooltip__WEBPACK_IMPORTED_MODULE_3__["AnnotatedTooltip"](tooltipChart);
    };
    MedicationAdministrationTooltip.prototype.formatDosage = function (administration) {
        return Object(src_app_utils_number_utils__WEBPACK_IMPORTED_MODULE_0__["formatNumberWithPrecision"])(administration.dosage.quantity) + ' ' +
            administration.dosage.unit;
    };
    return MedicationAdministrationTooltip;
}(_tooltips_tooltip__WEBPACK_IMPORTED_MODULE_2__["Tooltip"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/tooltips/microbio-tooltips.ts":
/*!*****************************************************************!*\
  !*** ./src/app/graphs/graphtypes/tooltips/microbio-tooltips.ts ***!
  \*****************************************************************/
/*! exports provided: MicrobioTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MicrobioTooltip", function() { return MicrobioTooltip; });
/* harmony import */ var src_app_fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/app/fhir-resources/diagnostic-report */ "./src/app/fhir-resources/diagnostic-report.ts");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../constants */ "./src/constants.ts");
/* harmony import */ var _annotated_tooltip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tooltip */ "./src/app/graphs/graphtypes/tooltips/tooltip.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/*
 * This class makes a tooltip for BCH Microbio DiagnosticReport that applies to
 * all points charted from the same report. It lists the time of the report, the
 * report status, as well as all results contained in the report.
 */
var MicrobioTooltip = /** @class */ (function (_super) {
    __extends(MicrobioTooltip, _super);
    function MicrobioTooltip(addTimestampRow, color) {
        if (addTimestampRow === void 0) { addTimestampRow = true; }
        var _this = _super.call(this) || this;
        _this.addTimestampRow = addTimestampRow;
        _this.color = color;
        return _this;
    }
    MicrobioTooltip.prototype.getTooltip = function (annotatedReport, sanitizer, isAbnormal) {
        if (isAbnormal === void 0) { isAbnormal = false; }
        var status = src_app_fhir_resources_diagnostic_report__WEBPACK_IMPORTED_MODULE_0__["DiagnosticReportStatus"][annotatedReport.report.status];
        var results = annotatedReport.report.results;
        var timestamp = annotatedReport.timestamp;
        var specimen = annotatedReport.report.specimen.type;
        var table = _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].createNewTable();
        if (this.addTimestampRow) {
            _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addTimeHeader(timestamp, table, sanitizer);
        }
        _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addHeader(_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].RESULT, table, sanitizer);
        for (var _i = 0, results_1 = results; _i < results_1.length; _i++) {
            var result = results_1[_i];
            _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addRow(table, [result.display, result.interpretation.display], sanitizer, this.color, isAbnormal);
        }
        _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addRow(table, [_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].STATUS, status], sanitizer);
        _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addRow(table, [_constants__WEBPACK_IMPORTED_MODULE_1__["UI_CONSTANTS"].SPECIMEN, specimen], sanitizer);
        var tooltipChart = table.outerHTML;
        return new _annotated_tooltip__WEBPACK_IMPORTED_MODULE_2__["AnnotatedTooltip"](tooltipChart);
    };
    return MicrobioTooltip;
}(_tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/tooltips/observation-tooltips.ts":
/*!********************************************************************!*\
  !*** ./src/app/graphs/graphtypes/tooltips/observation-tooltips.ts ***!
  \********************************************************************/
/*! exports provided: DiscreteObservationTooltip, GenericAnnotatedObservationTooltip, GenericAbnormalTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiscreteObservationTooltip", function() { return DiscreteObservationTooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GenericAnnotatedObservationTooltip", function() { return GenericAnnotatedObservationTooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GenericAbnormalTooltip", function() { return GenericAbnormalTooltip; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var src_app_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/app/fhir-resources/observation-interpretation-valueset */ "./src/app/fhir-resources/observation-interpretation-valueset.ts");
/* harmony import */ var _annotated_tooltip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
/* harmony import */ var _tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tooltip */ "./src/app/graphs/graphtypes/tooltips/tooltip.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/*
 * This class makes a tooltip for a list of Observations containing discrete, or
 * qualitative, values rather than quantitative results. The list of
 * Observations should all have the same timestamp.
 */
var DiscreteObservationTooltip = /** @class */ (function (_super) {
    __extends(DiscreteObservationTooltip, _super);
    function DiscreteObservationTooltip(addTimestampRow) {
        if (addTimestampRow === void 0) { addTimestampRow = true; }
        var _this = _super.call(this) || this;
        _this.addTimestampRow = addTimestampRow;
        return _this;
    }
    /**
     * Returns the HTML for a generic tooltip for discrete observations.
     * @param observations An array of type Observation
     * @param sanitizer A DOM sanitizer
     * @param isAbnormal A boolean used to change the color of the text if
     *     abnormal
     * @returns A string representing the HTML table.
     */
    DiscreteObservationTooltip.prototype.getTooltip = function (observations, sanitizer) {
        var table = _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].createNewTable();
        if (this.addTimestampRow) {
            _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addTimeHeader(observations[0].timestamp, table, sanitizer);
        }
        for (var _i = 0, observations_1 = observations; _i < observations_1.length; _i++) {
            var obs = observations_1[_i];
            var isAbnormal = false;
            var obsValue = obs.result;
            if (obs.interpretation && obs.interpretation.code !== src_app_fhir_resources_observation_interpretation_valueset__WEBPACK_IMPORTED_MODULE_1__["NORMAL"]) {
                isAbnormal = true;
                obsValue = obs.result + ' (' + obs.interpretation.display + ')';
            }
            _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addRow(table, [obs.label, obsValue], sanitizer, undefined, // color
            isAbnormal);
        }
        var tooltipChart = table.outerHTML;
        return new _annotated_tooltip__WEBPACK_IMPORTED_MODULE_2__["AnnotatedTooltip"](tooltipChart);
    };
    return DiscreteObservationTooltip;
}(_tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"]));

/**
 * Makes a generic tooltip for an AnnotatedObservation with rows for each of
 * its annotation values.
 */
var GenericAnnotatedObservationTooltip = /** @class */ (function (_super) {
    __extends(GenericAnnotatedObservationTooltip, _super);
    function GenericAnnotatedObservationTooltip(addTimestampRow, color) {
        var _this = _super.call(this) || this;
        _this.addTimestampRow = addTimestampRow;
        _this.color = color;
        return _this;
    }
    /**
     * Returns the HTML for a generic tooltip.
     * @param observation The AnnotatedObservation used to generate the tooltip
     * @param sanitizer A DOM sanitizer
     * @param isAbnormal A boolean used to change the color of the text if
     *     abnormal
     * @returns If the observation has annotations, a AnnotatedTooltip.
     *    If there are no annotations, will return undefined.
     */
    GenericAnnotatedObservationTooltip.prototype.getTooltip = function (observation, sanitizer, isAbnormal) {
        if (isAbnormal === void 0) { isAbnormal = false; }
        var table = _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].createNewTable();
        if (this.addTimestampRow) {
            _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addTimeHeader(observation.observation.timestamp, table, sanitizer);
        }
        _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addRow(table, [observation.label, this.getObservationValue(observation)], sanitizer, this.color, isAbnormal);
        for (var _i = 0, _a = observation.annotationValues; _i < _a.length; _i++) {
            var annotation = _a[_i];
            _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addRow(table, annotation, sanitizer);
        }
        var tooltipChart = table.outerHTML;
        return new _annotated_tooltip__WEBPACK_IMPORTED_MODULE_2__["AnnotatedTooltip"](tooltipChart);
    };
    /**
     * Helper function that returns a string that reflects the observation
     * value depicted on the tooltip.
     * @param observation The AnnotatedObservation used to generate the tooltip
     */
    GenericAnnotatedObservationTooltip.prototype.getObservationValue = function (observation) {
        var interpretation = observation.observation.interpretation ?
            ' (' + observation.observation.interpretation.display + ')' :
            '';
        // Example: Temperature | 38.8 Deg C (HI)
        if (observation.observation.value && observation.observation.unit) {
            return observation.observation.value.value.toString() + ' ' +
                observation.observation.unit + interpretation;
        }
        // Example: Bacteria Urinalysis | Trace Graded/hpf (ABN)
        if (observation.observation.result) {
            return observation.observation.result + interpretation;
        }
        // Example: Blood Pressure | (HI)
        return interpretation;
    };
    return GenericAnnotatedObservationTooltip;
}(_tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"]));

/**
 * Makes a generic tooltip for an AnnotatedObservation with rows for each of
 * its annotation values.
 */
var GenericAbnormalTooltip = /** @class */ (function (_super) {
    __extends(GenericAbnormalTooltip, _super);
    function GenericAbnormalTooltip(addTimestampRow, color) {
        var _this = _super.call(this) || this;
        _this.addTimestampRow = addTimestampRow;
        _this.color = color;
        return _this;
    }
    /**
     * Returns the HTML for a generic tooltip.
     * @param params The parameters necessary for the AbnormalTooltip text. It
     *     should contain a timestamp field, a value field, a label field, and a
     *     unit field.
     * @param sanitizer A DOM sanitizer
     * @returns If the observation has annotations, an AnnotatedTooltip.
     *  If there are no annotations, will return undefined.
     */
    GenericAbnormalTooltip.prototype.getTooltip = function (params, sanitizer) {
        var table = _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].createNewTable();
        var millis = params['timestamp'];
        var timestamp = luxon__WEBPACK_IMPORTED_MODULE_0__["DateTime"].fromMillis(millis).toLocal();
        if (this.addTimestampRow) {
            _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addTimeHeader(timestamp, table, sanitizer);
        }
        _tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"].addHeader('Caution: abnormal value', table, sanitizer);
        var tooltipChart = table.outerHTML;
        return new _annotated_tooltip__WEBPACK_IMPORTED_MODULE_2__["AnnotatedTooltip"](tooltipChart);
    };
    return GenericAbnormalTooltip;
}(_tooltip__WEBPACK_IMPORTED_MODULE_3__["Tooltip"]));



/***/ }),

/***/ "./src/app/graphs/graphtypes/tooltips/tooltip.ts":
/*!*******************************************************!*\
  !*** ./src/app/graphs/graphtypes/tooltips/tooltip.ts ***!
  \*******************************************************/
/*! exports provided: Tooltip, StandardTooltip */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return Tooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StandardTooltip", function() { return StandardTooltip; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _theme_verily_colors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../theme/verily_colors */ "./src/app/theme/verily_colors.ts");
/* harmony import */ var _annotated_tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./annotated-tooltip */ "./src/app/graphs/graphtypes/tooltips/annotated-tooltip.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




/*
 * This base class contains useful helper methods used while making a custom
 * tooltip for a c3 chart, including adding a row to the table, resetting the
 * table, and adding a header.
 *
 * This is functionally a static class, but Typescript doesn't allow for
 * abstract static functions. We make all tooltip classes inherit from Tooltip
 * so that they must implement the getTooltip function.
 *
 * @param T The type of data that the tooltip is derived from.
 */
var Tooltip = /** @class */ (function () {
    function Tooltip() {
    }
    /**
     * Creates a new table for the tooltip. Returns a HTMLTableElement.
     */
    Tooltip.createNewTable = function () {
        var table = document.createElement('table');
        table.setAttribute('class', 'tooltip');
        return table;
    };
    /**
     * Adds a header on the tooltips depicting the timepoint of the data
     * @param timestamp DateTime reflecting the datapoint depicted on the tooltip
     * @param table HTMLTableElement on the tooltip that needs to be edited
     * @param sanitizer A DOM sanitizer
     * @param colSpan The number of columns that the header spans
     */
    Tooltip.addTimeHeader = function (timestamp, table, sanitizer, colSpan) {
        if (colSpan === void 0) { colSpan = 2; }
        Tooltip.addHeader(Tooltip.formatTimestamp(timestamp), table, sanitizer, colSpan);
    };
    /**
     * Returns a string of the timestamp in format: MM/DD/YYYY HH:MM
     * @param timestamp DateTime reflecting the datapoint depicted on the tooltip
     */
    Tooltip.formatTimestamp = function (timestamp) {
        return timestamp.toLocal().toLocaleString() + ' ' +
            timestamp.toLocal().toLocaleString(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].TIME_24_SIMPLE);
    };
    /**
     * Adds a header to the HTMLTableElement
     * @param content String reflecting content inside the header
     * @param table HTMLTableElement on the tooltip that needs to be edited
     * @param sanitizer A DOM sanitizer
     * @param colSpan The number of columns that the header spans
     */
    Tooltip.addHeader = function (content, table, sanitizer, colSpan) {
        if (colSpan === void 0) { colSpan = 2; }
        // Header row
        var row = table.insertRow();
        var headerCell = document.createElement('th');
        row.appendChild(headerCell);
        headerCell.colSpan = colSpan;
        headerCell.innerHTML = sanitizer.sanitize(_angular_core__WEBPACK_IMPORTED_MODULE_0__["SecurityContext"].HTML, content);
    };
    /**
     * Adds row to the HTMLTableElement
     * @param table HTMLTableElement on the tooltip that needs to be edited
     * @param cellText String array reflecting the content on the tooltip
     * @param sanitizer A DOM sanitizer
     * @param color Color that is displayed on the legend and the graph.
     * @param isAbnormal Boolean that depicts whether the datapoint is abnormal
     * @param colspan Number that specifies how many columns each cell should span
     */
    Tooltip.addRow = function (table, cellText, sanitizer, color, isAbnormal, colspan) {
        var row = table.insertRow();
        for (var i = 0; i < cellText.length; i++) {
            var cell1 = row.insertCell();
            if (colspan) {
                cell1.setAttribute('colspan', colspan.toString());
            }
            if (i === 0) {
                cell1.className = 'name';
                if (isAbnormal) {
                    cell1.setAttribute('style', 'color: ' + _theme_verily_colors__WEBPACK_IMPORTED_MODULE_2__["ABNORMAL"]);
                }
                if (color) {
                    cell1.appendChild(Tooltip.makeColorSwatch(color, isAbnormal));
                    var div = document.createElement('div');
                    div.setAttribute('style', 'display: inline-block;');
                    div.innerHTML = sanitizer.sanitize(_angular_core__WEBPACK_IMPORTED_MODULE_0__["SecurityContext"].HTML, cellText[i]);
                    cell1.appendChild(div);
                    continue;
                }
            }
            else {
                cell1.className = 'value';
                if (isAbnormal) {
                    cell1.setAttribute('style', 'color: ' + _theme_verily_colors__WEBPACK_IMPORTED_MODULE_2__["ABNORMAL"]);
                }
            }
            cell1.innerHTML = sanitizer.sanitize(_angular_core__WEBPACK_IMPORTED_MODULE_0__["SecurityContext"].HTML, cellText[i]);
        }
    };
    /**
     * Helper function that creates the color swatch on the tooltips. If it
     * is regular, it is rectangular. If it is abnormal, it is triangular.
     * @param color Color that is displayed on the legend and the graph.
     * @param isAbnormal Boolean that depicts whether the datapoint is abnormal
     */
    Tooltip.makeColorSwatch = function (color, isAbnormal) {
        if (isAbnormal === void 0) { isAbnormal = false; }
        var colorSpan = document.createElement('span');
        if (isAbnormal) {
            // Creates a triangular color swatch
            colorSpan.setAttribute('style', this.TOOLTIP_ABNORMAL_CSS + color.toString());
        }
        else {
            // Creates a circular color swatch
            colorSpan.setAttribute('style', 'background-color: ' + color.toString() + '; ' +
                this.TOOLTIP_NORMAL_CSS);
        }
        return colorSpan;
    };
    /**CSS styling for normal tooltip circular color swatch */
    Tooltip.TOOLTIP_NORMAL_CSS = 'display: inline-block; height: 10px; width: 10px; ' +
        'margin-right: 6px; border-radius: 50%;';
    /**CSS styling for abnormal tooltip triangular color swatch */
    Tooltip.TOOLTIP_ABNORMAL_CSS = 'width: 0; display:inline-block; margin-right: 6px; ' +
        'height: 0; border-left: 6px solid transparent; ' +
        'border-right: 6px solid transparent; border-bottom: ' +
        '6px solid ';
    return Tooltip;
}());

/**
 * This is a generic tooltip for a data point on the graph. It just takes in
 * the data points C3 provides to the tooltip function, then returns a table
 * with a header of the timestamp and a row for each included point.
 * The left hand side of each row is the series label. The right hand side of
 * each row is the y-value.
 */
var StandardTooltip = /** @class */ (function (_super) {
    __extends(StandardTooltip, _super);
    function StandardTooltip(dataPoints, color, unit) {
        if (unit === void 0) { unit = ''; }
        var _this = _super.call(this) || this;
        _this.dataPoints = dataPoints;
        _this.color = color;
        _this.unit = unit;
        return _this;
    }
    StandardTooltip.prototype.getTooltip = function (unused, sanitizer) {
        var table = Tooltip.createNewTable();
        Tooltip.addTimeHeader(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].fromJSDate(new Date(this.dataPoints[0].x)), table, sanitizer);
        for (var _i = 0, _a = this.dataPoints; _i < _a.length; _i++) {
            var pt = _a[_i];
            Tooltip.addRow(table, [pt.name, pt.value + ' ' + this.unit], sanitizer, this.color(pt));
        }
        var tooltipChart = table.outerHTML;
        return new _annotated_tooltip__WEBPACK_IMPORTED_MODULE_3__["AnnotatedTooltip"](tooltipChart);
    };
    return StandardTooltip;
}(Tooltip));



/***/ }),

/***/ "./src/app/result-error.ts":
/*!*********************************!*\
  !*** ./src/app/result-error.ts ***!
  \*********************************/
/*! exports provided: ResultError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResultError", function() { return ResultError; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
/**
 * Error class for errors with request IDs.
 * Formats the error message with the list of request IDs, the message,
 * and optional json.
 */
var ResultError = /** @class */ (function (_super) {
    __extends(ResultError, _super);
    function ResultError(requestIds, message, json) {
        var _this = this;
        var requestIDMessage = requestIds.size > 0 ?
            "Request IDs: " + Array.from(requestIds).join(', ') + ".\n" :
            '';
        var shortMessage = requestIDMessage + message;
        var completeMessage = shortMessage;
        if (json) {
            completeMessage += "\nJSON: " + JSON.stringify(json, null, 4);
        }
        _this = _super.call(this, completeMessage) || this;
        // 'super' needs to be called before accessing 'this', so we need to set
        // this.shortMessage after calling 'super'.
        _this.shortMessage = shortMessage;
        return _this;
    }
    return ResultError;
}(Error));



/***/ }),

/***/ "./src/app/setup/setup-data.service.ts":
/*!*********************************************!*\
  !*** ./src/app/setup/setup-data.service.ts ***!
  \*********************************************/
/*! exports provided: SetupDataService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetupDataService", function() { return SetupDataService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../conceptmappings/resource-code-creator */ "./src/app/conceptmappings/resource-code-creator.ts");
/* harmony import */ var _conceptmappings_resource_code_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../conceptmappings/resource-code-manager */ "./src/app/conceptmappings/resource-code-manager.ts");
/* harmony import */ var _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../fhir-server/fhir.service */ "./src/app/fhir-server/fhir.service.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * This class is a service that communicates the user-selected concepts on the
 * configuration page (SetupComponent) to CardContainerComponent.
 */
var SetupDataService = /** @class */ (function () {
    function SetupDataService(resourceCodeManager, fhirService, resourceCodeCreator) {
        this.resourceCodeManager = resourceCodeManager;
        this.fhirService = fhirService;
        this.resourceCodeCreator = resourceCodeCreator;
        this.today = luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local().startOf('day');
        /** Which concepts to display. */
        this.selectedConcepts = new Array();
        /** Which encounters to show in the date picker. */
        this.encounters = new Array();
        /**
         * The first date range to load into the app.
         */
        this.selectedDateRange = luxon__WEBPACK_IMPORTED_MODULE_1__["Interval"].fromDateTimes(this.today.minus({ days: 7 }), this.today);
        this.displayGroupMapping = this.resourceCodeManager.getDisplayGroupMapping(this.fhirService, this.resourceCodeCreator);
    }
    SetupDataService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({ providedIn: 'root' }),
        __metadata("design:paramtypes", [_conceptmappings_resource_code_manager__WEBPACK_IMPORTED_MODULE_3__["ResourceCodeManager"],
            _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_4__["FhirService"],
            _conceptmappings_resource_code_creator__WEBPACK_IMPORTED_MODULE_2__["ResourceCodeCreator"]])
    ], SetupDataService);
    return SetupDataService;
}());



/***/ }),

/***/ "./src/app/setup/setup.component.css":
/*!*******************************************!*\
  !*** ./src/app/setup/setup.component.css ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "button {\n  margin-right: 10px;\n}\n\nh3 {\n  padding: 5px;\n  margin: 10px;\n}\n\nh1, h2 {\n  font-family: 'Montserrat', sans-serif;\n}\n\n.search-icon {\n  padding-top: 20px;\n  vertical-align: bottom;\n}\n\n.actions {\n  margin-left: auto;\n  padding: 20px;\n}\n\n.category {\n  padding-left: 10px;\n}\n\n.category-group-tile {\n  padding-bottom: 10px;\n}\n\n.category-label {\n  line-height: 28px;\n  margin: 0px;\n  padding: 0px;\n  padding-left: 15px;\n}\n\n.mainSetup {\n  width: 100%;\n  padding-top: 20px;\n  padding-left: 40px;\n  color: white;\n  height: 100%;\n}\n\n.conceptOptions {\n  padding-left: 25px;\n}\n\n::ng-deep .mat-figure {\n  -ms-flex-align: start !important;\n      align-items: flex-start !important;\n  -ms-flex-pack: left !important;\n      justify-content: left !important;\n  display: -ms-grid !important;\n}\n\n::ng-deep .mat-checkbox-label {\n  line-height: 28px !important;\n}\n\n::ng-deep .mat-toolbar-row, .mat-toolbar-single-row {\n  display: flex;\n  display: -ms-flexbox;\n}\n\n.defaultBackgroundColor {\n  background-color: #202020; /* Grey 900 */\n}\n\n.accentBackgroundColor {\n  /* Deep Purple 800 to Pink 900 */\n background-image: linear-gradient(to right, #4527A0 , #870D4E);\n color: white;\n}\n\n::ng-deep  app-setup .mat-form-field-wrapper {\n  color: white;\n}\n\n::ng-deep app-setup .mat-checkbox-frame {\n  border-color: white;\n}\n\n::ng-deep app-setup .mat-radio-outer-circle {\n  border-color: white;\n}\n\n::ng-deep app-setup .mat-checkbox-disabled .mat-checkbox-label {\n  color: gray;\n}\n\n::ng-deep app-setup .mat-form-field-empty.mat-form-field-label {\n  color: white;\n}\n\n::ng-deep app-setup .mat-form-field-label {\n  color:white !important;\n}\n\n::ng-deep app-setup .mat-form-field-underline {\n  background-color: white !important;\n}\n\n::ng-deep app-setup .mat-form-field.mat-focused .mat-form-field-ripple {\n  background-color: white !important;\n}\n\n::ng-deep app-setup .mat-form-field-underline {\n  background-color: white !important;\n}\n\napp-setup .mat-input-placeholder {\n  color: white;\n}\n\n.encounters-error {\n  width: 50%;\n  margin-bottom: 16px;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2V0dXAvc2V0dXAuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxnQ0FBa0M7TUFBbEMsa0NBQWtDO0VBQ2xDLDhCQUFnQztNQUFoQyxnQ0FBZ0M7RUFDaEMsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLHlCQUF5QixFQUFFLGFBQWE7QUFDMUM7O0FBRUE7RUFDRSxnQ0FBZ0M7Q0FDakMsOERBQThEO0NBQzlELFlBQVk7QUFDYjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFDQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFVBQVU7RUFDVixtQkFBbUI7RUFDbkIscUJBQXFCO0VBQ3JCLHFCQUFxQjtBQUN2QiIsImZpbGUiOiJzcmMvYXBwL3NldHVwL3NldHVwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b24ge1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG59XG5cbmgzIHtcbiAgcGFkZGluZzogNXB4O1xuICBtYXJnaW46IDEwcHg7XG59XG5cbmgxLCBoMiB7XG4gIGZvbnQtZmFtaWx5OiAnTW9udHNlcnJhdCcsIHNhbnMtc2VyaWY7XG59XG5cbi5zZWFyY2gtaWNvbiB7XG4gIHBhZGRpbmctdG9wOiAyMHB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xufVxuXG4uYWN0aW9ucyB7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBwYWRkaW5nOiAyMHB4O1xufVxuXG4uY2F0ZWdvcnkge1xuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG59XG5cbi5jYXRlZ29yeS1ncm91cC10aWxlIHtcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XG59XG5cbi5jYXRlZ29yeS1sYWJlbCB7XG4gIGxpbmUtaGVpZ2h0OiAyOHB4O1xuICBtYXJnaW46IDBweDtcbiAgcGFkZGluZzogMHB4O1xuICBwYWRkaW5nLWxlZnQ6IDE1cHg7XG59XG5cbi5tYWluU2V0dXAge1xuICB3aWR0aDogMTAwJTtcbiAgcGFkZGluZy10b3A6IDIwcHg7XG4gIHBhZGRpbmctbGVmdDogNDBweDtcbiAgY29sb3I6IHdoaXRlO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5jb25jZXB0T3B0aW9ucyB7XG4gIHBhZGRpbmctbGVmdDogMjVweDtcbn1cblxuOjpuZy1kZWVwIC5tYXQtZmlndXJlIHtcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQgIWltcG9ydGFudDtcbiAganVzdGlmeS1jb250ZW50OiBsZWZ0ICFpbXBvcnRhbnQ7XG4gIGRpc3BsYXk6IC1tcy1ncmlkICFpbXBvcnRhbnQ7XG59XG5cbjo6bmctZGVlcCAubWF0LWNoZWNrYm94LWxhYmVsIHtcbiAgbGluZS1oZWlnaHQ6IDI4cHggIWltcG9ydGFudDtcbn1cblxuOjpuZy1kZWVwIC5tYXQtdG9vbGJhci1yb3csIC5tYXQtdG9vbGJhci1zaW5nbGUtcm93IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XG59XG5cbi5kZWZhdWx0QmFja2dyb3VuZENvbG9yIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzIwMjAyMDsgLyogR3JleSA5MDAgKi9cbn1cblxuLmFjY2VudEJhY2tncm91bmRDb2xvciB7XG4gIC8qIERlZXAgUHVycGxlIDgwMCB0byBQaW5rIDkwMCAqL1xuIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzQ1MjdBMCAsICM4NzBENEUpO1xuIGNvbG9yOiB3aGl0ZTtcbn1cblxuOjpuZy1kZWVwICBhcHAtc2V0dXAgLm1hdC1mb3JtLWZpZWxkLXdyYXBwZXIge1xuICBjb2xvcjogd2hpdGU7XG59XG5cbjo6bmctZGVlcCBhcHAtc2V0dXAgLm1hdC1jaGVja2JveC1mcmFtZSB7XG4gIGJvcmRlci1jb2xvcjogd2hpdGU7XG59XG5cbjo6bmctZGVlcCBhcHAtc2V0dXAgLm1hdC1yYWRpby1vdXRlci1jaXJjbGUge1xuICBib3JkZXItY29sb3I6IHdoaXRlO1xufVxuXG46Om5nLWRlZXAgYXBwLXNldHVwIC5tYXQtY2hlY2tib3gtZGlzYWJsZWQgLm1hdC1jaGVja2JveC1sYWJlbCB7XG4gIGNvbG9yOiBncmF5O1xufVxuOjpuZy1kZWVwIGFwcC1zZXR1cCAubWF0LWZvcm0tZmllbGQtZW1wdHkubWF0LWZvcm0tZmllbGQtbGFiZWwge1xuICBjb2xvcjogd2hpdGU7XG59XG5cbjo6bmctZGVlcCBhcHAtc2V0dXAgLm1hdC1mb3JtLWZpZWxkLWxhYmVsIHtcbiAgY29sb3I6d2hpdGUgIWltcG9ydGFudDtcbn1cblxuOjpuZy1kZWVwIGFwcC1zZXR1cCAubWF0LWZvcm0tZmllbGQtdW5kZXJsaW5lIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbn1cblxuOjpuZy1kZWVwIGFwcC1zZXR1cCAubWF0LWZvcm0tZmllbGQubWF0LWZvY3VzZWQgLm1hdC1mb3JtLWZpZWxkLXJpcHBsZSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbjo6bmctZGVlcCBhcHAtc2V0dXAgLm1hdC1mb3JtLWZpZWxkLXVuZGVybGluZSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG59XG5cbmFwcC1zZXR1cCAubWF0LWlucHV0LXBsYWNlaG9sZGVyIHtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4uZW5jb3VudGVycy1lcnJvciB7XG4gIHdpZHRoOiA1MCU7XG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgd29yZC1icmVhazogYnJlYWstYWxsO1xufVxuIl19 */"

/***/ }),

/***/ "./src/app/setup/setup.component.html":
/*!********************************************!*\
  !*** ./src/app/setup/setup.component.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-toolbar class=\"accentBackgroundColor\">\n  <h1 style=\"color: white;\">{{uiConstants.INITIAL_CONFIGURATION_HEADER}}&nbsp;&nbsp;</h1>\n  <img src=\"assets/images/logo.png\" style=\"height:40px\">\n  <div class=\"actions\">\n    <button mat-raised-button (click)=\"onContinue()\" cdkFocusInitial id=\"continue\">\n      {{uiConstants.CONTINUE}}\n    </button>\n  </div>\n</mat-toolbar>\n<div *ngIf=\"useDebugger\">\n  <app-debugger></app-debugger>\n</div>\n<div class=\"defaultBackgroundColor mainSetup\">\n  <div>\n    <h2>{{uiConstants.WHICH_ENCOUNTER_FIRST}}</h2>\n    <mat-expansion-panel *ngIf=\"setupDataService.encountersError\" class=\"encounters-error\">\n      <mat-expansion-panel-header>\n        <mat-icon>error</mat-icon>Error loading patient encounters.\n      </mat-expansion-panel-header>Technical details:<br>{{setupDataService.encountersError.message}}\n    </mat-expansion-panel>\n    <mat-radio-group>\n      <div *ngFor=\"let encounter of encounters\">\n        <mat-radio-button [value]=\"encounter.period\">\n          {{encounter.period.toFormat('MM/dd/yyyy')}} {{uiConstants.ENCOUNTER}}\n        </mat-radio-button>\n      </div>\n      <div *ngFor=\"let item of staticTimeOptions\">\n        <mat-radio-button [value]=\"item[0]\" [checked]=\"item[2]\">\n          {{item[1]}}\n        </mat-radio-button>\n      </div>\n    </mat-radio-group>\n  </div>\n  <div class=\"checkboxActions\">\n    <h2>{{uiConstants.WHICH_CONCEPTS_FIRST}}</h2>\n    <button mat-raised-button (click)=\"selectAll()\" id=\"continue\">\n      {{uiConstants.SELECT_ALL}}\n    </button>\n    <button mat-raised-button (click)=\"clearAll()\" id=\"continue\">\n      {{uiConstants.CLEAR_SELECTION}}\n    </button>\n  </div>\n  <form class=\"conceptForm\">\n    <mat-form-field class=\"conceptFormField\">\n      <input matInput placeholder=\"{{uiConstants.SEARCH_FOR_A_CONCEPT}}\" [formControl]=\"conceptCtrl\">\n      <mat-icon matPrefix class=\"search-icon\">search</mat-icon>\n    </mat-form-field>\n    <div>\n      <!--rowHeight is 28px since that is what the line height is for the content. -->\n      <mat-grid-list cols=\"2\" rowHeight=\"28px\" gutterSize=\"0px\">\n        <!--rowspan is set to the number of concepts in the grouping + 2 (the category header row and a blank row for spacing) -->\n        <mat-grid-tile class=\"category-group-tile\" *ngFor=\"let entry of displayGroupingOptions | async\"\n          [rowspan]=\"(2 +entry[1].length)\">\n          <div>\n            <div [style.color]=\"entry[0].fill.hsl().string()\" class=\"category\">\n              <h3 class=\"category-label\">{{entry[0].label}}</h3>\n            </div>\n            <div *ngFor=\"let element of entry[1].sort(sortResources)\" class=\"conceptOptions\">\n              <mat-checkbox [(ngModel)]=\"checkedConcepts[element.label]\" [ngModelOptions]=\"{standalone: true}\"\n                [disabled]=\"codeGroupAvailable.get(element.label) === statusConsts.DATA_UNAVAILABLE\">\n                {{element.label}} <span class=\"grayout\"\n                  *ngIf=\"codeGroupAvailable.get(element.label) === statusConsts.DATA_UNAVAILABLE\">{{uiConstants.NO_DATA_PAST_SIX_MOS}}</span>\n                <span class=\"grayout\"\n                  *ngIf=\"codeGroupAvailable.get(element.label) === statusConsts.LOADING\">{{uiConstants.CHECKING_DATA_AVAILABILITY}}</span>\n              </mat-checkbox>\n            </div>\n          </div>\n        </mat-grid-tile>\n      </mat-grid-list>\n    </div>\n    <div *ngIf=\"displayGroupingOptions && (displayGroupingOptions | async).length === 0\" class=\"noResults\">\n      {{uiConstants.NO_RESULTS}}\n    </div>\n  </form>\n</div>"

/***/ }),

/***/ "./src/app/setup/setup.component.ts":
/*!******************************************!*\
  !*** ./src/app/setup/setup.component.ts ***!
  \******************************************/
/*! exports provided: SetupComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetupComponent", function() { return SetupComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material/radio */ "./node_modules/@angular/material/esm5/radio.es5.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var _conceptmappings_resource_codes_rx_norm_group__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../conceptmappings/resource-codes/rx-norm-group */ "./src/app/conceptmappings/resource-codes/rx-norm-group.ts");
/* harmony import */ var _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../fhir-server/fhir.service */ "./src/app/fhir-server/fhir.service.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _setup_data_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./setup-data.service */ "./src/app/setup/setup-data.service.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












var LoadStatus;
(function (LoadStatus) {
    LoadStatus[LoadStatus["LOADING"] = 0] = "LOADING";
    LoadStatus[LoadStatus["DATA_AVAILABLE"] = 1] = "DATA_AVAILABLE";
    LoadStatus[LoadStatus["DATA_UNAVAILABLE"] = 2] = "DATA_UNAVAILABLE";
})(LoadStatus || (LoadStatus = {}));
/**
 * Contains the intial configuration options for the MedTimeLine.
 * Users can choose which concepts to display, or pick the default
 * configuration.
 */
var SetupComponent = /** @class */ (function () {
    function SetupComponent(router, setupDataService, fhirService, uiConstants) {
        this.router = router;
        this.setupDataService = setupDataService;
        this.fhirService = fhirService;
        this.uiConstants = uiConstants;
        this.checkedConcepts = new Map();
        this.chosenConcepts = new Array();
        this.useDebugger = _environments_environment__WEBPACK_IMPORTED_MODULE_7__["environment"].useDebugger;
        this.statusConsts = LoadStatus;
        /**
         * This FormControl monitors changes in the user input typed in the
         * autocomplete.
         */
        this.conceptCtrl = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        /**
         * Holds whether there's any data available for each resource code group.
         */
        this.codeGroupAvailable = new Map();
        // Fixed time periods to offer as options for selection.
        this.today = luxon__WEBPACK_IMPORTED_MODULE_4__["DateTime"].local().startOf('day');
        this.lastOneDay = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.today.minus({ days: 1 }), this.today);
        this.lastThreeDays = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.today.minus({ days: 3 }), this.today);
        this.lastSevenDays = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.today.minus({ days: 7 }), this.today);
        this.lastMonth = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.today.minus({ months: 1 }), this.today);
        this.lastThreeMonths = luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.today.minus({ months: 3 }), this.today);
        this.sortResources = (function (a, b) {
            return a.label.localeCompare(b.label);
        });
        /**
         * Promise to load all Medication data that when resolved returns a Set of
         * all RxNormCodes that have data available within the App Timeframe.
         *
         * We load all the medication data on setup to cut down on the number of
         * calls for medication administration data availability and enhance
         * performance.
         */
        this.loadedMedications = this.fhirService.dataAvailableForMedications();
        this.allConcepts =
            setupDataService.displayGroupMapping.then(function (displayGroups) {
                /* Load in the concepts to display, flattening them
                 * all into a single-depth array. */
                return Array.from(displayGroups.values())
                    .reduce(function (acc, val) { return acc.concat(val); }, []);
            });
        this.displayGroupings =
            setupDataService.displayGroupMapping.then(function (displayGroups) {
                return Array.from(displayGroups.entries());
            });
        this.staticTimeOptions = [
            [this.lastThreeMonths, uiConstants.LAST_THREE_MONTHS, false],
            [this.lastMonth, uiConstants.LAST_MONTH, false],
            [this.lastSevenDays, uiConstants.LAST_SEVEN_DAYS, true],
            [this.lastThreeDays, uiConstants.LAST_THREE_DAYS, false],
            [this.lastOneDay, uiConstants.LAST_ONE_DAY, false]
        ];
        this.setupInterface();
    }
    SetupComponent.prototype.ngOnDestroy = function () {
        // Pass the selected information through to the setup data service.
        this.setupDataService.selectedConcepts = this.chosenConcepts;
        this.setupDataService.encounters = this.encounters;
        this.setupDataService.selectedDateRange = this.selectedDateRange.value ?
            this.selectedDateRange.value :
            luxon__WEBPACK_IMPORTED_MODULE_4__["Interval"].fromDateTimes(this.today.minus({ days: 7 }), this.today);
    };
    /**
     * Sets the status for the AxisGroup based on whether data is available.
     * If not available, the AxisGroup will be unchecked.
     *
     * @param axisGroup AxisGroup to set availability status for
     * @param available whether there is any data for the AxisGroup
     */
    SetupComponent.prototype.setAxisGroupStatus = function (axisGroup, available) {
        axisGroup.dataAvailable = available;
        if (!available) {
            this.checkedConcepts[axisGroup.label] = false;
        }
        this.codeGroupAvailable.set(axisGroup.label, available ? LoadStatus.DATA_AVAILABLE : LoadStatus.DATA_UNAVAILABLE);
    };
    /**
     * Sets up availability for AxisGroups that are associated with Medications.
     *
     * Since MedicationAdministration loading takes a long time (due to Cerner
     * limitations), we have preloaded the availability for all RxNormCodes.
     * Instead of making a call to the server for each Medication to check
     * availability, we use the pre-loaded list of available RxNormCodes.
     *
     * @param medAxisGroups AxisGroups with at least one axis that has an
     *     RxNormCodeGroup.
     */
    SetupComponent.prototype.setupMedicationAxisGroups = function (medAxisGroups) {
        var _this = this;
        this.loadedMedications.then(function (rxNormCodesWithData) {
            medAxisGroups.forEach(function (axisGroup) {
                var availablityPromises = axisGroup.axes.map(function (axis) {
                    // some AxisGroups have RxNormCodeGroups and non-RxNormCodeGroups axes
                    // such as Medication administrations and monitoring (LOINC). We check
                    // for availability differently depending on the resource group type.
                    if (axis.resourceGroup instanceof _conceptmappings_resource_codes_rx_norm_group__WEBPACK_IMPORTED_MODULE_8__["RxNormCodeGroup"]) {
                        var axisHasData = axis.resourceGroup.resourceCodes.some(function (code) { return rxNormCodesWithData.has(code); });
                        // since we are not using the axisDataAvailableInAppTimeScope
                        // function, we need to set axisDataAvailable manually
                        axis.axisDataAvailable = axisHasData;
                        return Promise.resolve(axisHasData);
                    }
                    else {
                        return axis.axisDataAvailableInAppTimeScope();
                    }
                });
                Promise.all(availablityPromises).then(function (availablityList) {
                    _this.setAxisGroupStatus(axisGroup, availablityList.some(function (avail) { return !!avail; }));
                });
            });
        });
    };
    SetupComponent.prototype.setupInterface = function () {
        var _this = this;
        // Retrieve the patient encounters. When they load in asynchronously,
        // the radio buttons for encounter selection will show up.
        this.getEncounters();
        var medAxisGroups = [];
        this.displayGroupings.then(function (displayGroupings) {
            displayGroupings.forEach(function (row) {
                // row[1] is an AxisGroup[] corresponding to the display grouping in
                // row[0].
                var axisGroupArray = row[1];
                axisGroupArray.forEach(function (axisGroup) {
                    // Check off concepts that are on by default and set initial status
                    // to loading.
                    _this.checkedConcepts[axisGroup.label] =
                        axisGroup.axes.some(function (axis) { return axis.resourceGroup.showByDefault; });
                    _this.codeGroupAvailable.set(axisGroup.label, LoadStatus.LOADING);
                    // if any of the axes in the axis group are for RxNormCodeGroups,
                    // we handle the axis group differently for performance reasons.
                    if (axisGroup.axes.some(function (axis) { return axis.resourceGroup instanceof _conceptmappings_resource_codes_rx_norm_group__WEBPACK_IMPORTED_MODULE_8__["RxNormCodeGroup"]; })) {
                        medAxisGroups.push(axisGroup);
                    }
                    else {
                        axisGroup.dataAvailableInAppTimeScope().then(function (available) {
                            _this.setAxisGroupStatus(axisGroup, available);
                        });
                    }
                });
            });
            _this.setupMedicationAxisGroups(medAxisGroups);
            // Watch for changes to the user input on the autocomplete panel.
            _this.displayGroupingOptions = _this.conceptCtrl.valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["startWith"])(''), // The autocomplete input starts with nothing typed in.
            Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(function (concept) { return concept ? _this.filter(concept, displayGroupings) :
                displayGroupings.slice(); }));
        });
    };
    SetupComponent.prototype.getEncounters = function () {
        var _this = this;
        this.setupDataService.encountersError = null;
        this.fhirService.getEncountersForPatient(src_constants__WEBPACK_IMPORTED_MODULE_6__["APP_TIMESPAN"])
            .then(function (encounters) {
            if (encounters.length > 0) {
                _this.encounters = encounters.sort(function (a, b) {
                    return a.period.start.toMillis() - b.period.start.toMillis();
                });
            }
        }, function (rejection) {
            if (rejection instanceof _result_error__WEBPACK_IMPORTED_MODULE_10__["ResultError"]) {
                _this.setupDataService.encountersError = rejection;
            }
            else if (rejection instanceof Error) {
                _this.setupDataService.encountersError =
                    new _result_error__WEBPACK_IMPORTED_MODULE_10__["ResultError"](new Set(), rejection.message);
            }
            else {
                _this.setupDataService.encountersError =
                    new _result_error__WEBPACK_IMPORTED_MODULE_10__["ResultError"](new Set(), '', rejection);
            }
        });
    };
    /**
     * The user wishes to continue to the main screen of MedTimeLine, with all
     * charts selected.
     */
    SetupComponent.prototype.onContinue = function () {
        var _this = this;
        this.allConcepts.then(function (allConcepts) {
            for (var _i = 0, allConcepts_1 = allConcepts; _i < allConcepts_1.length; _i++) {
                var concept = allConcepts_1[_i];
                if (_this.checkedConcepts[concept.label]) {
                    _this.chosenConcepts.push(concept);
                }
            }
            _this.router.navigate(['/main'], { skipLocationChange: true });
        });
    };
    /**
     * The user wishes to select all concepts.
     */
    SetupComponent.prototype.selectAll = function () {
        var _this = this;
        this.allConcepts.then(function (allConcepts) {
            for (var _i = 0, allConcepts_2 = allConcepts; _i < allConcepts_2.length; _i++) {
                var concept = allConcepts_2[_i];
                if (_this.codeGroupAvailable.has(concept.label) &&
                    _this.codeGroupAvailable.get(concept.label) !==
                        LoadStatus.DATA_UNAVAILABLE) {
                    _this.checkedConcepts[concept.label] = true;
                }
            }
        });
    };
    /**
     * The user wishes to clear all select concepts.
     */
    SetupComponent.prototype.clearAll = function () {
        var _this = this;
        this.allConcepts.then(function (allConcepts) {
            for (var _i = 0, allConcepts_3 = allConcepts; _i < allConcepts_3.length; _i++) {
                var concept = allConcepts_3[_i];
                _this.checkedConcepts[concept.label] = false;
            }
        });
    };
    /**
     * Filter the concepts shown on the autocomplete menu.
     */
    SetupComponent.prototype.filter = function (concept, displayGroupings) {
        return displayGroupings
            .filter(function (entry) {
            return entry[1].some(function (axis) { return axis.label.toLowerCase().indexOf(concept.toLowerCase()) === 0; });
        })
            .map(function (entry) {
            var displayGrouping = entry[0];
            var resourceCodesFiltered = entry[1].filter(function (codes) { return codes.label.toLowerCase().indexOf(concept.toLowerCase()) === 0; });
            return [displayGrouping, resourceCodesFiltered];
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(_angular_material_radio__WEBPACK_IMPORTED_MODULE_2__["MatRadioGroup"]),
        __metadata("design:type", _angular_material_radio__WEBPACK_IMPORTED_MODULE_2__["MatRadioGroup"])
    ], SetupComponent.prototype, "selectedDateRange", void 0);
    SetupComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-setup',
            template: __webpack_require__(/*! ./setup.component.html */ "./src/app/setup/setup.component.html"),
            styles: [__webpack_require__(/*! ./setup.component.css */ "./src/app/setup/setup.component.css")]
        }),
        __param(3, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_6__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"], _setup_data_service__WEBPACK_IMPORTED_MODULE_11__["SetupDataService"],
            _fhir_server_fhir_service__WEBPACK_IMPORTED_MODULE_9__["FhirService"], Object])
    ], SetupComponent);
    return SetupComponent;
}());



/***/ }),

/***/ "./src/app/theme/verily_colors.ts":
/*!****************************************!*\
  !*** ./src/app/theme/verily_colors.ts ***!
  \****************************************/
/*! exports provided: GREY_900, BLACK, BLUE_A400, BLUE_A700, DEEP_PURPLE_600, DEEP_PURPLE_800, PINK_A700, PINK_900, PINK_A400, PINK_A700_DARKER, BLUE_GREY_100, BLUE_GREY_500, BLUE_GREY_50, WHITE, CYAN, DEEP_CYAN, TURQUOISE, DEEP_TURQUOISE, GREEN, DEEP_GREEN, LIME, DEEP_LIME, GOLD, DEEP_GOLD, ORANGE, DEEP_ORANGE, CORAL, DEEP_CORAL, SELECTED, ABNORMAL, getDataColors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GREY_900", function() { return GREY_900; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLACK", function() { return BLACK; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLUE_A400", function() { return BLUE_A400; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLUE_A700", function() { return BLUE_A700; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_PURPLE_600", function() { return DEEP_PURPLE_600; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_PURPLE_800", function() { return DEEP_PURPLE_800; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PINK_A700", function() { return PINK_A700; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PINK_900", function() { return PINK_900; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PINK_A400", function() { return PINK_A400; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PINK_A700_DARKER", function() { return PINK_A700_DARKER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLUE_GREY_100", function() { return BLUE_GREY_100; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLUE_GREY_500", function() { return BLUE_GREY_500; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLUE_GREY_50", function() { return BLUE_GREY_50; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WHITE", function() { return WHITE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CYAN", function() { return CYAN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_CYAN", function() { return DEEP_CYAN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TURQUOISE", function() { return TURQUOISE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_TURQUOISE", function() { return DEEP_TURQUOISE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GREEN", function() { return GREEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_GREEN", function() { return DEEP_GREEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LIME", function() { return LIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_LIME", function() { return DEEP_LIME; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GOLD", function() { return GOLD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_GOLD", function() { return DEEP_GOLD; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ORANGE", function() { return ORANGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_ORANGE", function() { return DEEP_ORANGE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CORAL", function() { return CORAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DEEP_CORAL", function() { return DEEP_CORAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SELECTED", function() { return SELECTED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ABNORMAL", function() { return ABNORMAL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDataColors", function() { return getDataColors; });
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(color__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

/**
 * Encodings of the colors for Verily branding.
 */
// Primary color palette
var GREY_900 = color__WEBPACK_IMPORTED_MODULE_0__('#202020');
var BLACK = color__WEBPACK_IMPORTED_MODULE_0__('#000000');
var BLUE_A400 = color__WEBPACK_IMPORTED_MODULE_0__('#2878FF');
var BLUE_A700 = color__WEBPACK_IMPORTED_MODULE_0__('#2861FF');
var DEEP_PURPLE_600 = color__WEBPACK_IMPORTED_MODULE_0__('#5E35B1');
var DEEP_PURPLE_800 = color__WEBPACK_IMPORTED_MODULE_0__('#4527A0');
var PINK_A700 = color__WEBPACK_IMPORTED_MODULE_0__('#C41061');
var PINK_900 = color__WEBPACK_IMPORTED_MODULE_0__('#870D4E');
var PINK_A400 = color__WEBPACK_IMPORTED_MODULE_0__('#FF1643');
var PINK_A700_DARKER = color__WEBPACK_IMPORTED_MODULE_0__('#D40000');
var BLUE_GREY_100 = color__WEBPACK_IMPORTED_MODULE_0__('#C3D7DB');
var BLUE_GREY_500 = color__WEBPACK_IMPORTED_MODULE_0__('#5F7C8A');
var BLUE_GREY_50 = color__WEBPACK_IMPORTED_MODULE_0__('#EBEEF0');
var WHITE = color__WEBPACK_IMPORTED_MODULE_0__('#FFFFFF');
// Secondary color palette
var CYAN = color__WEBPACK_IMPORTED_MODULE_0__('#00C6EF');
var DEEP_CYAN = color__WEBPACK_IMPORTED_MODULE_0__('#009DB7');
var TURQUOISE = color__WEBPACK_IMPORTED_MODULE_0__('#07796A');
var DEEP_TURQUOISE = color__WEBPACK_IMPORTED_MODULE_0__('#045B4C');
var GREEN = color__WEBPACK_IMPORTED_MODULE_0__('#0D8D39');
var DEEP_GREEN = color__WEBPACK_IMPORTED_MODULE_0__('#056823');
var LIME = color__WEBPACK_IMPORTED_MODULE_0__('#80BA17');
var DEEP_LIME = color__WEBPACK_IMPORTED_MODULE_0__('#668E0E');
var GOLD = color__WEBPACK_IMPORTED_MODULE_0__('#FFB233');
var DEEP_GOLD = color__WEBPACK_IMPORTED_MODULE_0__('#C38419');
var ORANGE = color__WEBPACK_IMPORTED_MODULE_0__('#FF8117');
var DEEP_ORANGE = color__WEBPACK_IMPORTED_MODULE_0__('#C35308');
var CORAL = color__WEBPACK_IMPORTED_MODULE_0__('#FF5052');
var DEEP_CORAL = color__WEBPACK_IMPORTED_MODULE_0__('#C14047');
// Color to indicate a selected item.
var SELECTED = BLUE_GREY_50;
var ABNORMAL = PINK_A700_DARKER;
/**
 * Returns all the colors that are acceptable for data points to be plotted in.
 */
function getDataColors() {
    return [BLUE_A700, DEEP_PURPLE_800, PINK_900, GREEN, GOLD, ORANGE, TURQUOISE];
}


/***/ }),

/***/ "./src/app/time-navigation/timeline-controller/timeline-controller.component.css":
/*!***************************************************************************************!*\
  !*** ./src/app/time-navigation/timeline-controller/timeline-controller.component.css ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".datePicker {\n  background-color: white;\n  padding-top: 20px;\n}\n\n.mat-form-field {\n  width: 40%;\n  margin-right: 5%;\n  margin-left: 5%;\n}\n\n::ng-deep .mat-h2 {\n  margin-bottom: 0px !important;\n}\n\n/* Remove extra padding below the button. */\n\n::ng-deep .mat-mini-fab .mat-button-wrapper {\n  padding: 0px !important;\n}\n\n::ng-deep .mat-h2 {\n  margin-bottom: 0px !important;\n}\n\n::ng-deep td.available{\n  color: black;\n}\n\n::ng-deep td.notInEncounter {\n  color: grey !important;\n  opacity: .5;\n  text-decoration: line-through;\n}\n\n::ng-deep td.inEncounter {\n  color: #4527A0 !important; /* Deep Purple 800 */\n  background-color: #e5f3ec;\n}\n\n::ng-deep td.active.available.inEncounter {\n  color: white !important;\n}\n\ninput {\n  font-family: 'Work Sans', sans-serif;\n}\n\n/* Change colors of ngx-datepicker to match custom material theme */\n\n::ng-deep .ranges button.active {\n  background-color: #4527A0 !important; /* Deep Purple 800 */\n}\n\n::ng-deep .md-drppicker .btn {\n  background-color: #4527A0 !important; /* Deep Purple 800 */\n}\n\n::ng-deep td.active.available {\n  background-color: #4527A0 !important; /* Deep Purple 800 */\n}\n\n.errorIcon {\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  cursor: default;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGltZS1uYXZpZ2F0aW9uL3RpbWVsaW5lLWNvbnRyb2xsZXIvdGltZWxpbmUtY29udHJvbGxlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQXVCO0VBQ3ZCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLDZCQUE2QjtBQUMvQjs7QUFFQSwyQ0FBMkM7O0FBQzNDO0VBQ0UsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSx5QkFBeUIsRUFBRSxvQkFBb0I7RUFDL0MseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0Usb0NBQW9DO0FBQ3RDOztBQUVBLG1FQUFtRTs7QUFDbkU7RUFDRSxvQ0FBb0MsRUFBRSxvQkFBb0I7QUFDNUQ7O0FBRUE7RUFDRSxvQ0FBb0MsRUFBRSxvQkFBb0I7QUFDNUQ7O0FBRUE7RUFDRSxvQ0FBb0MsRUFBRSxvQkFBb0I7QUFDNUQ7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixlQUFlO0FBQ2pCIiwiZmlsZSI6InNyYy9hcHAvdGltZS1uYXZpZ2F0aW9uL3RpbWVsaW5lLWNvbnRyb2xsZXIvdGltZWxpbmUtY29udHJvbGxlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRhdGVQaWNrZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZy10b3A6IDIwcHg7XG59XG5cbi5tYXQtZm9ybS1maWVsZCB7XG4gIHdpZHRoOiA0MCU7XG4gIG1hcmdpbi1yaWdodDogNSU7XG4gIG1hcmdpbi1sZWZ0OiA1JTtcbn1cblxuOjpuZy1kZWVwIC5tYXQtaDIge1xuICBtYXJnaW4tYm90dG9tOiAwcHggIWltcG9ydGFudDtcbn1cblxuLyogUmVtb3ZlIGV4dHJhIHBhZGRpbmcgYmVsb3cgdGhlIGJ1dHRvbi4gKi9cbjo6bmctZGVlcCAubWF0LW1pbmktZmFiIC5tYXQtYnV0dG9uLXdyYXBwZXIge1xuICBwYWRkaW5nOiAwcHggIWltcG9ydGFudDtcbn1cblxuOjpuZy1kZWVwIC5tYXQtaDIge1xuICBtYXJnaW4tYm90dG9tOiAwcHggIWltcG9ydGFudDtcbn1cblxuOjpuZy1kZWVwIHRkLmF2YWlsYWJsZXtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG46Om5nLWRlZXAgdGQubm90SW5FbmNvdW50ZXIge1xuICBjb2xvcjogZ3JleSAhaW1wb3J0YW50O1xuICBvcGFjaXR5OiAuNTtcbiAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG59XG5cbjo6bmctZGVlcCB0ZC5pbkVuY291bnRlciB7XG4gIGNvbG9yOiAjNDUyN0EwICFpbXBvcnRhbnQ7IC8qIERlZXAgUHVycGxlIDgwMCAqL1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTVmM2VjO1xufVxuXG46Om5nLWRlZXAgdGQuYWN0aXZlLmF2YWlsYWJsZS5pbkVuY291bnRlciB7XG4gIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xufVxuXG5pbnB1dCB7XG4gIGZvbnQtZmFtaWx5OiAnV29yayBTYW5zJywgc2Fucy1zZXJpZjtcbn1cblxuLyogQ2hhbmdlIGNvbG9ycyBvZiBuZ3gtZGF0ZXBpY2tlciB0byBtYXRjaCBjdXN0b20gbWF0ZXJpYWwgdGhlbWUgKi9cbjo6bmctZGVlcCAucmFuZ2VzIGJ1dHRvbi5hY3RpdmUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDUyN0EwICFpbXBvcnRhbnQ7IC8qIERlZXAgUHVycGxlIDgwMCAqL1xufVxuXG46Om5nLWRlZXAgLm1kLWRycHBpY2tlciAuYnRuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzQ1MjdBMCAhaW1wb3J0YW50OyAvKiBEZWVwIFB1cnBsZSA4MDAgKi9cbn1cblxuOjpuZy1kZWVwIHRkLmFjdGl2ZS5hdmFpbGFibGUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDUyN0EwICFpbXBvcnRhbnQ7IC8qIERlZXAgUHVycGxlIDgwMCAqL1xufVxuXG4uZXJyb3JJY29uIHtcbiAgd2lkdGg6IDQwcHg7XG4gIGhlaWdodDogNDBweDtcbiAgbGluZS1oZWlnaHQ6IDQwcHg7XG4gIGN1cnNvcjogZGVmYXVsdDtcbn1cbiJdfQ== */"

/***/ }),

/***/ "./src/app/time-navigation/timeline-controller/timeline-controller.component.html":
/*!****************************************************************************************!*\
  !*** ./src/app/time-navigation/timeline-controller/timeline-controller.component.html ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"datePicker\" fxLayout=\"row\" fxLayoutGap=\"10px\" class=\"mat-h2\">\n  <input type=\"button\" class=\"mat-raised-button\" ngxDaterangepickerMd [(ngModel)]=\"selected\"\n    [minDate]=\"earliestAvailableDate\" [maxDate]=\"latestAvailableDate\" [linkedCalendars]=\"true\"\n    [isCustomDate]=\"addCustomClass\" (datesUpdated)=\"datesUpdated($event)\" [ranges]=\"datePickerRanges\"\n    [alwaysShowCalendars]=\"true\" [keepCalendarOpeningWithRange]=\"true\" matTooltip=\"{{uiConstants.CHANGE_DATE_RANGE}}\" />\n  <mat-icon *ngIf=\"hasEncounterError\" class=\"errorIcon\"\n    matTooltip=\"{{uiConstants.BAD_ENCOUNTER_ERROR}} {{encountersError ? encountersError.shortMessage : ''}}\">\n    warning\n  </mat-icon>\n</div>\n"

/***/ }),

/***/ "./src/app/time-navigation/timeline-controller/timeline-controller.component.ts":
/*!**************************************************************************************!*\
  !*** ./src/app/time-navigation/timeline-controller/timeline-controller.component.ts ***!
  \**************************************************************************************/
/*! exports provided: TimelineControllerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimelineControllerComponent", function() { return TimelineControllerComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var ngx_daterangepicker_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-daterangepicker-material */ "./node_modules/ngx-daterangepicker-material/esm5/ngx-daterangepicker-material.js");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _result_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../result-error */ "./src/app/result-error.ts");
/* harmony import */ var _utils_date_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/date_utils */ "./src/app/utils/date_utils.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







/**
 * Date range picker for selecting the time span to show in all the charts.
 *
 * There is a lot of messy date conversion in this class. The problem is that
 * we use luxon DateTime for our date handling across this application, but the
 * date range picker only works with Moment.js datetimes. The only format both
 * classes have converters for is JSDate, so we pass dates through that
 * several places.
 */
var TimelineControllerComponent = /** @class */ (function () {
    function TimelineControllerComponent(renderer, uiConstants) {
        var _this = this;
        this.renderer = renderer;
        this.uiConstants = uiConstants;
        this.changeDateRange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        /**
         * Holds all the ISO strings for days covered by all the patient encounters
         * above. Used to gray out datepicker options that are not part of
         * a patient's encounter.
         */
        this.daysCoveredByAnEncounter = new Set();
        /** Bounds the dates that may be selected. */
        this.earliestAvailableDate = moment__WEBPACK_IMPORTED_MODULE_2__["utc"](src_constants__WEBPACK_IMPORTED_MODULE_4__["APP_TIMESPAN"].start.toJSDate());
        this.latestAvailableDate = moment__WEBPACK_IMPORTED_MODULE_2__["utc"](src_constants__WEBPACK_IMPORTED_MODULE_4__["APP_TIMESPAN"].end.toJSDate());
        /** Selected timespan is past seven days by default. */
        this.defaultDateRange = {
            startDate: moment__WEBPACK_IMPORTED_MODULE_2__(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local()
                .minus(luxon__WEBPACK_IMPORTED_MODULE_1__["Duration"].fromObject({ days: 7 }))
                .startOf('day')
                .toJSDate()),
            endDate: moment__WEBPACK_IMPORTED_MODULE_2__(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local().startOf('day').toJSDate())
        };
        /** The list of encounters to display as available ranges to select. */
        this.datePickerRanges = {};
        /**
         * Whether there was an encounter input into this component.
         */
        this.hasEncounterError = false;
        /**
         * Used to add a style to dates in the date picker so that the user can
         * differentiate between dates inside and outside of encounters.
         */
        this.addCustomClass = function (m) {
            // The slice gets jus tthe date portion of the ISO string.
            return _this.daysCoveredByAnEncounter.has(m.toISOString().slice(0, 10)) ?
                'inEncounter' :
                'notInEncounter';
        };
    }
    TimelineControllerComponent.prototype.ngOnInit = function () {
        // Set the initial date range selection and fire off a change event.
        var selectedRange = {
            startDate: moment__WEBPACK_IMPORTED_MODULE_2__(this.selectedDateRange.start.startOf('day').toJSDate()),
            endDate: moment__WEBPACK_IMPORTED_MODULE_2__(this.selectedDateRange.end.startOf('day').toJSDate())
        };
        this.selected = selectedRange;
        this.datesUpdated(selectedRange);
        // Set up the encounters in the date picker.
        if (this.encounters && this.encounters.length > 0 &&
            !this.encountersError) {
            this.hasEncounterError = false;
            this.encounters = this.encounters.sort(function (a, b) { return a.period.start.toMillis() - b.period.start.toMillis(); });
            // Set the minimum date to select to be the beginning of the
            // earliest encounter that had days that fell inside the app
            // timespan, in UTC.
            this.earliestAvailableDate = moment__WEBPACK_IMPORTED_MODULE_2__(this.encounters[0].period.start.startOf('day').toUTC().toJSDate());
            // We have to store everything as an ISO string because if we
            // store as objects the set membership check doesn't work.
            this.daysCoveredByAnEncounter = new Set(Object(_utils_date_utils__WEBPACK_IMPORTED_MODULE_6__["getDaysForIntervalSet"])(this.encounters.map(function (x) { return x.period; }))
                .map(function (x) { return x.toISO().slice(0, 10); }));
            // We manually update the ranges stored in the daterangepicker
            // so that the list of encounters is displayed.
            // We store these in local time to prevent errors with
            // displaying a date different than the dates of the encounter.
            // While being communicated with charts, the interval will be
            // converted to UTC.
            for (var _i = 0, _a = this.encounters; _i < _a.length; _i++) {
                var encounter = _a[_i];
                var start = moment__WEBPACK_IMPORTED_MODULE_2__(encounter.period.start.startOf('day').toJSDate());
                var end = moment__WEBPACK_IMPORTED_MODULE_2__(encounter.period.end.endOf('day').toJSDate());
                var label = start.format('MM/DD/YYYY') + '-' + end.format('MM/DD/YYYY');
                this.datePickerRanges[label] = [start, end];
            }
            this.datePickerRanges[this.uiConstants.LAST_ONE_DAY] = [
                moment__WEBPACK_IMPORTED_MODULE_2__(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local()
                    .minus(luxon__WEBPACK_IMPORTED_MODULE_1__["Duration"].fromObject({ days: 1 }))
                    .startOf('day')
                    .toJSDate()),
                this.defaultDateRange.endDate
            ];
            this.datePickerRanges[this.uiConstants.LAST_THREE_DAYS] = [
                moment__WEBPACK_IMPORTED_MODULE_2__(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local()
                    .minus(luxon__WEBPACK_IMPORTED_MODULE_1__["Duration"].fromObject({ days: 3 }))
                    .startOf('day')
                    .toJSDate()),
                this.defaultDateRange.endDate
            ];
            this.datePickerRanges[this.uiConstants.LAST_SEVEN_DAYS] =
                [this.defaultDateRange.startDate, this.defaultDateRange.endDate];
            this.datePickerRanges[this.uiConstants.LAST_MONTH] = [
                moment__WEBPACK_IMPORTED_MODULE_2__(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local()
                    .minus(luxon__WEBPACK_IMPORTED_MODULE_1__["Duration"].fromObject({ months: 1 }))
                    .startOf('day')
                    .toJSDate()),
                this.defaultDateRange.endDate
            ];
            this.datePickerRanges[this.uiConstants.LAST_THREE_MONTHS] = [
                moment__WEBPACK_IMPORTED_MODULE_2__(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].local()
                    .minus(luxon__WEBPACK_IMPORTED_MODULE_1__["Duration"].fromObject({ months: 3 }))
                    .startOf('day')
                    .toJSDate()),
                this.defaultDateRange.endDate
            ];
        }
        else {
            this.hasEncounterError = true;
        }
    };
    /**
     * Emits the date range picked in the date picker as an event.
     * @param range The date range selected in the picker.
     */
    TimelineControllerComponent.prototype.datesUpdated = function (rangeIn) {
        if (!rangeIn.startDate || !rangeIn.endDate || !this.selected) {
            return;
        }
        if (rangeIn.startDate.isBefore(rangeIn.endDate)) {
            this.selected = rangeIn;
            // Convert to UTC time.
            var interval = luxon__WEBPACK_IMPORTED_MODULE_1__["Interval"].fromDateTimes(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].fromJSDate(rangeIn.startDate.toDate())
                .startOf('day')
                .toUTC(), luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].fromJSDate(rangeIn.endDate.toDate()).endOf('day').toUTC());
            this.changeDateRange.emit(interval);
            Object(src_constants__WEBPACK_IMPORTED_MODULE_4__["recordGoogleAnalyticsEvent"])('dateRangeChanged', 'timeline', interval.start.toLocaleString() + ' - ' +
                interval.end.toLocaleString());
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], TimelineControllerComponent.prototype, "changeDateRange", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])(ngx_daterangepicker_material__WEBPACK_IMPORTED_MODULE_3__["DaterangepickerDirective"]),
        __metadata("design:type", ngx_daterangepicker_material__WEBPACK_IMPORTED_MODULE_3__["DaterangepickerDirective"])
    ], TimelineControllerComponent.prototype, "pickerDirective", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], TimelineControllerComponent.prototype, "encounters", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _result_error__WEBPACK_IMPORTED_MODULE_5__["ResultError"])
    ], TimelineControllerComponent.prototype, "encountersError", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", luxon__WEBPACK_IMPORTED_MODULE_1__["Interval"])
    ], TimelineControllerComponent.prototype, "selectedDateRange", void 0);
    TimelineControllerComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-timeline-controller',
            template: __webpack_require__(/*! ./timeline-controller.component.html */ "./src/app/time-navigation/timeline-controller/timeline-controller.component.html"),
            styles: [__webpack_require__(/*! ./timeline-controller.component.css */ "./src/app/time-navigation/timeline-controller/timeline-controller.component.css")]
        }),
        __param(1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_4__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [_angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"], Object])
    ], TimelineControllerComponent);
    return TimelineControllerComponent;
}());



/***/ }),

/***/ "./src/app/time-navigation/timeline-toolbar/timeline-toolbar.component.html":
/*!**********************************************************************************!*\
  !*** ./src/app/time-navigation/timeline-toolbar/timeline-toolbar.component.html ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"timelineToolbarMain\" fxLayout=\"row\">\n  <img src=\"assets/images/logo.png\" style=\"height:40px\">\n  <div style=\"margin-top: 5px\" *ngIf=\"showMockDataMessage\">{{uiConstants.SYNTH_DATA}}</div>\n  <div style=\"margin-top: 5px\"> {{uiConstants.LOINC_VERIFIED_STRING}}</div>\n  <button mat-icon-button [matMenuTriggerFor]=\"helpMenu\" matTooltip=\"Help\">\n    <mat-icon class=\"toolbarButton\">help_outline</mat-icon>\n  </button>\n  <mat-menu #helpMenu=\"matMenu\">\n    <button mat-menu-item (click)=\"openIFU()\">\n      <span>{{uiConstants.IFU}}</span>\n    </button>\n    <button mat-menu-item matTooltip=\"{{uiConstants.LAUNCH_TUTORIAL}}\" (click)=\"openHelpDialog()\">\n      <span>{{uiConstants.LAUNCH_TUTORIAL}}</span>\n    </button>\n  </mat-menu>\n</div>\n"

/***/ }),

/***/ "./src/app/time-navigation/timeline-toolbar/timeline-toolbar.component.ts":
/*!********************************************************************************!*\
  !*** ./src/app/time-navigation/timeline-toolbar/timeline-toolbar.component.ts ***!
  \********************************************************************************/
/*! exports provided: TimelineToolbarComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimelineToolbarComponent", function() { return TimelineToolbarComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/material/dialog */ "./node_modules/@angular/material/esm5/dialog.es5.js");
/* harmony import */ var src_app_setup_setup_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/app/setup/setup-data.service */ "./src/app/setup/setup-data.service.ts");
/* harmony import */ var src_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/constants */ "./src/constants.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../environments/environment */ "./src/environments/environment.ts");
/* harmony import */ var _dialogs_help_dialog_help_dialog_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../dialogs/help-dialog/help-dialog.component */ "./src/app/dialogs/help-dialog/help-dialog.component.ts");
/* harmony import */ var _dialogs_ifu_dialog_ifu_dialog_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../dialogs/ifu-dialog/ifu-dialog.component */ "./src/app/dialogs/ifu-dialog/ifu-dialog.component.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







var TimelineToolbarComponent = /** @class */ (function () {
    function TimelineToolbarComponent(setupDataService, helpDialog, ifuDialog, uiConstants) {
        var _this = this;
        this.helpDialog = helpDialog;
        this.ifuDialog = ifuDialog;
        this.uiConstants = uiConstants;
        this.showMockDataMessage = _environments_environment__WEBPACK_IMPORTED_MODULE_4__["environment"].useMockServer;
        this.saveSnapshot = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.addTextbox = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        setupDataService.displayGroupMapping.then(function (displayGroups) {
            _this.displayGroupings = Array.from(displayGroups.entries());
        });
    }
    // Emits an event indicating to CardContainer to save a snapshot of the page.
    TimelineToolbarComponent.prototype.snapshot = function () {
        this.saveSnapshot.emit();
    };
    // Emits an event indicating to CardContainer to add a blank textbox at the
    // top of the page.
    TimelineToolbarComponent.prototype.textbox = function () {
        this.addTextbox.emit();
    };
    TimelineToolbarComponent.prototype.openHelpDialog = function () {
        var dialogRef = this.helpDialog.open(_dialogs_help_dialog_help_dialog_component__WEBPACK_IMPORTED_MODULE_5__["HelpDialogComponent"]);
        Object(src_constants__WEBPACK_IMPORTED_MODULE_3__["recordGoogleAnalyticsEvent"])('viewTutorial', 'tutorial', new Date().toDateString());
    };
    TimelineToolbarComponent.prototype.openIFU = function () {
        var dialogRef = this.ifuDialog.open(_dialogs_ifu_dialog_ifu_dialog_component__WEBPACK_IMPORTED_MODULE_6__["IfuDialogComponent"]);
        Object(src_constants__WEBPACK_IMPORTED_MODULE_3__["recordGoogleAnalyticsEvent"])('viewTutorial', 'tutorial', new Date().toDateString());
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], TimelineToolbarComponent.prototype, "saveSnapshot", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], TimelineToolbarComponent.prototype, "addTextbox", void 0);
    TimelineToolbarComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-timeline-toolbar',
            template: __webpack_require__(/*! ./timeline-toolbar.component.html */ "./src/app/time-navigation/timeline-toolbar/timeline-toolbar.component.html"),
            styles: [__webpack_require__(/*! ../../cardcontainer/cardcontainer.component.css */ "./src/app/cardcontainer/cardcontainer.component.css")]
        }),
        __param(3, Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Inject"])(src_constants__WEBPACK_IMPORTED_MODULE_3__["UI_CONSTANTS_TOKEN"])),
        __metadata("design:paramtypes", [src_app_setup_setup_data_service__WEBPACK_IMPORTED_MODULE_2__["SetupDataService"], _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__["MatDialog"],
            _angular_material_dialog__WEBPACK_IMPORTED_MODULE_1__["MatDialog"], Object])
    ], TimelineToolbarComponent);
    return TimelineToolbarComponent;
}());



/***/ }),

/***/ "./src/app/utils/date_utils.ts":
/*!*************************************!*\
  !*** ./src/app/utils/date_utils.ts ***!
  \*************************************/
/*! exports provided: getTickMarksForXAxis, getDaysForIntervalSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTickMarksForXAxis", function() { return getTickMarksForXAxis; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDaysForIntervalSet", function() { return getDaysForIntervalSet; });
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

/**
 * For the given date range, returns a DateTime for each day in the time
 * range (converting to local time first) as a list in chronological
 * order. All data points in dateRange will be enclosed by the days listed in
 * the returned array. If specified, additional DateTimes will be included at
 * the 12-hour mark of each day in the interval.
 * @param dateRange The date range to get tick marks for.
 * @param twelveHour Whether or not to include DateTimes at the 12-hour mark of
 *     each day.
 *
 * @returns A list of the days in chronological order within the time range.
 */
function getTickMarksForXAxis(dateRange, twelveHour) {
    var days = [];
    // The dateRange could be stored in UTC, so convert it back to local
    // time.
    var intervalLocal = luxon__WEBPACK_IMPORTED_MODULE_0__["Interval"].fromDateTimes(dateRange.start.toLocal(), dateRange.end.toLocal());
    var startDate = intervalLocal.start.startOf('day');
    var dayCount = luxon__WEBPACK_IMPORTED_MODULE_0__["Duration"].fromMillis(intervalLocal.end.toMillis() - startDate.toMillis())
        .as('days');
    for (var i = 0; i <= dayCount; i++) {
        days.push(startDate.plus({ days: i }));
        if (twelveHour) {
            days.push(startDate.plus({ days: i, hours: 12 }));
        }
    }
    return days;
}
/**
 * Returns a DateTime for each day contained in any of the intervals in the
 * passed-in interval set. If the interval set contains day-boundaries, it will
 * add an extra day to be sure to encompass the full day, like
 * getTickMarksForXAxis. The days returned will be in an array in time order.
 *
 * @param intervals The intervals to list all the days for.
 */
function getDaysForIntervalSet(intervals) {
    var days = [];
    var allIntervals = luxon__WEBPACK_IMPORTED_MODULE_0__["Interval"].merge(intervals);
    for (var _i = 0, allIntervals_1 = allIntervals; _i < allIntervals_1.length; _i++) {
        var interval = allIntervals_1[_i];
        getTickMarksForXAxis(interval, false).forEach(function (x) { return days.push(x.toUTC()); });
    }
    return days.sort();
}


/***/ }),

/***/ "./src/app/utils/number_utils.ts":
/*!***************************************!*\
  !*** ./src/app/utils/number_utils.ts ***!
  \***************************************/
/*! exports provided: formatNumberWithPrecision */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatNumberWithPrecision", function() { return formatNumberWithPrecision; });
/**
 * Formats a number as a string to the correct precision.
 *
 * Formats the number into a more "human-readable" format.
 * For example, the number 10000 would get formatted to 10,000.
 *
 * @param number the number to format
 * @param precision the precision to format the number to. Passing 0 means
 *   no decimal. Passing 1 means 1 digit after the decimal point.
 */
function formatNumberWithPrecision(number, precision) {
    // The function Number.toLocalString formats into a more "human-readable"
    // format. In IE10 and below, toLocalString always rounds to 2 decimal places.
    // https://stackoverflow.com/questions/21536984/javascript-format-whole-numbers-using-tolocalestring
    // In order to ensure the correct precision in all browsers, We need to adjust
    // the decimal portion of the string after formatting it with the correct
    // precision.
    // get the number rounded to the correct precision.
    var numberAtPrecision = precision !== undefined ? number.toFixed(precision) : number.toString();
    // numberParts will always contain the integer part of the number as the first
    // element in the list.
    var numberParts = numberAtPrecision.split('.');
    var integer = numberParts[0];
    var formattedInteger = Number(integer).toLocaleString('en-us').split('.')[0];
    // if the precision is 0 or there was no decimal value, then just return the
    // formatted integer. Otherwise, add the decimal part back to the formatted
    // integer.
    return (precision === 0 || numberParts.length === 1) ?
        formattedInteger :
        formattedInteger + "." + numberParts[1];
}


/***/ }),

/***/ "./src/app/utils/unit_utils.ts":
/*!*************************************!*\
  !*** ./src/app/utils/unit_utils.ts ***!
  \*************************************/
/*! exports provided: fixUnitAbbreviations */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fixUnitAbbreviations", function() { return fixUnitAbbreviations; });
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
/**
 * This function replaces abbrevations and symbols in a unit string to comply
 * with EHRA guidelines.
 * @param unit The unit string to fix abbreviations of.
 */
function fixUnitAbbreviations(unit) {
    if (unit) {
        return unit.replace('uL', 'microL')
            .replace('', 'micro')
            .replace('DegC', 'Deg C');
    }
    return undefined;
}


/***/ }),

/***/ "./src/constants.ts":
/*!**************************!*\
  !*** ./src/constants.ts ***!
  \**************************/
/*! exports provided: recordGoogleAnalyticsEvent, APP_TIMESPAN, EARLIEST_ENCOUNTER_START_DATE, FhirResourceType, UI_CONSTANTS_TOKEN, UI_CONSTANTS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recordGoogleAnalyticsEvent", function() { return recordGoogleAnalyticsEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "APP_TIMESPAN", function() { return APP_TIMESPAN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EARLIEST_ENCOUNTER_START_DATE", function() { return EARLIEST_ENCOUNTER_START_DATE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FhirResourceType", function() { return FhirResourceType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UI_CONSTANTS_TOKEN", function() { return UI_CONSTANTS_TOKEN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UI_CONSTANTS", function() { return UI_CONSTANTS; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! luxon */ "./node_modules/luxon/build/cjs-browser/luxon.js");
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(luxon__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.



function recordGoogleAnalyticsEvent(eventName, eventCategory, eventLabel) {
    if (window.gtag) {
        window.gtag('event', eventName, {
            'event_category': eventCategory,
            'event_label': eventLabel
        });
    }
}
/** The period of time this app will search for patient encounters in.  */
var APP_TIMESPAN = _environments_environment__WEBPACK_IMPORTED_MODULE_2__["environment"].production ?
    luxon__WEBPACK_IMPORTED_MODULE_1__["Interval"].fromDateTimes(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].utc().minus(luxon__WEBPACK_IMPORTED_MODULE_1__["Duration"].fromObject({ months: 6 })), luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].utc()) :
    luxon__WEBPACK_IMPORTED_MODULE_1__["Interval"].fromDateTimes(luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].utc().minus(luxon__WEBPACK_IMPORTED_MODULE_1__["Duration"].fromObject({ months: 60 })), luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].utc());
/**
 * Do not consider any encounters with a start date earlier than a year from
 * now.
 */
var EARLIEST_ENCOUNTER_START_DATE = luxon__WEBPACK_IMPORTED_MODULE_1__["DateTime"].utc().minus({ years: 1 });
/** Constants used for FHIR resource types. */
var FhirResourceType;
(function (FhirResourceType) {
    FhirResourceType["Encounter"] = "Encounter";
    FhirResourceType["Observation"] = "Observation";
    FhirResourceType["MedicationAdministration"] = "MedicationAdministration";
    FhirResourceType["MedicationOrder"] = "MedicationOrder";
    FhirResourceType["DocumentReference"] = "DocumentReference";
    FhirResourceType["Patient"] = "Patient";
    FhirResourceType["Specimen"] = "Specimen";
    FhirResourceType["Medication"] = "Medication";
    FhirResourceType["DiagnosticReport"] = "DiagnosticReport";
})(FhirResourceType || (FhirResourceType = {}));
/**
 * Injection token for passing UI constants across the app.
 */
var UI_CONSTANTS_TOKEN = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["InjectionToken"]('UiConstantsToken');
/**
 * UI constants text.
 */
var UI_CONSTANTS = {
    SYNTH_DATA: 'This is synthesized data used only for demo purposes.',
    LOINC_VERIFIED_STRING: 'These BCH data mappings were verified 2019-04-30. v.2.3.0.0',
    // Tooltip for adding a card inline
    ADD_TIMELINE_HERE: 'Add timeline here',
    // Dialog for adding an event to the custom timeline
    ADD_TITLE_CUSTOM_EVENT: 'Add title',
    ADD_DESCRIPTION_CUSTOM_EVENT: 'Add description',
    ADD_CARD_HERE: 'Add card here',
    DATE_CUSTOM_EVENT: 'Date',
    TIME_CUSTOM_EVENT: 'Time',
    CANCEL: 'Cancel',
    SAVE: 'Save',
    CONTINUE: 'Continue',
    // Custom timeline constants
    ADD_CUSTOM_TIMELINE: 'Add Custom Timeline',
    CUSTOM_TIMELINE_LABEL: 'Custom Timeline',
    CUSTOM_TIMELINE_INSTRUCTIONS: 'Click on this graph to add a flag for anything you want to keep track of.',
    // Annotation constants
    ADD_ANNOTATION: 'Add Textbox',
    ANNOTATION_INSTRUCTIONS: 'Add your text here.',
    SAVE_TEXT_HINT: 'Click the save button to save your text.',
    EDIT_TEXT_HINT: 'Click the edit button to edit this text.',
    // Constants
    NO_DATA_AVAILABLE_TMPL: 'No data between ',
    // Used in menu to add timelines
    ADD_CHART: 'Add Data Timeline',
    SEARCH_FOR_A_CONCEPT: 'Search for a concept',
    // Confirmation dialog for removing a card
    REMOVE_CARD: 'Do you want to remove this card?',
    REMOVE_CARD_NO: 'No',
    REMOVE_CARD_YES: 'Yes, remove this card',
    // Error handling
    BAD_DATA_ERROR: 'Invalid data received. Please check the PowerChart.',
    BAD_ENCOUNTER_ERROR: 'Unable to retrieve hospital visit dates for this patient.' +
        ' You can select any time period in the past six months.',
    // Setup screen
    INITIAL_CONFIGURATION_HEADER: 'MedTimeLine',
    LAST_ONE_DAY: 'Since midnight yesterday',
    LAST_THREE_DAYS: 'Last three days',
    LAST_SEVEN_DAYS: 'Last seven days',
    LAST_MONTH: 'Last month',
    LAST_THREE_MONTHS: 'Last three months',
    NO_RESULTS: 'No results found',
    SELECT_ALL: 'Select all',
    CLEAR_SELECTION: 'Clear selection',
    NO_DATA_PAST_SIX_MOS: '(No data found for past six months)',
    CHECKING_DATA_AVAILABILITY: '(Checking data availability...)',
    WHICH_ENCOUNTER_FIRST: 'Which time period would you like to see first?',
    WHICH_CONCEPTS_FIRST: 'Which data timelines would you like to see first?',
    ENCOUNTER: '(patient encounter)',
    // Top banner constants
    CHANGE_DATE_RANGE: 'Change date range',
    MOCK_DATA_BANNER: 'This is synthesized data used for demo purposes only.',
    LAUNCH_TUTORIAL: 'Launch Tutorial',
    IFU: 'Open Instructions for Use',
    SAVE_TO_NOTE: 'Save a screenshot to a PowerChart clinical note',
    // Interacting with cards
    REMOVE_THIS_CARD: 'Remove this card',
    CARD_REMOVED: 'Card removed.',
    UNDO: 'Undo',
    DRAG_THIS_CARD: 'Drag and drop to move this card somewhere else',
    EDIT_THIS_CARD: 'Edit this card',
    SAVE_YOUR_WORK: 'Save your work on this card',
    // Saving to PowerChart
    SAVED_TO_POWERCHART: 'Screenshot saved to PowerChart.',
    ERROR_SAVED_TO_POWERCHART: 'Error saving to PowerChart.',
    DISMISS: 'Dismiss',
    // Tooltip headings
    SUMMARY: 'Summary',
    RESULT: 'Result set',
    CATEGORY: 'Category',
    STATUS: 'Status',
    SPECIMEN: 'Specimen',
    REPORT_ATTACHMENT: 'Report Attachment',
    TIME_SINCE_PREVIOUS_DOSE: 'Time since previous dose in this timeframe',
    TIME_BEFORE_NEXT_DOSE: 'Time before next dose in this timeframe',
    FIRST_DOSE: 'First dose within this timeframe',
    LAST_DOSE: 'Last dose within this timeframe',
    THIS_DOSE: 'This dose',
    PREVIOUS_DOSE: 'Previous dose within this timeframe (for this order)',
    NO_PREVIOUS_DOSE: 'No previous dose within this timeframe (for this order).',
    DOSAGE_INSTRUCTIONS: 'Dosage Instructions'
};


/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
/* harmony import */ var _environment_file_locations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./environment_file_locations */ "./src/environments/environment_file_locations.ts");
/* harmony import */ var zone_js_dist_zone_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zone.js/dist/zone-error */ "./node_modules/zone.js/dist/zone-error.js");
/* harmony import */ var zone_js_dist_zone_error__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(zone_js_dist_zone_error__WEBPACK_IMPORTED_MODULE_1__);
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var environment = __assign({ production: false, useMockServer: true, mockDataFolder: 'demo_data/test_bmedtimeB', mockDataFiles: [
        'BMedTimeB_DiagReport',
        'BMedTimeB_Encounter',
        'BMedTimeB_Obs_labs',
        'BMedTimeB_Obs_vitals',
        'BMedtimeB_MB_data',
        'BMedTimeB_Med_Admins',
        'BMedTimeB_Med_Orders',
    ] }, _environment_file_locations__WEBPACK_IMPORTED_MODULE_0__["environment_file_locations"], { useDebugger: false });
/*
 * In development mode, to ignore zone related error stack frames such as
 * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can
 * import the following file, but please comment it out in production mode
 * because it will have performance impact when throw error
 */
 // Included with Angular CLI.


/***/ }),

/***/ "./src/environments/environment_file_locations.ts":
/*!********************************************************!*\
  !*** ./src/environments/environment_file_locations.ts ***!
  \********************************************************/
/*! exports provided: environment_file_locations */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment_file_locations", function() { return environment_file_locations; });
/* harmony import */ var zone_js_dist_zone_error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zone.js/dist/zone-error */ "./node_modules/zone.js/dist/zone-error.js");
/* harmony import */ var zone_js_dist_zone_error__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(zone_js_dist_zone_error__WEBPACK_IMPORTED_MODULE_0__);
// Copyright 2019 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
// This file can be replaced during build by using the `fileReplacements`
// array.// `ng build ---prod` replaces `environment.ts` with
// `environment.prod.ts`. The list of file replacements can be found in
// `angular.json`.
// This file is used in the e2e tests.
var environment_file_locations = {
    conceptsFolder: 'clinical_concept_configuration',
    vitalGroupFile: 'vital_sign_groups.json',
    vitalConceptsFile: 'vital_signs.json',
    labConceptsFile: 'lab_results.json',
    labGroupFile: 'lab_groups.json',
    radiologyConceptsFile: 'radiology_results.json',
    radiologyGroupFile: 'radiology_groups.json',
    antibioticConceptsFile: 'medications_antibiotics.json',
    antibioticGroupFile: 'medication_groups_antibiotics.json',
    antiviralConceptsFile: 'medications_antivirals.json',
    antiviralGroupFile: 'medication_groups_antivirals.json',
    antifungalConceptsFile: 'medications_antifungals.json',
    antifungalGroupFile: 'medication_groups_antifungals.json',
    microbioGroupFile: 'microbio_groups.json',
    microbioConceptsFile: 'microbio_results.json'
};
/*
 * In development mode, to ignore zone related error stack frames such as
 * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can
 * import the following file, but please comment it out in production mode
 * because it will have performance impact when throw error
 */
 // Included with Angular CLI.


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/app.module */ "./src/app/app.module.ts");
/* harmony import */ var _app_fhir_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/fhir_config */ "./src/app/fhir_config.js");
/* harmony import */ var _app_fhir_config__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_app_fhir_config__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");
// Copyright 2018 Verily Life Sciences Inc.
//
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.





if (_environments_environment__WEBPACK_IMPORTED_MODULE_4__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
}
if (_app_fhir_config__WEBPACK_IMPORTED_MODULE_3__["googleAnalyticsTag"]) {
    // Global site tag (gtag.js) - Google Analytics
    document.write('  <script async src="https://www.googletagmanager.com/gtag/js?id=' +
        _app_fhir_config__WEBPACK_IMPORTED_MODULE_3__["googleTag"] + '"></script>');
    document.write('<script>window.dataLayer = window.dataLayer || [];' +
        'function gtag() {dataLayer.push(arguments);} gtag("js", new Date());' +
        'gtag("config", "' + _app_fhir_config__WEBPACK_IMPORTED_MODULE_3__["googleTag"] + '");</script>');
}
else {
    // If there is no Google Analytics Tag found, insert an empty script to
    // prevent errors with user interaction.
    document.write('<script>function gtag() {} </script>');
}
Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_2__["AppModule"]).catch(function (err) { return console.log(err); });


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! /usr/local/google/home/hmulholland/Code/bch/medtimeline/src/main.ts */"./src/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map