<app-card [id]="id" [color]="this.color.hsl().string()" [label]="label + unitsLabel" (removeEvent)="remove()">
  <ng-container class="legends-block">
    <ng-container *ngIf="uniqueDisplayGroups.length > 1">
      <div fxLayout="row" class="legend" *ngFor="let displayGroup of uniqueDisplayGroups"
        (mouseover)="focusOnDisplayGroup(displayGroup, $event)" (mouseout)="resetChart()">
        <span [style.background-color]="displayGroup.fill.hsl().string()"
          [style.border]="displayGroup.outline.hsl().string()">
        </span>
        <div fxFlex class="mat-body">{{displayGroup.label}}</div>
      </div>
    </ng-container>
  </ng-container>
  <div fxFlex fxLayout="column" class="contents-block">
    <div fxFlex *ngFor="let axis of resourceCodeGroups.axes" fxShrink="0" fxGrow="0" class="axis">
      <mat-spinner *ngIf="!axis.alreadyResolvedData" [diameter]="30"></mat-spinner>
      <div *ngIf="axis.alreadyResolvedData && axis.errorMessage">
        {{axis.errorMessage}}
      </div>
      <ng-container *ngIf="axis.alreadyResolvedData && !axis.errorMessage" [ngSwitch]="axis.chartType">
        <app-linegraph *ngSwitchCase="ChartType.LINE" [data]="axis.alreadyResolvedData" [xAxis]="this.xAxis"
          [eventlines]="this.eventlines" [axisLabel]="axis.label" [showTicks]="axis.showTicks"></app-linegraph>
        <app-scatterplot *ngSwitchCase="ChartType.SCATTER" [data]="axis.alreadyResolvedData" [xAxis]="this.xAxis"
          [eventlines]="this.eventlines" [axisLabel]="axis.label" [showTicks]="axis.showTicks"></app-scatterplot>
        <app-stepgraph class="stepgraph" *ngSwitchCase="ChartType.STEP" [data]="axis.alreadyResolvedData"
          [xAxis]="this.xAxis" [eventlines]="this.eventlines" [axisLabel]="axis.label">
        </app-stepgraph>
        <app-microbio-graph *ngSwitchCase="ChartType.MICROBIO" [data]="axis.alreadyResolvedData" [xAxis]="this.xAxis"
          [eventlines]="this.eventlines" [axisLabel]="axis.label"></app-microbio-graph>
      </ng-container>
    </div>
  </div>
</app-card>
